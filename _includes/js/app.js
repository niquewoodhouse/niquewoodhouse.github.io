!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e){!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var o=i(1),a=n(o);window.app=new a["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(2),s=n(r),l=i(63),u=n(l),d=i(90),c=n(d),f=i(3),h=n(f),p=i(128),v=n(p),m=i(117),g=n(m),y=i(129),b=n(y);i(130);var _=function(){function t(e){o(this,t),this.nav=c["default"],this.btns=s["default"],this.core=h["default"],this.grid=g["default"],this.intro=v["default"],this.router=u["default"],this.options=e||{},this.initEvents(),this.initModules()}return a(t,[{key:"initModules",value:function(){this.core.detect.init(this),this.core.resizes.init(this),this.core.scrolls.init(this),this.core.keys.init(),this.router.init(this,this.options),this.nav.init(this),this.btns.init(),this.audiobar=new b["default"],this.analytics=new this.core.Analytics}},{key:"initEvents",value:function(){this._onPreloadDone=this.onPreloadDone.bind(this),this.grid.isActive()?this.core.emitter.on("app--init",this._onPreloadDone):this.core.emitter.on("app--preload-done",this._onPreloadDone)}},{key:"onPreloadDone",value:function(){this.core.emitter.off("app--init",this._onPreloadDone),this.core.emitter.off("app--preload-done",this._onPreloadDone),this.core.dom.html.removeClass("is-clipped"),this.core.dom.body.removeClass("is-clipped"),this.intro.teardown()}}]),t}();e["default"]=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(5),s=n(r),l=null,u={init:function(){a["default"].dom.body.on("mouseenter",".js-btn",d).on("mouseleave",".js-btn",c),a["default"].log("btns initialized")}},d=function(){try{clearTimeout(l)}catch(t){a["default"].log("warn",t)}(0,s["default"])(this).addClass("is-btn-hover")},c=function(){var t=(0,s["default"])(this);l=setTimeout(function(){t.removeClass("is-btn-hover")},300)};e["default"]=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),a=n(o),r=i(35),s=n(r),l=i(45),u=n(l),d=i(43),c=n(d),f=i(48),h=n(f),p=i(49),v=n(p),m=i(50),g=n(m),y=i(52),b=n(y),_=i(44),w=n(_),T=i(34),E=n(T),P=i(37),k=n(P),C=i(54),j=n(C),M=i(55),$=n(M),O=i(59),S=n(O),A=i(46),I=n(A),x=i(60),D=n(x),N=i(51),R=n(N),z=i(62),H=n(z),L=i(47),W=n(L),U={api:a["default"],env:s["default"],log:u["default"],dom:c["default"],keys:h["default"],util:k["default"],cache:v["default"],hooks:g["default"],images:b["default"],detect:w["default"],config:E["default"],resizes:j["default"],resizer:$["default"],scrolls:S["default"],emitter:I["default"],scroller:D["default"],Waypoints:R["default"],Analytics:H["default"],Store:W["default"]};e["default"]=U},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),a=n(o),r=i(33),s=n(r),l=i(34),u=n(l),d=i(37),c=n(d),f=i(47),h=n(f),p=/^\/|\/$/g,v={data:{vimeo:{api:"https://api.vimeo.com/videos",key:"4fe810e95b5a32a53133739750ef23e4"},greenhouse:{api:"https://api.greenhouse.io/v1/boards/instrument/embed"},instrument:{apply:u["default"].servicesUrl+"/greenhouse/apply",customgrid:u["default"].servicesUrl+"/squarespace/customgrid"},squarespace:{url:location.origin,api:[location.origin,"api"].join("/"),record:"census/RecordHit"}},dataType:"json",format:"json",method:"GET",endpoint:function(t){return[this.data.squarespace.url,t.replace(p,"")].join("/")},apipoint:function(t){return[this.data.squarespace.api,t.replace(p,"")].join("/")},request:function(t,e,i){var n=c["default"].extendObject({format:this.format,nocache:!0},e),o=c["default"].extendObject({url:t,data:n,dataType:this.dataType,method:this.method},i);return a["default"].ajax(o)},collection:function(t,e,i){var n=this;return new Promise(function(o,a){var r={},l=t.split("?")[0];e=c["default"].extendObject({},e),e=c["default"].extendObject(e,(0,s["default"])(t)),e.tag&&(e.tag=e.tag.replace(/\+/g," ")),e.category&&(e.category=e.category.replace(/\+/g," ")),n.request(n.endpoint(l),e,i).then(function(t){"string"==typeof t?o(t):(r={collection:t.collection,item:t.item||null,items:t.items||null,pagination:t.pagination||null},o(r))})["catch"](function(t){a(t)})})},record:function(t,e,i){var n={url:window.location.href,queryString:window.location.search,userAgent:window.navigator.userAgent,referrer:"",localStorageSupported:h["default"].isStorageSupported,viewportInnerHeight:window.innerHeight,viewportInnerWidth:window.innerWidth,screenHeight:window.screen.height,screenWidth:window.screen.width,title:i,websiteId:t,templateId:t};return e.itemId?n.itemId=e.itemId:n.collectionId=e.collectionId,a["default"].ajax({url:this.apipoint(this.data.squarespace.record)+"?crumb="+h["default"].crumb,method:"POST",data:{event:"View",data:JSON.stringify(n)},dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"}})},vimeo:function(t){return a["default"].ajax({url:this.data.vimeo.api+"/"+t,method:"GET",data:{access_token:this.data.vimeo.key},dataType:"json"})},job:function(t){var e=c["default"].extendObject({},t||{});return a["default"].ajax({url:this.data.greenhouse.api+"/job",method:"GET",data:e,dataType:"jsonp"})},apply:function(t){return a["default"].ajax({url:this.data.instrument.apply,method:"POST",data:t,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"}})},customgrid:function(t){return a["default"].ajax({url:this.data.instrument.customgrid+"/"+t,method:"GET",dataType:"json"})}};e["default"]=v},function(t,e,i){(function(e){t.exports=e.hobo=i(6)}).call(e,function(){return this}())},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(7);i(8);return t.prototype.on=i(9),t.prototype.off=i(11),t.prototype.data=i(12),t.prototype.find=i(13),t.prototype.addClass=i(14),t.prototype.removeClass=i(15),t.prototype.eq=i(16),t.prototype.is=i(17),t.prototype.not=i(18),t.prototype.attr=i(19),t.prototype.prev=i(20),t.prototype.index=i(21),t.prototype.remove=i(22),t.prototype.append=i(23),t.prototype.prepend=i(24),t.prototype.parent=i(25),t.prototype.detach=i(26),t.prototype.filter=i(27),t.prototype.trigger=i(28),t.prototype.closest=i(29),t.prototype.children=i(30),t.prototype.removeAttr=i(31),hobo=function(e,i){return new t(e,i)},hobo.ajax=i(32),hobo})},function(t,e,i){var n=i(8),o=[],a=function(t,e){if(this._hobo=n.version,this._context=e&&e.nodeType&&1===e.nodeType?e:document,t===window||t===document||t.nodeType&&1===t.nodeType)this._selector="",t=[t];else if("string"==typeof t)if(t=n.trimString(t),n.rTag.test(t)){t=t.replace(n.rDocType,"");var i=document.createElement("hobo");i.innerHTML=t,t=n.makeArray(i.children),i=null}else this._selector=t,t=n.makeArray(this._context.querySelectorAll(t));else void 0!==t.length&&(this._selector="",t=n.makeArray(t));this._events={},this.length=t.length;for(var o=this.length;o--;)this[o]=t[o];this.forEach(n.makeData)};a.prototype.splice=o.splice,a.prototype.each=o.forEach,a.prototype.forEach=o.forEach,a.prototype.push=o.push,a.prototype.map=o.map,t.exports=a},function(t,e){var i="0.3.6",n=/^data-/,o=/\D/g,a=/-([\da-z])/gi,r=/^</,s=/^\[|\{/,l=/^<\!DOCTYPE\shtml>/i,u=/^\s+|\s+$/g,d=function(t){return t.replace(u,"")},c=function(t){return t.replace(a,function(t,e){return e.toUpperCase()})},f=function(){return"hobo"+(i+Math.random()).replace(o,"")},h=function(t){return[].slice.call(t)},p=function(t){t.hoboDataMap||(t.hoboDataMap={}),t.dataset?T(t):t.attributes&&w(t)},v=function(t,e){var i,n;for(n in t)t.hasOwnProperty(n)&&(i=c(n),e.hoboDataMap[i]=t[n])},m=function(t,e){for(var i in e.hoboDataMap)e.hoboDataMap.hasOwnProperty(i)&&!t[i]&&(t[i]=e.hoboDataMap[i])},g=function(t,e){var i=null;return t=c(t),e.hoboDataMap&&e.hoboDataMap[t]&&(i=e.hoboDataMap[t]),i},y=function(t,e){t=c(t),e.hoboDataMap&&e.hoboDataMap[t]&&delete e.hoboDataMap[t]},b=function(t,e){var i,n,o,a=[];for(o in t)t.hasOwnProperty(o)&&(i=e?e+"["+o+"]":o,n=t[o],"object"==typeof n?a.push(b(n,i)):a.push(encodeURIComponent(i)+"="+encodeURIComponent(n)));return a.join("&")},_=function(t){if(s.test(t))try{t=JSON.parse(t)}catch(e){throw e}return t},w=function(t){var e=t.attributes.length;for(e;e--;)if(n.test(t.attributes[e].name)){var i=c(t.attributes[e].name.replace(n,""));t.hoboDataMap[i]=_(t.attributes[e].value)}},T=function(t){for(var e in t.dataset)t.dataset.hasOwnProperty(e)&&(t.hoboDataMap[e]=_(t.dataset[e]))};t.exports={version:i,rData:n,rDigit:o,rTag:r,rJson:s,rDocType:l,rFront2Back:u,trimString:d,camelCase:c,makeId:f,makeArray:h,makeData:p,storeData:v,retrieveData:g,mergeData:m,removeData:y,serializeData:b}},function(t,e,i){var n=i(10),o=i(8),a=function(t,e,i,a){var r=o.makeId()+"EVENT",s=e,l=function(t){var o=i?n(t.target,i,!0):this;if("mouseenter"===e||"mouseleave"===e){var r="mouseenter"===e?t.fromElement:t.toElement;o&&r!==o&&!o.contains(r)&&a.call(o,t)}else o&&a.call(o,t)};"mouseenter"===e?s="mouseover":"mouseleave"===e&&(s="mouseout"),this._events[e][r]={id:r,type:s,node:t,handler:l,callback:a},t.addEventListener(s,l,!1)};t.exports=function(t,e,i){var n=this;return i||(i=e,e=this._selector),t.split(" ").forEach(function(t){n._events[t]||(n._events[t]={}),n.forEach(function(o){a.call(n,o,t,e,i)})}),this}},function(t,e,i){!function(e){t.exports=e()}(function(){var t=function(e,i,n){var o=e.matches?"matches":e.webkitMatchesSelector?"webkitMatchesSelector":e.mozMatchesSelector?"mozMatchesSelector":e.msMatchesSelector?"msMatchesSelector":e.oMatchesSelector?"oMatchesSelector":null;return o&&e[o].call(e,i)?e:n&&e!==document.documentElement&&e.parentNode?t(e.parentNode,i,n):null};return t})},function(t,e){var i=function(t,e,i){var n,o;if(i)for(o in this._events[e])this._events[e].hasOwnProperty(o)&&(n=this._events[e][o],n.node===t&&n.callback===i&&(t.removeEventListener(n.type,n.handler,!1),delete this._events[e][o]));else for(o in this._events[e])this._events[e].hasOwnProperty(o)&&(n=this._events[e][o],n.node===t&&(t.removeEventListener(n.type,n.handler,!1),delete this._events[e][o]))},n=function(t){var e,i,n;for(e in this._events)if(this._events.hasOwnProperty(e))for(n in this._events[e])this._events[e].hasOwnProperty(n)&&(i=this._events[e][n],i.node===t&&(t.removeEventListener(i.type,i.handler,!1),delete this._events[e][n]))};t.exports=function(t,e){var o=this;return(t?t.split(" "):[null]).forEach(function(t){o.forEach(function(a){null===t?n.call(o,a):i.call(o,a,t,e)})}),this}},function(t,e,i){var n=i(8);t.exports=function(t,e){var i=this,o=null;return"object"==typeof t?(o=t,this.forEach(function(t){n.storeData(o,t)})):e?(o={},o[t]=e,this.forEach(function(t){n.storeData(o,t)})):t?(this.forEach(function(e){null===o&&(o=n.retrieveData(t,e))}),i=o):(o={},this.forEach(function(t){n.mergeData(o,t)}),i=o),i}},function(t,e,i){var n=i(7),o=i(8);t.exports=function(t){var e=this;return this.length>1?(e=[],this.forEach(function(i){e=e.concat(o.makeArray(i.querySelectorAll(t)))}),e=new n(e,null)):e=new n(this.length?t:[],this.length?this[0]:null),e}},function(t,e,i){var n=i(8);t.exports=function(t){return this.forEach(function(e){var i=t.split(" "),o=e.className.split(" ");i.forEach(function(t){-1===o.indexOf(t)&&o.push(t)}),e.className=n.trimString(o.join(" "))}),this}},function(t,e,i){var n=i(8);t.exports=function(t){return this.forEach(function(e){if(void 0===t)e.className="";else{var i=t.split(" "),o=e.className.split(" ");i.forEach(function(t){-1!==o.indexOf(t)&&o.splice(o.indexOf(t),1)}),e.className=n.trimString(o.join(" "))}}),this}},function(t,e,i){var n=i(7);t.exports=function(t){return t<this.length?new n(this[t],this._context):this}},function(t,e,i){var n=(i(7),i(10));t.exports=function(t){return!!n(this[0],t)}},function(t,e,i){var n=i(10),o=i(7);t.exports=function(t){var e=new o([],this._context);return t instanceof o?this.forEach(function(i){var n=!0;t.forEach(function(t){i===t&&(n=!1)}),n&&e.push(i)}):this.forEach(function(i,o){"function"==typeof t?t(o,i)&&e.push(i):n(i,t)||e.push(i)}),e}},function(t,e,i){var n=i(8),o=function(t,e,i){if(t.setAttribute(e,i),n.rData.test(e)){var o={};o[e.replace(n.rData,"")]=i,n.storeData(o,t)}};t.exports=function(t,e){var i=this;if("object"==typeof t)for(var n in t)this.forEach(function(e){o(e,n,t[n])});else void 0!==e?this.forEach(function(i){o(i,t,e)}):i=this[0].getAttribute(t);return i}},function(t,e,i){var n=i(7),o=i(10);t.exports=function(t){var e=[];return this.forEach(function(i){for(var n=i.previousSibling;n&&1!==n.nodeType;)n=nextNode.previousSibling;n&&(!t||t&&o(n,t))&&e.push(n)}),new n(e,this._context)}},function(t,e){t.exports=function(){return[].indexOf.call(this[0].parentNode.children,this[0])}},function(t,e){t.exports=function(){return this.off(),this.forEach(function(t){delete t.hoboDataMap,t.parentNode&&t.parentNode.removeChild(t)}),this}},function(t,e,i){var n=i(7);t.exports=function(t){return"string"==typeof t&&(t=new n(t)),this.forEach(function(e){t instanceof n||t.length&&"function"==typeof t.forEach?t.forEach(function(t){t.nodeType&&1===t.nodeType&&e.appendChild(t)}):t.nodeType&&e.appendChild(t)}),this}},function(t,e,i){var n=i(7);t.exports=function(t){return"string"==typeof t&&(t=new n(t)),this.forEach(function(e){t instanceof n||t.length&&"function"==typeof t.forEach?t.forEach(function(t){t.nodeType&&1===t.nodeType&&e.insertBefore(t,e.firstChild)}):t.nodeType&&e.insertBefore(t,e.firstChild)}),this}},function(t,e,i){var n=i(7),o=i(10);t.exports=function(t){var e=[];return this.forEach(function(i){(!t||t&&o(i.parentNode,t))&&e.push(i.parentNode)}),new n(e,null)}},function(t,e){t.exports=function(){return this.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)}),this}},function(t,e,i){var n=i(7),o=i(10);t.exports=function(t){var e=[];return this.forEach(function(i){o(i,t)&&e.push(i)}),new n(e,null)}},function(t,e){t.exports=function(t){var e,i,n=this;return this.forEach(function(o){for(i in n._events[t])n._events[t].hasOwnProperty(i)&&(e=n._events[t][i],e.node===o&&(e=document.createEvent("Events"),e.initEvent(t,!0,!1),o.dispatchEvent(e)))}),this}},function(t,e,i){var n=i(7),o=i(10);t.exports=function(t){var e=[];return this.forEach(function(i){var n=o(i,t,!0);n&&e.push(n)}),new n(e,null)}},function(t,e,i){var n=i(7);i(8);t.exports=function(){var t,e,i=[];return this.forEach(function(n){for(e=0,t=n.children.length,e;t>e;e++)i.push(n.children[e])}),new n(i,this._context)}},function(t,e,i){var n=i(8);t.exports=function(t){return this.forEach(function(e){e.removeAttribute(t),n.rData.test(t)&&n.removeData(t.replace(n.rData,""),e)}),this}},function(t,e,i){var n=i(8);t.exports=function(t){var e=t.data||null,i=t.dataType||"html",o=(t.method||"GET").toUpperCase(),a=t.url||window.location.href,r=t.headers||null;return!e||FormData&&e instanceof FormData||(e=n.serializeData(t.data)),"GET"===o&&e&&(a+="?"+e),new Promise(function(s,l){var u=function(t){if("json"===i)try{t=JSON.parse(t)}catch(e){l("Rejecting on JSON.parse error : "+e)}s(t)};if("jsonp"===i){var d=n.makeId()+"JSONP",c=t.jsonp||"callback",f=document.createElement("script");f.src=a+(/\?/.test(a)?"&":"?")+c+"="+d,window[d]=function(t){document.getElementsByTagName("head")[0].removeChild(f),f=null,delete window[d],u(t)},document.getElementsByTagName("head")[0].appendChild(f)}else{var h=new XMLHttpRequest;if(h.open(o,a,!0),r)for(var p in r)r.hasOwnProperty(p)&&h.setRequestHeader(p,r[p]);h.onreadystatechange=function(t){4===this.readyState&&(/^20/.test(this.status)?u(this.responseText):l("Rejecting on server status code : "+this.status))},h.send(e)}})}},function(t,e,i){!function(e){t.exports=e()}(function(){var t=function(t){var e=decodeURIComponent(t).match(/[#|?].*$/g),i={};if(e){e=e[0].replace(/^\?|^#|^\/|\/$|\[|\]/g,""),e=e.split("&");for(var n=e.length;n--;){var o=e[n].split("="),a=o[0],r=o[1];i[a]?("[object Array]"!=={}.toString.call(i[a])&&(i[a]=[i[a]]),i[a].push(r)):i[a]=r}}return i};return"undefined"!=typeof $&&($.paramalama=t),t})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(35),a=n(o),r=i(36),s=n(r),l={servicesUrl:a["default"].isLocal()?"http://localhost:8000":"https://services.instrument.com",asyncScriptPath:"/assets/async/scripts/",asyncStylePath:"/assets/async/styles/",mobileWidth:640,laptopWidth:1440,tabletWidth:1024,defaultDragBeltOptions:{type:"x",edgeResistance:.6,dragResistance:.25,throwProps:!0,cursor:"grab",lockAxis:!0,zIndexBoost:!1},sqsMaxImgWidth:2500,sqsSpecialProps:{published:"publishOn",userUpload:"systemDataVariants",blockDataKey:"blockJson"},supportedVideoApiProvider:"vimeo",defaultCategory:"All",devCategory:"Development",gridCustomType:"customgrid",caseStudyCustomType:"custom_case_study",articleCustomType:"custom_article",deviceVideoCustomType:"custom_device_video",videoCustomType:"custom_video",autoplayVideoCustomType:"custom_autoplay_video",defaultEasing:s["default"].easeInOutCubic,defaultDuration:400,defaultVideoChannel:"vid",defaultAudioChannel:"bgm",hookNodeSelector:".js-hook-node",lazyImageSelector:".js-lazy-image",lazyImageAttr:"data-img-src",imageLoaderAttr:"data-imageloader",activateLinkAttr:"data-title"};e["default"]=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="development",n="production",o={ENV:/^localhost|squarespace\.com$|^[0-9]{0,3}\.[0-9]{0,3}\.[0-9]{0,3}\.[0-9]{0,3}/g.test(document.domain)?i:n,isDev:function(){return this.ENV===i},isLocal:function(){return/^localhost/.test(document.domain)},isConfig:function(){return-1!==window.parent.location.pathname.indexOf("/config")}};e["default"]=o},function(t,e,i){!function(e){t.exports=e()}(function(){var t={linear:function(t){return t},swing:function(t){return(1-Math.cos(t*Math.PI))/2},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return.5>t?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t}};return t})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),a=n(o),r=i(38),s=n(r),l=i(39),u=n(l),d=i(41),c=n(d),f=i(42),h=n(f),p=i(43),v=n(p),m=i(34),g=n(m),y=i(44),b=n(y),_=i(46),w=n(_),T=function(t){return t.preventDefault(),!1},E=function(t){return t+"px"},P=function(t,e,i,n){t.style[s["default"].prefixed(t.style,"transform")]="translate3d( "+e+", "+i+", "+n+" )"},k=function(t){var e=!1;if(t){var i=t.getBoundingClientRect();e=i.top<2*window.innerHeight}return e},C=function(t){var e=!1;if(t){var i=t.getBoundingClientRect();e=i.top<window.innerHeight&&i.bottom>0}return e},j=function(t){var e=!1;if(t){var i=t.getBoundingClientRect();e=i.left<window.innerWidth&&i.right>0}return e},M=function(t,e){var i=Math.max.apply(null,t),n=t.length;for(n;n--;)t[n]>=e&&t[n]<i&&(i=t[n]);return i},$=function(t,e){var i=t.length,n=(0,a["default"])([]);for(e=e||C,i;i--;)e(t[i])&&n.push(t[i]);return n},O=function(t){t=t||(0,a["default"])("["+g["default"].imageLoaderAttr+"]"),t.length&&(t.forEach(function(t){t.removeAttribute(g["default"].imageLoaderAttr)}),S(t,R))},S=function(t,e,i){var n=/\?(.*)$/,o=function(t){return parseInt(t,10)},a=null,r=null,s=null,l=null,d=null,c=null,f=null,h=null,p=null;for(e=e||k,t=t||v["default"].page.find(g["default"].lazyImageSelector),i||i===!1||(i=!0),p=t.length;p--;)a=t.eq(p),r=a.data(),l=a[0].clientWidth||a[0].parentNode.clientWidth||window.innerWidth,d=a[0].clientHeight||a[0].parentNode.clientHeight||window.innerHeight,c=Math.max(l,d),h=r.mobileSrc&&b["default"].isDevice()&&window.innerWidth<=g["default"].mobileWidth?r.mobileSrc.replace(n,""):r.imgSrc.replace(n,""),i&&r.variants&&(s=r.variants.split(",").map(o),f=M(s,c),window.devicePixelRatio>1&&(s.splice(s.indexOf(f),1),f=M(s,f)),a[0].setAttribute(g["default"].lazyImageAttr,h+"?format="+f+"w"));return new u["default"]({elements:t,property:g["default"].lazyImageAttr,executor:e})},A=function(t,e){var i=t.sources.length,n=function(){i--,0===i&&(t.loaded=!0,"function"==typeof e&&e())};t.sources.forEach(function(t){"script"===t.type?(0,h["default"])(g["default"].asyncScriptPath+t.file,function(){t.node=this,n()}):"style"===t.type&&(0,c["default"])(g["default"].asyncStylePath+t.file).onloadcssdefined(n)})},I=function(t){t.sources.forEach(function(t){"script"===t.type&&t.node?(t.node.parentNode.removeChild(t.node),delete t.node):"style"===t.type&&(0,a["default"])("link[href$='"+t.file+"']").remove()}),t.loaded=!1},x=function(t){t?v["default"].doc.on("DOMMouseScroll mousewheel",T):v["default"].doc.off("DOMMouseScroll mousewheel")},D=function(t){t?v["default"].doc.on("touchmove",T):v["default"].doc.off("touchmove")},N=function(t){var e=0,i=null,n=!1,o=1e3;return t&&(i=getComputedStyle(t)[s["default"].prefixed(t.style,"transition-duration")],n=-1===String(i).indexOf("ms"),o=n?1e3:1,e=parseFloat(i)*o),e},R=function(){return!0},z=function(t){var e=t.length-1,i=0,n=t[e];for(e;e>0;e--)i=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[i],t[i]=n;return t},H=function(t){t*=1e3;var e=parseInt(t/6e4,10),i=parseInt(t/1e3,10)%60;return 10>i&&(i="0"+i),e+":"+i},L=function(){return b["default"].isDevice()?{}:{cssProps:{contentZoomingString:!1,tapHighlightColorString:!1,touchCalloutString:!1,touchSelectString:!1,userDragString:!1,userSelectString:!1}}},W=function(t,e,i,n){var o=Math.min(i/t,n/e);return{width:t*o,height:e*o}},U=function(t){var e=(0,a["default"])(t),i=e[0].attributes,n={},o=null;for(o in i)i[o]&&(n[i[o].name]=i[o].value);return n},V=function(){return("/"===window.location.pathname?"homepage":window.location.pathname)+window.location.search},F=function(t){var e=t.split("x");return{width:parseInt(e[0],10),height:parseInt(e[1],10)}},q=function(t,e){var i=null,n=Array.isArray(t)?[]:{};if(Array.isArray(e)){for(i=t.length;i--;)n[i]=t[i];for(i=e.length;i--;)n[i]=e[i]}else{for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i])}return n},B=function(t){return t.toString().toLowerCase().trim().replace(/&/g,"-and-").replace(/[\s\W-]+/g,"-").replace(/^[-]+|[-]+$/g,"")},Y=function(t,e){var i=!0;return(0,a["default"])(e).closest("pre").length&&(i=!1),i},G=function(t){var e=getComputedStyle(t)["background-color"].replace(/^rgb/,"rgba").replace(/\)$/,", 0.8)");w["default"].fire("app--colorplate-change",e)},X=function(){v["default"].html.attr("style",""),w["default"].fire("app--colorplate-change",null)},J={loadImages:S,updateImages:O,loadDependencies:A,getElementsInView:$,isElementLoadable:k,unloadDependencies:I,isElementVisibleVert:C,isElementVisibleHorz:j,disableTouchMove:D,disableMouseWheel:x,px:E,noop:R,preFree:Y,shuffle:z,slugify:B,parseTime:H,getAttrMap:U,getPageKey:V,translate3d:P,extendObject:q,getOriginalDims:F,getTransitionDuration:N,getDefaultHammerOptions:L,calculateAspectRatioFit:W,processBgColorForBroadcast:G,resetBgColorForBroadcast:X};e["default"]=J},function(t,e,i){var n;!function(o,a,r,s){"use strict";function l(t,e,i){return setTimeout(h(t,i),e)}function u(t,e,i){return Array.isArray(t)?(d(t,i[e],i),!0):!1}function d(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==s)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function c(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=o.console&&(o.console.warn||o.console.log);return a&&a.call(o.console,n,i),t.apply(this,arguments)}}function f(t,e,i){var n,o=e.prototype;n=t.prototype=Object.create(o),n.constructor=t,n._super=o,i&&vt(n,i)}function h(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==yt?t.apply(e?e[0]||s:s,e):t}function v(t,e){return t===s?e:t}function m(t,e,i){d(_(e),function(e){t.addEventListener(e,i,!1)})}function g(t,e,i){d(_(e),function(e){t.removeEventListener(e,i,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function b(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function w(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function T(t){return Array.prototype.slice.call(t,0)}function E(t,e,i){for(var n=[],o=[],a=0;a<t.length;){var r=e?t[a][e]:t[a];w(o,r)<0&&n.push(t[a]),o[a]=r,a++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function P(t,e){for(var i,n,o=e[0].toUpperCase()+e.slice(1),a=0;a<mt.length;){if(i=mt[a],n=i?i+o:e,n in t)return n;a++}return s}function k(){return Pt++}function C(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}function j(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&i.handler(e)},this.init()}function M(t){var e,i=t.options.inputClass;return new(e=i?i:jt?U:Mt?q:Ct?Y:W)(t,$)}function $(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,a=e&xt&&n-o===0,r=e&(Nt|Rt)&&n-o===0;i.isFirst=!!a,i.isFinal=!!r,a&&(t.session={}),i.eventType=e,O(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function O(t,e){var i=t.session,n=e.pointers,o=n.length;i.firstInput||(i.firstInput=I(e)),o>1&&!i.firstMultiple?i.firstMultiple=I(e):1===o&&(i.firstMultiple=!1);var a=i.firstInput,r=i.firstMultiple,s=r?r.center:a.center,l=e.center=x(n);e.timeStamp=wt(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=z(s,l),e.distance=R(s,l),S(i,e),e.offsetDirection=N(e.deltaX,e.deltaY);var u=D(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=_t(u.x)>_t(u.y)?u.x:u.y,e.scale=r?L(r.pointers,n):1,e.rotation=r?H(r.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,A(i,e);var d=t.element;y(e.srcEvent.target,d)&&(d=e.srcEvent.target),e.target=d}function S(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},a=t.prevInput||{};e.eventType!==xt&&a.eventType!==Nt||(o=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}function A(t,e){var i,n,o,a,r=t.lastInterval||e,l=e.timeStamp-r.timeStamp;if(e.eventType!=Rt&&(l>It||r.velocity===s)){var u=e.deltaX-r.deltaX,d=e.deltaY-r.deltaY,c=D(l,u,d);n=c.x,o=c.y,i=_t(c.x)>_t(c.y)?c.x:c.y,a=N(u,d),t.lastInterval=e}else i=r.velocity,n=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=n,e.velocityY=o,e.direction=a}function I(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:bt(t.pointers[i].clientX),clientY:bt(t.pointers[i].clientY)},i++;return{timeStamp:wt(),pointers:e,center:x(e),deltaX:t.deltaX,deltaY:t.deltaY}}function x(t){var e=t.length;if(1===e)return{x:bt(t[0].clientX),y:bt(t[0].clientY)};for(var i=0,n=0,o=0;e>o;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:bt(i/e),y:bt(n/e)}}function D(t,e,i){return{x:e/t||0,y:i/t||0}}function N(t,e){return t===e?zt:_t(t)>=_t(e)?0>t?Ht:Lt:0>e?Wt:Ut}function R(t,e,i){i||(i=Bt);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function z(t,e,i){i||(i=Bt);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}function H(t,e){return z(e[1],e[0],Yt)+z(t[1],t[0],Yt)}function L(t,e){return R(e[0],e[1],Yt)/R(t[0],t[1],Yt)}function W(){this.evEl=Xt,this.evWin=Jt,this.pressed=!1,j.apply(this,arguments)}function U(){this.evEl=Zt,this.evWin=te,j.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=ie,this.evWin=ne,this.started=!1,j.apply(this,arguments)}function F(t,e){var i=T(t.touches),n=T(t.changedTouches);return e&(Nt|Rt)&&(i=E(i.concat(n),"identifier",!0)),[i,n]}function q(){this.evTarget=ae,this.targetIds={},j.apply(this,arguments)}function B(t,e){var i=T(t.touches),n=this.targetIds;if(e&(xt|Dt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,a,r=T(t.changedTouches),s=[],l=this.target;if(a=i.filter(function(t){return y(t.target,l)}),e===xt)for(o=0;o<a.length;)n[a[o].identifier]=!0,o++;for(o=0;o<r.length;)n[r[o].identifier]&&s.push(r[o]),e&(Nt|Rt)&&delete n[r[o].identifier],o++;return s.length?[E(a.concat(s),"identifier",!0),s]:void 0}function Y(){j.apply(this,arguments);var t=h(this.handler,this);this.touch=new q(this.manager,t),this.mouse=new W(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function G(t,e){t&xt?(this.primaryTouch=e.changedPointers[0].identifier,X.call(this,e)):t&(Nt|Rt)&&X.call(this,e)}function X(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,o=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(o,re)}}function J(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],a=Math.abs(e-o.x),r=Math.abs(i-o.y);if(se>=a&&se>=r)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function Q(t){if(b(t,he))return he;var e=b(t,pe),i=b(t,ve);return e&&i?he:e||i?e?pe:ve:b(t,fe)?fe:ce}function Z(){if(!ue)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=e?o.CSS.supports("touch-action",i):!0}),t}function tt(t){this.options=vt({},this.defaults,t||{}),this.id=k(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=ge,this.simultaneous={},this.requireFail=[]}function et(t){return t&Te?"cancel":t&_e?"end":t&be?"move":t&ye?"start":""}function it(t){return t==Ut?"down":t==Wt?"up":t==Ht?"left":t==Lt?"right":""}function nt(t,e){var i=e.manager;return i?i.get(t):t}function ot(){tt.apply(this,arguments)}function at(){ot.apply(this,arguments),this.pX=null,this.pY=null}function rt(){ot.apply(this,arguments)}function st(){tt.apply(this,arguments),this._timer=null,this._input=null}function lt(){ot.apply(this,arguments)}function ut(){ot.apply(this,arguments)}function dt(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ct(t,e){return e=e||{},e.recognizers=v(e.recognizers,ct.defaults.preset),new ft(t,e)}function ft(t,e){this.options=vt({},ct.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=M(this),this.touchAction=new K(this,this.options.touchAction),ht(this,!0),d(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ht(t,e){var i=t.element;if(i.style){var n;d(t.options.cssProps,function(o,a){n=P(i.style,a),e?(t.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function pt(t,e){var i=a.createEvent("Event");
i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var vt,mt=["","webkit","Moz","MS","ms","o"],gt=a.createElement("div"),yt="function",bt=Math.round,_t=Math.abs,wt=Date.now;vt="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==s&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign;var Tt=c(function(t,e,i){for(var n=Object.keys(e),o=0;o<n.length;)(!i||i&&t[n[o]]===s)&&(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),Et=c(function(t,e){return Tt(t,e,!0)},"merge","Use `assign`."),Pt=1,kt=/mobile|tablet|ip(ad|hone|od)|android/i,Ct="ontouchstart"in o,jt=P(o,"PointerEvent")!==s,Mt=Ct&&kt.test(navigator.userAgent),$t="touch",Ot="pen",St="mouse",At="kinect",It=25,xt=1,Dt=2,Nt=4,Rt=8,zt=1,Ht=2,Lt=4,Wt=8,Ut=16,Vt=Ht|Lt,Ft=Wt|Ut,qt=Vt|Ft,Bt=["x","y"],Yt=["clientX","clientY"];j.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)}};var Gt={mousedown:xt,mousemove:Dt,mouseup:Nt},Xt="mousedown",Jt="mousemove mouseup";f(W,j,{handler:function(t){var e=Gt[t.type];e&xt&&0===t.button&&(this.pressed=!0),e&Dt&&1!==t.which&&(e=Nt),this.pressed&&(e&Nt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:St,srcEvent:t}))}});var Kt={pointerdown:xt,pointermove:Dt,pointerup:Nt,pointercancel:Rt,pointerout:Rt},Qt={2:$t,3:Ot,4:St,5:At},Zt="pointerdown",te="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Zt="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),f(U,j,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=Kt[n],a=Qt[t.pointerType]||t.pointerType,r=a==$t,s=w(e,t.pointerId,"pointerId");o&xt&&(0===t.button||r)?0>s&&(e.push(t),s=e.length-1):o&(Nt|Rt)&&(i=!0),0>s||(e[s]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),i&&e.splice(s,1))}});var ee={touchstart:xt,touchmove:Dt,touchend:Nt,touchcancel:Rt},ie="touchstart",ne="touchstart touchmove touchend touchcancel";f(V,j,{handler:function(t){var e=ee[t.type];if(e===xt&&(this.started=!0),this.started){var i=F.call(this,t,e);e&(Nt|Rt)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:$t,srcEvent:t})}}});var oe={touchstart:xt,touchmove:Dt,touchend:Nt,touchcancel:Rt},ae="touchstart touchmove touchend touchcancel";f(q,j,{handler:function(t){var e=oe[t.type],i=B.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:$t,srcEvent:t})}});var re=2500,se=25;f(Y,j,{handler:function(t,e,i){var n=i.pointerType==$t,o=i.pointerType==St;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)G.call(this,e,i);else if(o&&J.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var le=P(gt.style,"touchAction"),ue=le!==s,de="compute",ce="auto",fe="manipulation",he="none",pe="pan-x",ve="pan-y",me=Z();K.prototype={set:function(t){t==de&&(t=this.compute()),ue&&this.manager.element.style&&me[t]&&(this.manager.element.style[le]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return d(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,o=b(n,he)&&!me[he],a=b(n,ve)&&!me[ve],r=b(n,pe)&&!me[pe];if(o){var s=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(s&&l&&u)return}return r&&a?void 0:o||a&&i&Vt||r&&i&Ft?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ge=1,ye=2,be=4,_e=8,we=_e,Te=16,Ee=32;tt.prototype={defaults:{},set:function(t){return vt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(u(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return u(t,"dropRecognizeWith",this)?this:(t=nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(u(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),-1===w(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(u(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=w(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;_e>n&&e(i.options.event+et(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=_e&&e(i.options.event+et(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=Ee)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ee|ge)))return!1;t++}return!0},recognize:function(t){var e=vt({},t);return p(this.options.enable,[this,e])?(this.state&(we|Te|Ee)&&(this.state=ge),this.state=this.process(e),void(this.state&(ye|be|_e|Te)&&this.tryEmit(e))):(this.reset(),void(this.state=Ee))},process:function(t){},getTouchAction:function(){},reset:function(){}},f(ot,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(ye|be),o=this.attrTest(t);return n&&(i&Rt||!o)?e|Te:n||o?i&Nt?e|_e:e&ye?e|be:ye:Ee}}),f(at,ot,{defaults:{event:"pan",threshold:10,pointers:1,direction:qt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Vt&&e.push(ve),t&Ft&&e.push(pe),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,a=t.deltaX,r=t.deltaY;return o&e.direction||(e.direction&Vt?(o=0===a?zt:0>a?Ht:Lt,i=a!=this.pX,n=Math.abs(t.deltaX)):(o=0===r?zt:0>r?Wt:Ut,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return ot.prototype.attrTest.call(this,t)&&(this.state&ye||!(this.state&ye)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=it(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),f(rt,ot,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ye)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),f(st,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ce]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Nt|Rt)&&!o)this.reset();else if(t.eventType&xt)this.reset(),this._timer=l(function(){this.state=we,this.tryEmit()},e.time,this);else if(t.eventType&Nt)return we;return Ee},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===we&&(t&&t.eventType&Nt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=wt(),this.manager.emit(this.options.event,this._input)))}}),f(lt,ot,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ye)}}),f(ut,ot,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Vt|Ft,pointers:1},getTouchAction:function(){return at.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Vt|Ft)?e=t.overallVelocity:i&Vt?e=t.overallVelocityX:i&Ft&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&Nt},emit:function(t){var e=it(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),f(dt,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[fe]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&xt&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=Nt)return this.failTimeout();var a=this.pTime?t.timeStamp-this.pTime<e.interval:!0,r=!this.pCenter||R(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,r&&a?this.count+=1:this.count=1,this._input=t;var s=this.count%e.taps;if(0===s)return this.hasRequireFailures()?(this._timer=l(function(){this.state=we,this.tryEmit()},e.interval,this),ye):we}return Ee},failTimeout:function(){return this._timer=l(function(){this.state=Ee},this.options.interval,this),Ee},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==we&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ct.VERSION="2.0.7",ct.defaults={domEvents:!1,touchAction:de,enable:!0,inputTarget:null,inputClass:null,preset:[[lt,{enable:!1}],[rt,{enable:!1},["rotate"]],[ut,{direction:Vt}],[at,{direction:Vt},["swipe"]],[dt],[dt,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Pe=1,ke=2;ft.prototype={set:function(t){return vt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?ke:Pe},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&we)&&(o=e.curRecognizer=null);for(var a=0;a<n.length;)i=n[a],e.stopped===ke||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&i.state&(ye|be|_e)&&(o=e.curRecognizer=i),a++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(u(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(u(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=w(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var i=this.handlers;return d(_(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==s){var i=this.handlers;return d(_(t),function(t){e?i[t]&&i[t].splice(w(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&pt(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},vt(ct,{INPUT_START:xt,INPUT_MOVE:Dt,INPUT_END:Nt,INPUT_CANCEL:Rt,STATE_POSSIBLE:ge,STATE_BEGAN:ye,STATE_CHANGED:be,STATE_ENDED:_e,STATE_RECOGNIZED:we,STATE_CANCELLED:Te,STATE_FAILED:Ee,DIRECTION_NONE:zt,DIRECTION_LEFT:Ht,DIRECTION_RIGHT:Lt,DIRECTION_UP:Wt,DIRECTION_DOWN:Ut,DIRECTION_HORIZONTAL:Vt,DIRECTION_VERTICAL:Ft,DIRECTION_ALL:qt,Manager:ft,Input:j,TouchAction:K,TouchInput:q,MouseInput:W,PointerEventInput:U,TouchMouseInput:Y,SingleTouchInput:V,Recognizer:tt,AttrRecognizer:ot,Tap:dt,Pan:at,Swipe:ut,Pinch:rt,Rotate:lt,Press:st,on:m,off:g,each:d,merge:Et,extend:Tt,assign:vt,inherit:f,bindFn:h,prefixed:P});var Ce="undefined"!=typeof o?o:"undefined"!=typeof self?self:{};Ce.Hammer=ct,n=function(){return ct}.call(e,i,e,t),!(n!==s&&(t.exports=n))}(window,document,"Hammer")},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(40),e=function(e){if(!e)throw new Error("ImageLoader Class requires options to be passed");return t.call(this),this._executor=e.executor||function(t){return t},this._elements=e.elements,this._property=e.property||"data-src",this._loadType=e.loadType||"async",this._numLoaded=0,this._num2Load=this._elements?this._elements.length:0,this._transitionDelay=e.transitionDelay||0,this._transitionDuration=e.transitionDuration||400,this._resolved=!1,this._elements.length?void("async"===this._loadType?this.initAsync():this.initSync()):this};return e.prototype=Object.create(t.prototype),e.prototype.initAsync=function(){var t=this;this.go(function(){t._resolved?t.stop():t.handle()})},e.prototype.initSync=function(){function t(){var i=e._elements[e._numLoaded];e._numLoaded++,e.load(i,function(i){i||e._resolved||t()})}var e=this;t()},e.prototype.load=function(t,e){var i=this,n=null,o=null,a="IMG"===t.nodeName,r=t.getAttribute(this._property);return t.setAttribute("data-imageloader",!0),n=a?t:new Image,o=setTimeout(function(){clearTimeout(o),n.onload=function(){i.fire("load",t),a||(t.style.backgroundImage="url("+r+")",n=null),o=setTimeout(function(){clearTimeout(o),i._numLoaded!==i._num2Load||i._resolved?"function"==typeof e&&e(!1):i._resolve(!0)},i._transitionDuration)},n.onerror=function(){i.fire("error",t),i._numLoaded!==i._num2Load||i._resolved?"function"==typeof e&&e(!0):i._resolve(!0)},n.src=r},this._transitionDelay),this},e.prototype.handle=function(){for(var t=this.getNotLoaded(),e=this,i=0,n=t.length;n>i;i++)e._executor(t[i])&&(e._numLoaded++,e.load(t[i]))},e.prototype.getNotLoaded=function(){for(var t=[],e=0,i=this._elements.length;i>e;e++)this._elements[e].getAttribute("data-imageloader")||t.push(this._elements[e]);return t},e.prototype._resolve=function(){this._resolved=!0,this.fire("done")},e})},function(t,e,i){!function(e){t.exports=e()}(function(){var t=window.requestAnimationFrame,e=window.cancelAnimationFrame,i=function(){return this.init.apply(this,arguments)};return i.prototype={constructor:i,init:function(){this._handlers={},this._uid=0,this._started=!1,this._paused=!1,this._cycle=null},go:function(e){if(this._started&&this._cycle)return this;this._started=!0;var i=this,n=function(){i._cycle=t(n),i._started&&"function"==typeof e&&e()};n()},pause:function(){return this._paused=!0,this},play:function(){return this._paused=!1,this},stop:function(){return e(this._cycle),this._paused=!1,this._started=!1,this._cycle=null,this},on:function(t,e){var i=t.split(" ");e._jsControllerID=this.getUID();for(var n=i.length;n--;)"function"==typeof e&&(this._handlers[i[n]]||(this._handlers[i[n]]=[]),this._handlers[i[n]].push(e));return this},off:function(t,e){return this._handlers[t]?(e?this._off(t,e):this._offed(t),this):this},fire:function(t){if(!this._handlers[t])return this;for(var e=[].slice.call(arguments,1),i=this._handlers[t].length;i--;)this._handlers[t][i].apply(this,e);return this},getUID:function(){return this._uid=this._uid+1,this._uid},_off:function(t,e){for(var i=0,n=this._handlers[t].length;n>i;i++)if(e._jsControllerID===this._handlers[t][i]._jsControllerID){this._handlers[t].splice(i,1);break}},_offed:function(t){for(var e=this._handlers[t].length;e--;)this._handlers[t][e]=null;delete this._handlers[t]}},i})},function(t,e,i){(function(e){!function(e){"use strict";var i=function(t,i,n){var o,a=e.document,r=a.createElement("link");if(i)o=i;else{var s=(a.body||a.getElementsByTagName("head")[0]).childNodes;o=s[s.length-1]}var l=a.styleSheets;r.rel="stylesheet",r.href=t,r.media="only x",o.parentNode.insertBefore(r,i?o:o.nextSibling);var u=function(t){for(var e=r.href,i=l.length;i--;)if(l[i].href===e)return t();setTimeout(function(){u(t)})};return r.onloadcssdefined=u,u(function(){r.media=n||"all"}),r};t.exports=i}("undefined"!=typeof e?e:this)}).call(e,function(){return this}())},function(t,e,i){(function(e){!function(e){var i=function(t,i){"use strict";var n=e.document.getElementsByTagName("script")[0],o=e.document.createElement("script");return o.src=t,o.async=!0,n.parentNode.insertBefore(o,n),i&&"function"==typeof i&&(o.onload=i),o};t.exports=i}("undefined"!=typeof e?e:this)}).call(e,function(){return this}())},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),a=n(o),r=(0,a["default"])(".js-header"),s={doc:(0,a["default"])(document),html:(0,a["default"])(document.documentElement),body:(0,a["default"])(document.body),page:(0,a["default"])(".js-page"),nav:(0,a["default"])(".js-menu-nav"),header:{node:r,label:r.find(".js-header-util"),btns:r.find(".js-btn")},intro:(0,a["default"])(".js-intro")};e["default"]=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(43),a=n(o),r=i(45),s=n(r),l={init:function(){this._isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this._isMobile=/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|Opera Mini/gi.test(window.navigator.userAgent),this._isSurface="onmouseover"in document&&/Windows NT/.test(window.navigator.userAgent)&&/Touch/.test(window.navigator.userAgent),this._isStandalone="standalone"in window&&window.standalone,"standalone"in window&&a["default"].html.addClass("is-standalone"),this._isSurface&&a["default"].html.addClass("is-surface"),this._isTouch?a["default"].html.addClass("is-touchable"):a["default"].html.addClass("is-hoverable"),(0,s["default"])("detect initialized")},isMobile:function(){return this._isMobile},isTouch:function(){return this._isTouch},isDevice:function(){return this._isTouch&&this._isMobile},isStandalone:function(){return this._isStandalone}};e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(35),a=n(o),r=function(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];if(a["default"].isDev()&&"console"in window){var n="log";"function"==typeof console[e[0]]&&(n=e[0],e=e.slice(1,e.length)),window.console[n](e)}};e["default"]=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(40),a=n(o),r=new a["default"];e["default"]=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(45),s=n(r),l=i(37),u=n(l),d=null,c=!1,f={},h="instrument-cache",p=window.sessionStorage,v=function(){function t(e){return o(this,t),d||(d=this,this._opts=e,this._init()),d}return a(t,[{key:"_init",value:function(){c||(c=!0,this.flush(),(0,s["default"])("Singleton Store initialized",this))}},{key:"flush",value:function(){f={},this.save()}},{key:"save",value:function(){return this._opts.enableStorage&&t.isStorageSupported?void p.setItem(h,JSON.stringify(f)):void(0,s["default"])("Cache Storage disabled - Not writing to SessionStorage")}},{key:"set",value:function(t,e){t=u["default"].slugify(t),f[t]=e,this.save()}},{key:"get",value:function(t){return t=t&&u["default"].slugify(t),t?this.getValue(f[t]):f}},{key:"getValue",value:function(t){return"string"==typeof t?String(t):t?u["default"].extendObject(Array.isArray(t)?[]:{},t):null}},{key:"remove",value:function(t){delete f[t]}}]),t}();v.crumb=function(){var t=RegExp("(^|; )"+encodeURIComponent("crumb")+"=([^;]*)").exec(document.cookie);return t?t[2]:null}(),v.isStorageSupported=function(){var t=!0;try{p.setItem("instrument-test",1),p.removeItem("instrument-test")}catch(e){t=!1}return t}(),e["default"]=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(43),a=n(o),r=i(46),s=n(r),l={init:function(){a["default"].doc.on("keydown",function(t){s["default"].fire("app--keydown",t,document.activeElement)})},ESC:27,ENTER:13,TAB:9,SPACE:32};e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(47),a=n(o);e["default"]=new a["default"]({enableStorage:!1})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),a=n(o),r=i(45),s=n(r),l=i(37),u=n(l),d=i(4),c=n(d),f=i(34),h=n(f),p=i(51),v=n(p),m=i(43),g=n(m),y=i(52),b=n(y),_=i(49),w=n(_),T=i(46),E=n(T),P=null,k=null,C={init:function(){(0,s["default"])("hooks initialized"),E["default"].on("app--pushed-route",this.onActivateWaypoints.bind(this))},isActive:function(){return this.getElements()>0},onload:function(){this.setWaypoints()},unload:function(){this.teardown()},teardown:function(){P=null,k&&(k.destroy(),k=null)},getElements:function(){return P=g["default"].page.find(".js-hook").not(u["default"].preFree),P.length},setWaypoints:function(){k=new v["default"](P,j,u["default"].noop)},onActivateWaypoints:function(){this.getElements(),this.setWaypoints()}},j=function(t){var e=t.data(),i={format:e.format||"html"},n={dataType:"json"===e.format?"json":"html"},o=w["default"].get("hook--"+e.url),a=M.bind(null,e,t);o?a(o):c["default"].collection(e.url,i,n).then(a)},M=function(t,e,i){if(e.addClass("is-loaded"),"json"===t.format)E["default"].fire("app--hook--"+t.type,i,e);else{var n=(0,a["default"])(i),o=n.find(h["default"].hookNodeSelector),r=o.find(h["default"].lazyImageSelector);"json"!==t.format&&(e.append(o).addClass("is-active"),r.length&&b["default"].handleImages(r)),E["default"].fire("app--hook--"+t.type,o,e),E["default"].fire("app--update-animate")}w["default"].set("hook--"+t.url,i)};e["default"]=C},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(37),s=n(r),l=i(45),u=n(l),d=i(46),c=n(d),f=function(){function t(e,i,n){o(this,t),this.elements=e,this.callback=i,this.executor=n||s["default"].isElementLoadable,this.elements&&this.callback||(0,u["default"])("warn","Waypoints needs `elements` and a `callback` method!"),this._onScroller=this.onScroller.bind(this),this._onScroller(),c["default"].on("app--scroll",this._onScroller)}return a(t,[{key:"onScroller",value:function(){var t=this.elements.not(".is-waypoint"),e=t.length,i=null;for(t.length||this.destroy(),e;e--;)i=t.eq(e),this.executor(i[0])&&(i.addClass("is-waypoint"),this.callback(i))}},{key:"destroy",value:function(){c["default"].off("app--scroll",this._onScroller)}}]),t}();e["default"]=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(43),a=n(o),r=i(37),s=n(r),l=i(45),u=n(l),d=i(34),c=n(d),f=i(46),h=n(f),p=i(53),v=n(p),m={init:function(){(0,u["default"])("images initialized")},isActive:s["default"].noop,onload:function(){this.handleImages()},unload:function(){},handlePreload:function(t){"function"==typeof t&&t(),h["default"].fire("app--preload-done")},handleImages:function(t,e){if(t=t||a["default"].page.find(c["default"].lazyImageSelector),t.length){var i=new v["default"](t);i.on("preload",this.handlePreload.bind(this,e)),i.on("lazyload",function(){h["default"].fire("app--lazyload-done")})}else this.handlePreload(e)}};e["default"]=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(45),u=n(l),d=i(37),c=n(d),f=i(40),h=n(f),p=function(t){function e(t){o(this,e);var i=a(this,Object.getPrototypeOf(e).call(this));return i.$preload=c["default"].getElementsInView(t),i.$lazyload=t.not(i.$preload),i.$preload.length?i.handlePreload():setTimeout(function(){i.fire("preload")},0),i.$lazyload.length&&i.handleLazyload(),i}return r(e,t),s(e,[{key:"handlePreload",value:function(){var t=this;(0,u["default"])("ImageController preload queue:",this.$preload.length),this.preLoader=c["default"].loadImages(this.$preload,c["default"].noop),this.preLoader.on("done",function(){(0,u["default"])("ImageController preloaded:",t.$preload.length),t.fire("preload")})}},{key:"handleLazyload",value:function(){var t=this;(0,u["default"])("ImageController lazyload queue:",this.$lazyload.length),this.lazyLoader=c["default"].loadImages(this.$lazyload,c["default"].isElementLoadable),this.lazyLoader.on("done",function(){(0,u["default"])("ImageController lazyloaded:",t.$lazyload.length),t.fire("lazyload")})}}]),e}(h["default"]);e["default"]=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(45),a=n(o),r=i(37),s=n(r),l=i(46),u=n(l),d=i(55),c=n(d),f=i(57),h=n(f),p=i(58),v=n(p),m=50,g=300,y={init:function(){c["default"].on("resize",(0,h["default"])(_,m)),c["default"].on("resizewidth",(0,v["default"])(b,g)),(0,a["default"])("resizes initialized")}},b=function(){u["default"].fire("app--resize-debounced"),s["default"].updateImages()},_=function(){u["default"].fire("app--resize")};e["default"]=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(56),a=n(o),r=new a["default"];e["default"]=r},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(40),e="orientation"in window,n=null,o=null,a=function(){return o||(o=this,n=o.getViewport(),this.go(function(){var t=o.getViewport(),e=(t.width===n.width&&t.height===n.height,t.width!==n.width||t.height!==n.height),i=t.width>n.width||t.height>n.height,a=t.width<n.width||t.height<n.height,r=t.width!==n.width,s=t.height!==n.height,l=t.orient!==n.orient,u=t.orient!==n.orient&&90!==t.orient,d=t.orient!==n.orient&&90===t.orient;e&&o.fire("resize"),a?o.fire("resizedown"):i&&o.fire("resizeup"),r?o.fire("resizewidth"):s&&o.fire("resizeheight"),l&&o.fire("orientationchange"),u?o.fire("orientationportrait"):d&&o.fire("orientationlandscape"),n=t})),o};return a.prototype=new t,a.prototype.getViewport=function(){return{width:window.innerWidth,height:window.innerHeight,orient:e?Math.abs(window.orientation):null}},a.prototype.isPortrait=function(){var t=this.getViewport().orient;return null!==t&&90!==t},a.prototype.isLandscape=function(){var t=this.getViewport().orient;return null!==t&&90===t},a})},function(t,e,i){!function(e){t.exports=e()}(function(){var t=function(t,e){var i=!1;return function(){i||(t.call(),i=!0,setTimeout(function(){i=!1},e||100))}};return t})},function(t,e,i){!function(e){t.exports=e()}(function(){var t=function(t,e,i){var n=null;return function(){function o(){i||t.apply(r,a),n=null}var a=arguments,r=this;n?clearTimeout(n):i&&t.apply(r,a),n=setTimeout(o,e||100)}};return t})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(43),a=n(o),r=i(45),s=n(r),l=i(44),u=n(l),d=i(46),c=n(d),f=i(60),h=n(f),p=null,v=!1,m=!1,g=300,y={init:function(){h["default"].on("scroll",E),h["default"].on("scrollup",w),h["default"].on("scrolldown",T),E(),this.topout(),(0,s["default"])("scrolls initialized")},topout:function(t){t=t||0,window.scrollTo(0,t)},suppress:function(t){v=t},clearStates:function(){a["default"].html.removeClass("is-scrolling-up is-scrolling-down is-scrolling")},isScrollInRange:function(){var t=h["default"].getScrollY();return t>0||t<h["default"].getScrollMax()},isScrollOutOfRange:function(){var t=h["default"].getScrollY();return 0>=t||t>=h["default"].getScrollMax()}},b=function(t,e){v||c["default"].fire(t,e)},_=function(t){if(!u["default"].isStandalone()){try{clearTimeout(p)}catch(e){(0,s["default"])(e)}m||(m=!0,a["default"].html.addClass("is-scrolling"),b("app--scroll-start",t)),p=setTimeout(function(){t===h["default"].getScrollY()&&(m=!1,a["default"].html.removeClass("is-scrolling"),b("app--scroll-end",t))},g)}},w=function(){if(y.isScrollInRange()&&!u["default"].isStandalone()){var t=h["default"].getScrollY();b("app--scroll-up",t),a["default"].html.removeClass("is-scrolling-down").addClass("is-scrolling-up")}},T=function(){if(y.isScrollInRange()&&!u["default"].isStandalone()){var t=h["default"].getScrollY();b("app--scroll-down",t),a["default"].html.removeClass("is-scrolling-up").addClass("is-scrolling-down")}},E=function(){if(y.isScrollInRange()&&!u["default"].isStandalone()){var t=h["default"].getScrollY();_(t),b("app--scroll",t)}};e["default"]=y},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(61),a=n(o),r=new a["default"];e["default"]=r},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(40),e=null,n=null,o=function(){return n||(n=this,this.go(function(){var t=n.getScrollY(),i=t!==e,o=e>t,a=t>e,r=t!==e&&n.isScrollMax(),s=t!==e&&n.isScrollMin();i&&n.fire("scroll"),a?n.fire("scrolldown"):o&&n.fire("scrollup"),r?n.fire("scrollmax"):s&&n.fire("scrollmin"),e=t})),n};return o.prototype=new t,o.prototype.getScrollY=function(){return window.scrollY||document.documentElement.scrollTop},o.prototype.getScrollMax=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)-window.innerHeight},o.prototype.isScrollMax=function(){return this.getScrollY()>=this.getScrollMax()},o.prototype.isScrollMin=function(){return this.getScrollY()<=0},o})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(45),s=n(r),l=i(35),u=n(l),d=i(4),c=n(d),f=i(42),h=n(f),p=i(46),v=n(p),m=null,g=function(){
function t(){return o(this,t),m||(this.devUA="UA-73407115-1",this.prodUA="UA-39587789-4",this.GAScript="//www.google-analytics.com/analytics.js",this.GAUATag=u["default"].isDev()?this.devUA:this.prodUA,this.initGoogleAnalytics(),v["default"].on("app--analytics-push",this.pushTrack.bind(this)),(0,s["default"])("Analytics initialized"),m=this),m}return a(t,[{key:"initGoogleAnalytics",value:function(){var t=this;m||(window.GoogleAnalyticsObject="ga",window.ga=window.ga||function(){try{window.ga.q=(window.ga.q||[]).push(arguments)}catch(t){(0,s["default"])("warn","GA Error",t)}},window.ga.l=Number(new Date),(0,h["default"])(this.GAScript,function(){(0,s["default"])("Analytics GA loaded"),window.ga("create",t.GAUATag,"auto"),window.ga("send","pageview")}))}},{key:"pushTrack",value:function(t){var e=t.pageData.itemTitle||t.pageData.collectionTitle,i=t.pageData.websiteId,n=t.pageData.itemId?{itemId:t.pageData.itemId}:{collectionId:t.pageData.collectionId};window.ga("send","pageview",window.location.href),c["default"].record(i,n,e).then(function(t){(0,s["default"])("Analytics",t)})["catch"](function(t){(0,s["default"])("warn",t)}),this.setDocumentTitle(e)}},{key:"setDocumentTitle",value:function(t){document.title=t}}]),t}();e["default"]=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(64),a=n(o),r=i(65),s=n(r),l=i(66),u=n(l),d=i(67),c=n(d),f=i(89),h=n(f),p=i(90),v=n(p),m=i(3),g=n(m),y=i(92),b=n(y),_=i(101),w=n(_),T=i(102),E=n(T),P=i(103),k=n(P),C=i(109),j=n(C),M=i(115),$=n(M),O=i(5),S=n(O),A=i(116),I=n(A),x=i(124),D=n(x),N=i(81),R=n(N),z={init:function(t,e){this.app=t,this.state={},this.status=200,this.options=e||{},this.pageDuration=g["default"].util.getTransitionDuration(g["default"].dom.page[0]),this.bindEmptyHashLinks(),this.initPageController(),g["default"].log("router initialized")},initPageController:function(){this.controller=new D["default"](this.options),this.controller.setConfig(["*"]),this.controller.setModules([g["default"].hooks,g["default"].images,s["default"],a["default"],u["default"],c["default"],h["default"],w["default"],E["default"],j["default"],$["default"],I["default"].grid,I["default"].items,k["default"].studio,k["default"].careers,b["default"].code,b["default"].html,b["default"].image,b["default"].embed,b["default"].gallery]),this.controller.on("page-controller-router-samepage",function(){return v["default"].close()}),this.controller.on("page-controller-router-transition-out",this.changePageOut.bind(this)),this.controller.on("page-controller-router-refresh-document",this.changeContent.bind(this)),this.controller.on("page-controller-router-transition-in",this.changePageIn.bind(this)),this.controller.on("page-controller-initialized-page",this.initPage.bind(this)),this.controller.initPage()},initPage:function(t){this.status=t.status,404===this.status?this.handle404():(v["default"].padPage(),g["default"].emitter.fire("app--analytics-push",this.parseDoc(t.response)))},handle404:function(){g["default"].dom.page[0].innerHTML=(0,R["default"])("PageNotFound",{}),a["default"].setElement(g["default"].dom.page.find(".js-cover"))},setState:function(t,e,i){this.state[t]={checked:!1,keep:i,name:t,value:e}},getState:function(t){var e=null,i=null;for(e in this.state)if(this.state.hasOwnProperty(e)&&this.state[e].name===t){i=this.state[e].value;break}return i},checkState:function(){var t=null;for(t in this.state)this.state.hasOwnProperty(t)&&(this.state[t].checked&&!this.state[t].keep?delete this.state[t]:this.state[t].checked=!0)},addModule:function(t){this.controller.addModule(t),"function"==typeof t.init&&t.init()},route:function(t){this.controller.getRouter().trigger(t)},push:function(t,e){this.controller.routeSilently(t,e||g["default"].util.noop),this.checkState()},parseDoc:function(t){var e=document.createElement("html"),i=null;return e.innerHTML=t,e=(0,S["default"])(e),i=e.find(".js-page"),{$doc:e,$page:i,pageData:i.data(),pageHtml:e.find(".js-page")[0].innerHTML}},bindEmptyHashLinks:function(){g["default"].dom.body.on("click","[href^='#']",function(t){return t.preventDefault()})},onPreloadDone:function(){g["default"].util.disableMouseWheel(!1),g["default"].util.disableTouchMove(!1),g["default"].dom.html.removeClass("is-routing"),g["default"].dom.page.removeClass("is-inactive"),g["default"].scrolls.topout(0),g["default"].scrolls.clearStates(),setTimeout(function(){g["default"].emitter.fire("app--intro-art")},this.pageDuration),g["default"].emitter.off("app--preload-done",this.onPreloadDone)},changePageOut:function(){g["default"].util.disableMouseWheel(!0),g["default"].util.disableTouchMove(!0),g["default"].dom.html.addClass("is-routing"),g["default"].dom.page.addClass("is-inactive"),setTimeout(function(){return v["default"].close()},this.pageDuration),g["default"].emitter.on("app--preload-done",this.onPreloadDone),g["default"].emitter.fire("app--outro-art"),window.app.audiobar.isActive()&&window.app.audiobar.destroy()},changeContent:function(t){if(this.status=t.status,404===this.status)this.handle404();else{var e=this.parseDoc(t.response);g["default"].dom.page[0].innerHTML=e.pageHtml,g["default"].emitter.fire("app--analytics-push",e)}this.checkState()},changePageIn:function(t){var e=t.request.uri.split("/")[0];v["default"].toggleActive(e)}};e["default"]=z},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=null,s={init:function(){a["default"].log("cover initialized")},isActive:function(){return this.getElements()>0},onload:function(){a["default"].dom.html.addClass("is-cover"),a["default"].emitter.on("app--scroll",l),l(a["default"].scroller.getScrollY())},unload:function(){this.teardown()},teardown:function(){r=null,a["default"].util.resetBgColorForBroadcast(),a["default"].emitter.off("app--scroll",l),a["default"].dom.html.removeClass("is-cover is-cover--moment")},getElements:function(){return r=a["default"].dom.page.find(".js-cover").eq(0),r.length},setElement:function(t){r=t,a["default"].dom.html.addClass("is-cover"),l()}},l=function(){var t=r.data();!t.ignore&&a["default"].util.isElementVisibleVert(r[0])?a["default"].dom.html.addClass("is-cover--moment"):a["default"].dom.html.removeClass("is-cover--moment")};e["default"]=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=null,s={init:function(){a["default"].log("color initialized")},isActive:function(){return this.getElements()>0},onload:function(){this.handleData(),a["default"].emitter.on("app--scroll",l),l(a["default"].scroller.getScrollY())},unload:function(){this.teardown()},teardown:function(){r=null,a["default"].util.resetBgColorForBroadcast(),a["default"].emitter.off("app--scroll",l),a["default"].dom.html.removeClass("is-color is-color--moment")},handleData:function(){var t=null,e=r.data();a["default"].dom.html.addClass("is-color"),/^#|^rgb/.test(e.bg)&&(t=document.createElement("div"),t.className="is-hidden",t.style.backgroundColor=e.bg,r.append(t),a["default"].dom.html[0].style.backgroundColor=e.bg,a["default"].util.processBgColorForBroadcast(t))},getElements:function(){return r=a["default"].dom.page.find(".js-color"),r.length}},l=function(){a["default"].util.isElementVisibleVert(r[0])?a["default"].dom.html.addClass("is-color--moment"):a["default"].dom.html.removeClass("is-color--moment")};e["default"]=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=null,s={init:function(){a["default"].log("label initialized")},isActive:function(){return this.getElements()>0},onload:function(){r.detach().addClass("is-visible"),a["default"].dom.header.label[0].innerHTML="",a["default"].dom.header.label.append(r[0])},unload:function(){this.teardown()},teardown:function(){r.remove(),r=null},getElements:function(){return r=a["default"].dom.body.find(".js-context-label"),r.length},getElement:function(){return r}};e["default"]=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(68),a=n(o),r=i(3),s=n(r),l=i(72),u=n(l),d=i(73),c=n(d),f=i(80),h=n(f),p=i(84),v=n(p),m=i(88),g=n(m),y=i(86),b=n(y),_=i(81),w=n(_),T=[],E=!1,P={media:null,blocks:null},k=null,C=null,j={init:function(){s["default"].log("media initialized"),s["default"].emitter.on("app--hook--inline-video",x),s["default"].emitter.on("app--pushed-route",this.onActivateWaypoints.bind(this))},isActive:function(){return this.getElements()>0||E},onload:function(){this.setWaypoints()},unload:function(){this.teardown()},teardown:function(){this.killallMedia(),P.media&&P.media.destroy(),P.blocks&&P.blocks.destroy(),P={media:null,blocks:null},k=null,C=null},getElements:function(){return k=s["default"].dom.page.find(".js-media, .js-device-video"),C=s["default"].dom.page.find(".sqs-block-video"),k.length||C.length},setWaypoints:function(){k.length&&(P.media=new s["default"].Waypoints(k,I)),C.length&&(P.blocks=new s["default"].Waypoints(C,D))},onActivateWaypoints:function(){this.killallMedia(),this.getElements(),this.setWaypoints()},killallMedia:function(){$(),E=!1}},M=function(t){T.push(t)},$=function(){var t=T.length,e=null;for(t;t--;)e=T[t],e&&e.destroy&&(e.destroy(),e=null);T=[]},O=function(t){return(t.providerName||t.resolvedBy).toLowerCase()},S=function(t,e){var i=null,n=null;return e.oembed&&e.oembed.html&&(n=O(e.oembed),e.videoApiProvider=n),e.assetSourceUrl?i=new c["default"](t,e):e.cover?i=new g["default"](t,e):e.oembed&&e.oembed.html&&n!==s["default"].config.supportedVideoApiProvider?i=new h["default"](t,e):e.oembed&&e.oembed.html&&n===s["default"].config.supportedVideoApiProvider?i=new v["default"](t,e):e.customContent&&e.customContent.customType===s["default"].config.videoCustomType&&(i=new b["default"](t,e)),i},A=function(t){return t.is(".js-playlist")?new u["default"](t):new a["default"](t)},I=function(t){var e=t.data("json")||t.data(),i=t.is(".js-video")?S(t,e):A(t);t.data("media",i),M(i)},x=function(t){E=!0,I(t.is(".js-video")?t:t.find(".js-video"))},D=function(t){var e=null,i=t.find(".sqs-block-content"),n=t.find("img[data-src]"),o=t.data(s["default"].config.sqsSpecialProps.blockDataKey),a=s["default"].util.getAttrMap(o.html),r=O(o),l={id:t[0].id,oembed:{html:o.html,height:o.height||a.height,width:o.width||a.width,providerName:r},sourceUrl:o.url,assetUrl:o.customThumb?n.data("src"):o.thumbnailUrl,body:o.description.html?(0,w["default"])("VideoCaption",{body:o.description.html}):"",systemDataVariants:""};t.addClass("is-hidden"),i[0].innerHTML="",e=S(i,l),i.data("media",e),M(e),t.removeClass("is-hidden")};e["default"]=j},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=i(69),u=n(l),d=function(){function t(e){o(this,t),this.$node=e,this.$audioIcon=this.$node.find(".js-audio-icon"),this.$audioWave=this.$node.find(".js-audio-wave"),this.data=this.$node.data(),this.bindEvents()}return a(t,[{key:"togglePP",value:function(){u["default"].isPlaying(this.data.id)?this.stop():this.start()}},{key:"stop",value:function(){u["default"].getMedia(this.data.id)&&u["default"].stopMedia(this.data.id)}},{key:"start",value:function(){u["default"].getMedia(this.data.id)&&(window.app.audiobar.initAudio(this),u["default"].playMedia(this.data.id))}},{key:"createMediaNode",value:function(){var t=this;u["default"].addAudio({id:this.data.id,src:this.data.src.split(","),channel:s["default"].config.defaultAudioChannel}),u["default"].addMediaEvent(this.data.id,"play",function(){t.$node.addClass("is-played"),t.$audioIcon.addClass("is-playing"),t.$audioWave.removeClass("is-hidden"),window.app.audiobar&&window.app.audiobar.togglePPOn()}).addMediaEvent(this.data.id,"pause",function(){t.$audioIcon.removeClass("is-playing"),t.$audioWave.addClass("is-hidden"),window.app.audiobar&&window.app.audiobar.togglePPOff()}).addMediaEvent(this.data.id,"ended",function(){s["default"].emitter.fire("app--audio-ended",t.data.id),u["default"].stopMedia(t.data.id).setMediaProp(t.data.id,"currentTime",0)}),this.start()}},{key:"bindEvents",value:function(){var t=this;this.$node.on("click",function(){u["default"].getMedia(t.data.id)?t.togglePP():t.createMediaNode()})}},{key:"destroy",value:function(){this.$node.off("click"),u["default"].getMedia(this.data.id)&&u["default"].destroyMedia(this.data.id)}}]),t}();e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(70),a=n(o),r=new a["default"];e["default"]=r},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(36),e=i(71),n=window.requestAnimationFrame,o=window.cancelAnimationFrame,a=/[#|?].*$/g,r=/^no$/,s=function(t){return"function"==typeof t},l=function(){var t=document.createElement("audio"),e={};try{t.canPlayType&&(e.ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(r,""),e.mp3=t.canPlayType("audio/mpeg;").replace(r,""),e.opus=t.canPlayType('audio/ogg; codecs="opus"').replace(r,""),e.wav=t.canPlayType('audio/wav; codecs="1"').replace(r,""),e.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(r,""))}catch(i){}return e},u=function(){var t=document.createElement("video"),e={};try{t.canPlayType&&(e.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(r,""),e.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(r,""),e.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(r,""),e.vp9=t.canPlayType('video/webm; codecs="vp9"').replace(r,""),e.hls=t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(r,""))}catch(i){}return e},d=function(t,e){var i,n=e.split(".").pop().toLowerCase().replace(a,"");if("video"===t)switch(n){case"webm":i="video/webm";break;case"mp4":case"m4v":i="video/mp4";break;case"ogv":i="video/ogg"}else switch(n){case"aac":i="audio/aac";break;case"m4a":i="audio/x-m4a";break;case"mp4":i="audio/mp4";break;case"mp1":case"mp2":case"mp3":case"mpg":case"mpeg":i="audio/mpeg";break;case"oga":case"ogg":i="audio/ogg";break;case"wav":i="audio/wav"}return i},c=function(t,e){for(var i,n,o=0,r=e.length;r>o;o++){var s=e[o].split(".").pop().toLowerCase().replace(a,"");if(/soundcloud/.test(e[o])){i=e[o],n="probably";break}if("webm"===s&&"probably"===T.support[t][s]){i=e[o],n=T.support[t][s];break}"probably"!==T.support[t][s]&&"maybe"!==T.support[t][s]||(i=e[o],n=T.support[t][s]),"ogv"!==s&&"oga"!==s||"probably"!==T.support[t].ogg&&"maybe"!==T.support[t].ogg||(i=e[o],n=T.support[t].ogg),"mp4"!==s&&"m4v"!==s||"probably"!==T.support[t].h264&&"maybe"!==T.support[t].h264||(i=e[o],n=T.support[t].h264),"aac"!==s||"probably"!==T.support[t].m4a&&"maybe"!==T.support[t].m4a||(i=e[o],n=T.support[t].m4a),"mp1"!==s&&"mp2"!==s&&"mpg"!==s&&"mpeg"!==s||"probably"!==T.support[t].mp3&&"maybe"!==T.support[t].mp3||(i=e[o],n=T.support[t].mp3)}return{source:i,canPlay:n}},f=function(t){t._updateId&&(o(t._updateId),t._updateId=null,t._updateFn=null)},h=function(){var t;return window.AudioContext?t=window.AudioContext:window.webkitAudioContext&&(t=window.webkitAudioContext),t?new t:t},p=function(t,e,i){var n=new XMLHttpRequest;if(n.open("GET",t,!0),e)for(var o in e)n[o]=e[o];return n.onreadystatechange=function(t){if(4===this.readyState&&200===this.status)try{e.responseType||(this.responseJSON=JSON.parse(this.responseText)),s(i)&&i(this)}catch(n){throw new Error([n.name,n.message].join(" : "))}},n.send(),n},v=function(){_=this},m=1,g={bgm:{volume:m,_builtIn:!0},sfx:{volume:m,_builtIn:!0},vid:{volume:m,_builtIn:!0}},y={},b={},_=null,w=h(),T=function(){return _||v.apply(this,arguments)};return T.types={AUDIO:"audio",VIDEO:"video"},T.support={audio:l(),video:u()},T.STATE_STOPPED=0,T.STATE_STOPPING=1,T.STATE_PAUSED=2,T.STATE_PLAYING=3,T.prototype={constructor:T,isLoaded:function(t){var e=this.getMedia(t);return e.loaded===!0},isStopped:function(t){var e=this.getMedia(t);return e.state===T.STATE_STOPPED},isPaused:function(t){var e=this.getMedia(t);return e.state===T.STATE_PAUSED},isPlaying:function(t){var e=this.getMedia(t);return e.state===T.STATE_PLAYING||e.state===T.STATE_STOPPING},setVolume:function(t,e){var i=this.getMedia(t);return i._node.volume=e,_},getVolume:function(t){var e=this.getMedia(t);return e._node.volume},getMediaProp:function(t,e){var i=this.getMedia(t);return i?i._node[e]:void 0},setMediaProp:function(t,e,i){var n=this.getMedia(t);return n&&(n._node[e]=i),_},getMediaAttr:function(t,e){var i=this.getMedia(t);return i?i._node.getAttribute(e):void 0},setMediaAttr:function(t,e,i){var n=this.getMedia(t);return n&&n._node.setAttribute(e,i),_},addMediaEvent:function(t,e,i){var n=this.getMedia(t);if(n){if("timeupdate"===e)return n._events.timeupdate=i,_;n._events[e]=function(){s(i)&&i.apply(this,arguments)},n._node.addEventListener(e,n._events[e],!1)}return _},removeMediaEvent:function(t,e){var i=this.getMedia(t);return i&&("timeupdate"===e&&f(i),i._node.removeEventListener(e,i._events[e],!1),i._events[e]=null),_},playMedia:function(t){var e=this.getMedia(t);return e&&this.isLoaded(t)&&(this.isStopped(t)||this.isPaused(t))&&(e._node.volume=g[e.channel].volume,e._node.play(),e.state=T.STATE_PLAYING,!e._updateId&&s(e._events.timeupdate)&&(e._updateFn=function(){e._events.timeupdate.call(e._node,null),e._updateId=n(e._updateFn)},e._updateId=n(e._updateFn))),_},pauseMedia:function(t){var e=this.getMedia(t);return e&&this.isLoaded(t)&&this.isPlaying(t)&&(e._node.pause(),e.state=T.STATE_PAUSED,f(e)),_},stopMedia:function(t){var e=this.getMedia(t);return e&&this.isLoaded(t)&&this.isPlaying(t)&&(e._node.pause(),e.state=T.STATE_STOPPED,f(e)),_},getMedia:function(t){return b[t]?b[t]:y[t]},getAudios:function(){return y},getVideos:function(){return b},destroyMedia:function(t){var e=this.getMedia(t);return this.stopMedia(t),e.type===T.types.AUDIO?delete y[t]:delete b[t],_},loadMedia:function(t,e){var i=this;return p(t,null,function(t){i.addMedia(t.responseJSON),s(e)&&e()}),_},addMedia:function(t){for(var e in t)for(var i=t[e].length;i--;)s(this[e])&&this[e](t[e][i]);return _},addVideo:function(t){var e=t.id,i=t.src,n={element:t.element,channel:t.channel};return!b[e]&&e&&i?(g[n.channel]||(g[n.channel]={volume:m}),b[e]={},b[e].type=T.types.VIDEO,b[e].state=T.STATE_STOPPED,b[e].loaded=!0,b[e].channel=n.channel,b[e].sources=i,b[e]._source=c(T.types.VIDEO,i),b[e]._events={},b[e]._updateId=null,b[e]._updateFn=null,b[e]._node=n.element||document.createElement("video"),b[e]._nodeSource=document.createElement("source"),b[e]._nodeSource.src=b[e]._source.source,b[e]._nodeSource.type=d(T.types.VIDEO,b[e]._source.source),b[e]._node.appendChild(b[e]._nodeSource),_):_},addAudio:function(t){var e=t.id,i=t.src,n={channel:t.channel};return!y[e]&&e&&i?(g[n.channel]||(g[n.channel]={volume:m}),y[e]={},y[e].type=T.types.AUDIO,y[e].state=T.STATE_STOPPED,y[e].loaded=!0,y[e].channel=n.channel,y[e].sources=i,y[e]._source=c(T.types.AUDIO,i),y[e]._events={},y[e]._updateId=null,y[e]._updateFn=null,y[e]._node=new Audio(y[e]._source.source),s(t.onBuffer)&&p(y[e]._source.source,{responseType:"arraybuffer"},function(e){w.decodeAudioData(e.response,t.onBuffer)}),_):_},fadeMediaIn:function(i,n,o){var a,r=this.getMedia(i),l=this;return r&&r.state===T.STATE_PLAYING?_:(r&&(a=g[r.channel].volume,r.state===T.STATE_STOPPED?(this.playMedia(i),this.setVolume(i,0)):r.state===T.STATE_STOPPING&&(r.state=T.STATE_PLAYING),new e({to:a,from:0,ease:s(o)?o:t.linear,duration:n||1e3,update:function(t){l.setVolume(i,t>a?a:t)},complete:function(){l.setVolume(i,a)}})),_)},fadeMediaOut:function(i,n,o){var a=this.getMedia(i);if(a&&a.state===T.STATE_STOPPING)return _;var r=this,l=function(t){a.state===T.STATE_STOPPING&&(r.setVolume(i,0>t?0:t),0===r.getVolume(i)&&r.stopMedia(i))};return a&&(a.state=T.STATE_STOPPING,new e({to:0,from:r.getVolume(i),ease:s(o)?o:t.linear,duration:n||1e3,update:l,complete:l})),_},stopChannel:function(t){var e;for(e in b)b[e].channel===t&&b[e].state===T.STATE_PLAYING&&this.pauseMedia(e);for(e in y)y[e].channel===t&&y[e].state===T.STATE_PLAYING&&this.pauseMedia(e);return _},playChannel:function(t){var e;for(e in b)b[e].channel===t&&b[e].state===T.STATE_PAUSED&&this.playMedia(e);for(e in y)y[e].channel===t&&y[e].state===T.STATE_PAUSED&&this.playMedia(e);return _},fadeChannelOut:function(t,e){var i;for(i in b)b[i].channel===t&&b[i].state===T.STATE_PLAYING&&this.fadeMediaOut(i,e);for(i in y)y[i].channel===t&&y[i].state===T.STATE_PLAYING&&this.fadeMediaOut(i,e);return _},fadeChannelIn:function(t,e){var i;for(i in b)b[i].channel===t&&b[i].state===T.STATE_STOPPED&&this.fadeMediaIn(i,e);for(i in y)y[i].channel===t&&y[i].state===T.STATE_STOPPED&&this.fadeMediaIn(i,e);return _},crossFadeChannel:function(t,e,i){var n;for(n in b)b[n].channel===t&&b[n].state===T.STATE_PLAYING&&this.fadeMediaOut(n,i);for(n in y)y[n].channel===t&&y[n].state===T.STATE_PLAYING&&this.fadeMediaOut(n,i);return this.fadeMediaIn(e,i)},setChannelProp:function(t,e,i){return g[t]&&(g[t][e]=i),_},getChannelProp:function(t,e){return g[t]?g[t][e]:void 0},getChannels:function(){return g}},T})},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(36),e={ease:t.linear,duration:600,from:0,to:0,delay:0,update:function(){},complete:function(){}},n=function(t){function i(e){if(!s){null===a&&(a=e);var n=e-a,l=o*t.ease(n/t.duration)+t.from;return"function"==typeof t.update&&t.update(l),n>t.duration?("function"==typeof t.complete&&t.complete(t.to),cancelAnimationFrame(r),r=null,!1):void(r=requestAnimationFrame(i))}}t=t||{};for(var n in e)void 0===t[n]&&(t[n]=e[n]);var o=t.to-t.from,a=null,r=null,s=!1;setTimeout(function(){r=requestAnimationFrame(i)},t.delay),this.stop=function(){s=!0,cancelAnimationFrame(r),r=null}};return n})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(5),s=n(r),l=i(3),u=n(l),d=i(68),c=n(d),f=function(){function t(e){var i=this;o(this,t),this.$node=e,this.$tracks=this.$node.find(".js-playlist-track"),this._listIds=[],this._audios=[],this.$tracks.forEach(function(t){var e=new c["default"]((0,s["default"])(t));i._audios.push(e),i._listIds.push(e.data.id)}),this.bindEvents()}return a(t,[{key:"setCurrentTrack",value:function(t){this.$tracks.removeClass("is-active"),this.$tracks.eq(t).addClass("is-active")}},{key:"onAudioEnded",value:function(t){var e=this.$tracks.filter(".is-active").index();-1!==this._listIds.indexOf(t)&&(e===this._audios.length-1?e=0:e+=1,this.setCurrentTrack(e),this.$tracks.eq(e).trigger("click"))}},{key:"bindEvents",value:function(){var t=this;this.$node.on("click",".js-playlist-track",function(e){t.setCurrentTrack((0,s["default"])(e.currentTarget).index())}),this._onAudioEnded=this.onAudioEnded.bind(this),u["default"].emitter.on("app--audio-ended",this._onAudioEnded)}},{key:"destroy",value:function(){u["default"].emitter.off("app--audio-ended",this._onAudioEnded),this._audios.forEach(function(t){t instanceof c["default"]&&t.destroy()})}}]),t}();e["default"]=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,i)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},u=i(74),d=n(u),c=i(79),f=n(c),h=function(t){function e(t,i){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,i));return n.data.assetSourceUrl=n.getSourceUrl(n.data.assetSourceUrl),n.initVideo(),n}return r(e,t),s(e,[{key:"initVideo",value:function(){var t=this;this.$videoItem=this.$node.addClass("is-played"),this.$videoNode=this.$videoItem.find(".js-video-el"),this.$videoAspect=this.$videoItem.find(".js-video-aspect"),this.waitForLoadedMetaData(function(){t.applyAspect(),t.autoplayHandler=new f["default"](t.$node,t.data.id),"function"==typeof t.data.onLoaded&&t.data.onLoaded()}),this.createMediaNode(this.data.id,this.data.assetSourceUrl,this.$videoNode[0])}},{key:"destroy",value:function(){l(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.autoplayHandler&&this.autoplayHandler.destroy()}}]),e}(d["default"]);e["default"]=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=i(75),u=n(l),d=i(69),c=n(d),f=".mp4",h=/(\.webm)$/,p=/assets\.instrument/,v=function(){function t(e,i){o(this,t),this.$node=e,this.data=i}return a(t,[{key:"getSourceUrl",value:function(t){return p.test(t)?(h.test(t)&&(t+=","+t.replace(h,f)),t):t}},{key:"applyAspect",value:function(){s["default"].detect.isDevice()||(this.$videoAspect[0].style.paddingBottom=this.$videoNode[0].videoHeight/this.$videoNode[0].videoWidth*100+"%")}},{key:"waitForLoadedMetaData",value:function(t){this._onLoadedMetaData=function(){"function"==typeof t&&t()},this.$videoNode.on("loadedmetadata",this._onLoadedMetaData)}},{key:"createMediaNode",value:function(t,e,i){c["default"].addVideo({id:t,src:e.split(","),element:i,channel:s["default"].config.defaultVideoChannel})}},{key:"createScrubber",value:function(){this._scrubber=new u["default"]("video",this.data,{$module:this.$videoItem,$progress:this.$videoItem.find(".js-media-progress"),$scrubber:this.$videoScrub,$time:this.$videoItem.find(".js-media-time"),$duration:this.$videoItem.find(".js-media-duration")})}},{key:"bindEventHandlers",value:function(){var t=this,e=null;this.$videoItem.on("mouseenter",".js-video-el, .js-video-controls",function(){try{clearTimeout(e)}catch(i){s["default"].log("warn","VideoBase clearTimeout Error",i)}c["default"].getMedia(t.data.id)&&t.$videoItem.is(".is-played")&&t.$videoItem.addClass("is-hovered")}).on("mouseleave",".js-video-el, .js-video-controls, .js-media-scrubber, .js-media-progress",function(i){t.$videoWrap&&t.$videoWrap.length&&(t.$videoWrap[0].contains(i.relatedTarget)||(e=setTimeout(function(){t.$videoItem.removeClass("is-hovered")},1e3)))})}},{key:"destroy",value:function(){this._scrubber&&this._scrubber.destroy(),this._onLoadedMetaData&&this.$videoNode.off("loadedmetadata",this._onLoadedMetaData),c["default"].getMedia(this.data.id)&&c["default"].destroyMedia(this.data.id)}}]),t}();e["default"]=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=i(69),u=n(l),d=i(71),c=n(d),f=i(36),h=n(f),p=i(76),v=n(p),m=function(){function t(e,i,n){o(this,t),this.ui=n,this.type=e,this.data=i,this._onScrubPanStart=this.onScrubPanStart.bind(this),this._onScrubPanEnd=this.onScrubPanEnd.bind(this),this._onScrubPanLeft=this.onScrubPan.bind(this),this._onScrubPanRight=this.onScrubPan.bind(this),this._onScrubTap=this.onScrubTap.bind(this),this.hammered=new v["default"](this.ui.$module[0],s["default"].util.getDefaultHammerOptions()),this.hammered.on("panstart",".js-media-scrubber",this._onScrubPanStart),this.hammered.on("panend",".js-media-scrubber",this._onScrubPanEnd),this.hammered.on("panleft",".js-media-scrubber",this._onScrubPanLeft),this.hammered.on("panright",".js-media-scrubber",this._onScrubPanRight),this.hammered.on("tap",".js-media-scrubber",this._onScrubTap),this.bindMediaEvents(this.data)}return a(t,[{key:"updateCurrentTime",value:function(t){this.ui.$time[0].innerText=s["default"].util.parseTime(t),"audio"!==this.type&&this.updateTimePosition()}},{key:"updateTimePosition",value:function(){var t=this.ui.$progress[0].clientWidth-this.ui.$time[0].clientWidth/2,e=this.ui.$scrubber[0].clientWidth-30-(this.ui.$duration[0].clientWidth+this.ui.$time[0].clientWidth+20);this.ui.$time[0].style.left=s["default"].util.px(Math.min(t,e)),t>=e?this.ui.$duration.addClass("is-static"):this.ui.$duration.removeClass("is-static")}},{key:"onLoadedMetaData",value:function(){var t=u["default"].getMediaProp(this.data.id,"duration");this.ui.$duration[0].innerText=s["default"].util.parseTime(t)}},{key:"onTimeUpdate",value:function(){var t=u["default"].getMediaProp(this.data.id,"duration"),e=u["default"].getMediaProp(this.data.id,"currentTime"),i=e/t*100+"%";this.ui.$progress[0].style.width=i,this.updateCurrentTime(e)}},{key:"onScrubPan",value:function(t){var e=t.srcEvent.clientX-this.ui.$progress[0].getBoundingClientRect().left,i=e/this.ui.$scrubber[0].clientWidth,n=i*u["default"].getMediaProp(this.data.id,"duration");u["default"].stopMedia(this.data.id),this.ui.$progress[0].style.width=s["default"].util.px(e),this.updateCurrentTime(n)}},{key:"onScrubPanEnd",value:function(t){var e=this,i=t.srcEvent.clientX-this.ui.$progress[0].getBoundingClientRect().left,n=i/this.ui.$scrubber[0].clientWidth,o=n*u["default"].getMediaProp(this.data.id,"duration");this.ui.$scrubber.removeClass("is-scrubbing"),u["default"].setMediaProp(this.data.id,"currentTime",o),setTimeout(function(){u["default"].playMedia(e.data.id)},s["default"].config.defaultDuration)}},{key:"onScrubPanStart",value:function(){this.ui.$scrubber.addClass("is-scrubbing")}},{key:"onScrubTap",value:function(t){var e=this,i=t.srcEvent.clientX-this.ui.$progress[0].getBoundingClientRect().left,n=null,o=null;return u["default"].stopMedia(this.data.id),(0,c["default"])({to:i,from:this.ui.$progress[0].clientWidth,ease:h["default"].easeOutCubic,update:function(t){n=t/e.ui.$scrubber[0].clientWidth,o=n*u["default"].getMediaProp(e.data.id,"duration"),e.ui.$progress[0].style.width=s["default"].util.px(t),e.updateCurrentTime(o)},complete:function(t){n=t/e.ui.$scrubber[0].clientWidth,o=n*u["default"].getMediaProp(e.data.id,"duration"),u["default"].setMediaProp(e.data.id,"currentTime",o).playMedia(e.data.id),
e.updateCurrentTime(o)},duration:600})}},{key:"bindMediaEvents",value:function(t){this._onLoadedMetaData=this.onLoadedMetaData.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),u["default"].addMediaEvent(t.id,"loadedmetadata",this._onLoadedMetaData).addMediaEvent(t.id,"timeupdate",this._onTimeUpdate)}},{key:"unbindMediaEvents",value:function(t){u["default"].removeMediaEvent(t.id,"loadedmetadata").removeMediaEvent(t.id,"timeupdate")}},{key:"destroy",value:function(){this.hammered.off("panstart",this._onScrubPanStart),this.hammered.off("panend",this._onScrubPanEnd),this.hammered.off("panleft",this._onScrubPanLeft),this.hammered.off("panright",this._onScrubPanRight),this.hammered.off("tap",this._onScrubTap)}},{key:"resetUI",value:function(t){this.ui.$progress[0].style.width=s["default"].util.px(0),this.ui.$time[0].innerText="0:00",this.ui.$duration.removeClass("is-static"),t&&(this.ui.$duration[0].innerText=s["default"].util.parseTime(t))}}],[{key:"stopChannels",value:function(){u["default"].fadeChannelOut(s["default"].config.defaultAudioChannel),u["default"].fadeChannelOut(s["default"].config.defaultVideoChannel),u["default"].fadeChannelOut(s["default"].config.autoplayVideoChannel)}}]),t}();e["default"]=m},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(77),e=i(78),n=function(){return this.init.apply(this,arguments)};return n.prototype={constructor:n,init:function(t,i){this._version="0.2.0",this._handlers={},this._hammer=new e(t||document.body,i)},getInstance:function(){return this._hammer},getHandlers:function(){return this._handlers},on:function(e,i,n){var o="Hammered"+(this._version+Math.random()+(e+"-"+i)).replace(/\W/g,""),a=function(e){var o=t(e.target,i);o&&n.call(o,e)};a._hammerUID=o,n._hammerUID=o,this._hammer.on(e,a),this._handlers[o]=a},off:function(t,e){var i;for(i in this._handlers)if(i===e._hammerUID&&this._handlers[i]._hammerUID===e._hammerUID){this._hammer.off(t,this._handlers[i]),delete this._handlers[i];break}}},n})},function(t,e,i){!function(e){t.exports=e()}(function(){var t=function(e,i){var n=e.matches?"matches":e.webkitMatchesSelector?"webkitMatchesSelector":e.mozMatchesSelector?"mozMatchesSelector":e.msMatchesSelector?"msMatchesSelector":e.oMatchesSelector?"oMatchesSelector":null;return n&&e[n].call(e,i)?e:e!==document.documentElement&&e.parentNode?t(e.parentNode,i):null};return t})},function(t,e,i){var n;!function(o,a,r,s){"use strict";function l(t,e,i){return setTimeout(h(t,i),e)}function u(t,e,i){return Array.isArray(t)?(d(t,i[e],i),!0):!1}function d(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==s)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function c(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=o.console&&(o.console.warn||o.console.log);return a&&a.call(o.console,n,i),t.apply(this,arguments)}}function f(t,e,i){var n,o=e.prototype;n=t.prototype=Object.create(o),n.constructor=t,n._super=o,i&&vt(n,i)}function h(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==yt?t.apply(e?e[0]||s:s,e):t}function v(t,e){return t===s?e:t}function m(t,e,i){d(_(e),function(e){t.addEventListener(e,i,!1)})}function g(t,e,i){d(_(e),function(e){t.removeEventListener(e,i,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function b(t,e){return t.indexOf(e)>-1}function _(t){return t.trim().split(/\s+/g)}function w(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function T(t){return Array.prototype.slice.call(t,0)}function E(t,e,i){for(var n=[],o=[],a=0;a<t.length;){var r=e?t[a][e]:t[a];w(o,r)<0&&n.push(t[a]),o[a]=r,a++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function P(t,e){for(var i,n,o=e[0].toUpperCase()+e.slice(1),a=0;a<mt.length;){if(i=mt[a],n=i?i+o:e,n in t)return n;a++}return s}function k(){return Pt++}function C(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}function j(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&i.handler(e)},this.init()}function M(t){var e,i=t.options.inputClass;return new(e=i?i:jt?U:Mt?q:Ct?Y:W)(t,$)}function $(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,a=e&xt&&n-o===0,r=e&(Nt|Rt)&&n-o===0;i.isFirst=!!a,i.isFinal=!!r,a&&(t.session={}),i.eventType=e,O(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function O(t,e){var i=t.session,n=e.pointers,o=n.length;i.firstInput||(i.firstInput=I(e)),o>1&&!i.firstMultiple?i.firstMultiple=I(e):1===o&&(i.firstMultiple=!1);var a=i.firstInput,r=i.firstMultiple,s=r?r.center:a.center,l=e.center=x(n);e.timeStamp=wt(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=z(s,l),e.distance=R(s,l),S(i,e),e.offsetDirection=N(e.deltaX,e.deltaY);var u=D(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=_t(u.x)>_t(u.y)?u.x:u.y,e.scale=r?L(r.pointers,n):1,e.rotation=r?H(r.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,A(i,e);var d=t.element;y(e.srcEvent.target,d)&&(d=e.srcEvent.target),e.target=d}function S(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},a=t.prevInput||{};e.eventType!==xt&&a.eventType!==Nt||(o=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}function A(t,e){var i,n,o,a,r=t.lastInterval||e,l=e.timeStamp-r.timeStamp;if(e.eventType!=Rt&&(l>It||r.velocity===s)){var u=e.deltaX-r.deltaX,d=e.deltaY-r.deltaY,c=D(l,u,d);n=c.x,o=c.y,i=_t(c.x)>_t(c.y)?c.x:c.y,a=N(u,d),t.lastInterval=e}else i=r.velocity,n=r.velocityX,o=r.velocityY,a=r.direction;e.velocity=i,e.velocityX=n,e.velocityY=o,e.direction=a}function I(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:bt(t.pointers[i].clientX),clientY:bt(t.pointers[i].clientY)},i++;return{timeStamp:wt(),pointers:e,center:x(e),deltaX:t.deltaX,deltaY:t.deltaY}}function x(t){var e=t.length;if(1===e)return{x:bt(t[0].clientX),y:bt(t[0].clientY)};for(var i=0,n=0,o=0;e>o;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:bt(i/e),y:bt(n/e)}}function D(t,e,i){return{x:e/t||0,y:i/t||0}}function N(t,e){return t===e?zt:_t(t)>=_t(e)?0>t?Ht:Lt:0>e?Wt:Ut}function R(t,e,i){i||(i=Bt);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function z(t,e,i){i||(i=Bt);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}function H(t,e){return z(e[1],e[0],Yt)+z(t[1],t[0],Yt)}function L(t,e){return R(e[0],e[1],Yt)/R(t[0],t[1],Yt)}function W(){this.evEl=Xt,this.evWin=Jt,this.pressed=!1,j.apply(this,arguments)}function U(){this.evEl=Zt,this.evWin=te,j.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=ie,this.evWin=ne,this.started=!1,j.apply(this,arguments)}function F(t,e){var i=T(t.touches),n=T(t.changedTouches);return e&(Nt|Rt)&&(i=E(i.concat(n),"identifier",!0)),[i,n]}function q(){this.evTarget=ae,this.targetIds={},j.apply(this,arguments)}function B(t,e){var i=T(t.touches),n=this.targetIds;if(e&(xt|Dt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,a,r=T(t.changedTouches),s=[],l=this.target;if(a=i.filter(function(t){return y(t.target,l)}),e===xt)for(o=0;o<a.length;)n[a[o].identifier]=!0,o++;for(o=0;o<r.length;)n[r[o].identifier]&&s.push(r[o]),e&(Nt|Rt)&&delete n[r[o].identifier],o++;return s.length?[E(a.concat(s),"identifier",!0),s]:void 0}function Y(){j.apply(this,arguments);var t=h(this.handler,this);this.touch=new q(this.manager,t),this.mouse=new W(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function G(t,e){t&xt?(this.primaryTouch=e.changedPointers[0].identifier,X.call(this,e)):t&(Nt|Rt)&&X.call(this,e)}function X(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,o=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(o,re)}}function J(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],a=Math.abs(e-o.x),r=Math.abs(i-o.y);if(se>=a&&se>=r)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function Q(t){if(b(t,he))return he;var e=b(t,pe),i=b(t,ve);return e&&i?he:e||i?e?pe:ve:b(t,fe)?fe:ce}function Z(){if(!ue)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=e?o.CSS.supports("touch-action",i):!0}),t}function tt(t){this.options=vt({},this.defaults,t||{}),this.id=k(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=ge,this.simultaneous={},this.requireFail=[]}function et(t){return t&Te?"cancel":t&_e?"end":t&be?"move":t&ye?"start":""}function it(t){return t==Ut?"down":t==Wt?"up":t==Ht?"left":t==Lt?"right":""}function nt(t,e){var i=e.manager;return i?i.get(t):t}function ot(){tt.apply(this,arguments)}function at(){ot.apply(this,arguments),this.pX=null,this.pY=null}function rt(){ot.apply(this,arguments)}function st(){tt.apply(this,arguments),this._timer=null,this._input=null}function lt(){ot.apply(this,arguments)}function ut(){ot.apply(this,arguments)}function dt(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ct(t,e){return e=e||{},e.recognizers=v(e.recognizers,ct.defaults.preset),new ft(t,e)}function ft(t,e){this.options=vt({},ct.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=M(this),this.touchAction=new K(this,this.options.touchAction),ht(this,!0),d(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ht(t,e){var i=t.element;if(i.style){var n;d(t.options.cssProps,function(o,a){n=P(i.style,a),e?(t.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function pt(t,e){var i=a.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var vt,mt=["","webkit","Moz","MS","ms","o"],gt=a.createElement("div"),yt="function",bt=Math.round,_t=Math.abs,wt=Date.now;vt="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==s&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign;var Tt=c(function(t,e,i){for(var n=Object.keys(e),o=0;o<n.length;)(!i||i&&t[n[o]]===s)&&(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),Et=c(function(t,e){return Tt(t,e,!0)},"merge","Use `assign`."),Pt=1,kt=/mobile|tablet|ip(ad|hone|od)|android/i,Ct="ontouchstart"in o,jt=P(o,"PointerEvent")!==s,Mt=Ct&&kt.test(navigator.userAgent),$t="touch",Ot="pen",St="mouse",At="kinect",It=25,xt=1,Dt=2,Nt=4,Rt=8,zt=1,Ht=2,Lt=4,Wt=8,Ut=16,Vt=Ht|Lt,Ft=Wt|Ut,qt=Vt|Ft,Bt=["x","y"],Yt=["clientX","clientY"];j.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)}};var Gt={mousedown:xt,mousemove:Dt,mouseup:Nt},Xt="mousedown",Jt="mousemove mouseup";f(W,j,{handler:function(t){var e=Gt[t.type];e&xt&&0===t.button&&(this.pressed=!0),e&Dt&&1!==t.which&&(e=Nt),this.pressed&&(e&Nt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:St,srcEvent:t}))}});var Kt={pointerdown:xt,pointermove:Dt,pointerup:Nt,pointercancel:Rt,pointerout:Rt},Qt={2:$t,3:Ot,4:St,5:At},Zt="pointerdown",te="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Zt="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),f(U,j,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=Kt[n],a=Qt[t.pointerType]||t.pointerType,r=a==$t,s=w(e,t.pointerId,"pointerId");o&xt&&(0===t.button||r)?0>s&&(e.push(t),s=e.length-1):o&(Nt|Rt)&&(i=!0),0>s||(e[s]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),i&&e.splice(s,1))}});var ee={touchstart:xt,touchmove:Dt,touchend:Nt,touchcancel:Rt},ie="touchstart",ne="touchstart touchmove touchend touchcancel";f(V,j,{handler:function(t){var e=ee[t.type];if(e===xt&&(this.started=!0),this.started){var i=F.call(this,t,e);e&(Nt|Rt)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:$t,srcEvent:t})}}});var oe={touchstart:xt,touchmove:Dt,touchend:Nt,touchcancel:Rt},ae="touchstart touchmove touchend touchcancel";f(q,j,{handler:function(t){var e=oe[t.type],i=B.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:$t,srcEvent:t})}});var re=2500,se=25;f(Y,j,{handler:function(t,e,i){var n=i.pointerType==$t,o=i.pointerType==St;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)G.call(this,e,i);else if(o&&J.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var le=P(gt.style,"touchAction"),ue=le!==s,de="compute",ce="auto",fe="manipulation",he="none",pe="pan-x",ve="pan-y",me=Z();K.prototype={set:function(t){t==de&&(t=this.compute()),ue&&this.manager.element.style&&me[t]&&(this.manager.element.style[le]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return d(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,o=b(n,he)&&!me[he],a=b(n,ve)&&!me[ve],r=b(n,pe)&&!me[pe];if(o){var s=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(s&&l&&u)return}return r&&a?void 0:o||a&&i&Vt||r&&i&Ft?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ge=1,ye=2,be=4,_e=8,we=_e,Te=16,Ee=32;tt.prototype={defaults:{},set:function(t){return vt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(u(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return u(t,"dropRecognizeWith",this)?this:(t=nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(u(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),-1===w(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(u(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=w(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;_e>n&&e(i.options.event+et(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=_e&&e(i.options.event+et(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=Ee)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ee|ge)))return!1;t++}return!0},recognize:function(t){var e=vt({},t);return p(this.options.enable,[this,e])?(this.state&(we|Te|Ee)&&(this.state=ge),this.state=this.process(e),void(this.state&(ye|be|_e|Te)&&this.tryEmit(e))):(this.reset(),void(this.state=Ee))},process:function(t){},getTouchAction:function(){},reset:function(){}},f(ot,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(ye|be),o=this.attrTest(t);return n&&(i&Rt||!o)?e|Te:n||o?i&Nt?e|_e:e&ye?e|be:ye:Ee}}),f(at,ot,{defaults:{event:"pan",threshold:10,pointers:1,direction:qt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Vt&&e.push(ve),t&Ft&&e.push(pe),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,a=t.deltaX,r=t.deltaY;return o&e.direction||(e.direction&Vt?(o=0===a?zt:0>a?Ht:Lt,i=a!=this.pX,n=Math.abs(t.deltaX)):(o=0===r?zt:0>r?Wt:Ut,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return ot.prototype.attrTest.call(this,t)&&(this.state&ye||!(this.state&ye)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=it(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),f(rt,ot,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ye)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),f(st,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ce]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Nt|Rt)&&!o)this.reset();else if(t.eventType&xt)this.reset(),this._timer=l(function(){this.state=we,this.tryEmit()},e.time,this);else if(t.eventType&Nt)return we;return Ee},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===we&&(t&&t.eventType&Nt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=wt(),this.manager.emit(this.options.event,this._input)))}}),f(lt,ot,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ye)}}),f(ut,ot,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Vt|Ft,pointers:1},getTouchAction:function(){return at.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Vt|Ft)?e=t.overallVelocity:i&Vt?e=t.overallVelocityX:i&Ft&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&Nt},emit:function(t){var e=it(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),f(dt,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[fe]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&xt&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=Nt)return this.failTimeout();var a=this.pTime?t.timeStamp-this.pTime<e.interval:!0,r=!this.pCenter||R(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,r&&a?this.count+=1:this.count=1,this._input=t;var s=this.count%e.taps;if(0===s)return this.hasRequireFailures()?(this._timer=l(function(){this.state=we,this.tryEmit()},e.interval,this),ye):we}return Ee},failTimeout:function(){return this._timer=l(function(){this.state=Ee},this.options.interval,this),Ee},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==we&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ct.VERSION="2.0.7",ct.defaults={domEvents:!1,touchAction:de,enable:!0,inputTarget:null,inputClass:null,preset:[[lt,{enable:!1}],[rt,{enable:!1},["rotate"]],[ut,{direction:Vt}],[at,{direction:Vt},["swipe"]],[dt],[dt,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Pe=1,ke=2;ft.prototype={set:function(t){return vt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?ke:Pe},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&we)&&(o=e.curRecognizer=null);for(var a=0;a<n.length;)i=n[a],e.stopped===ke||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&i.state&(ye|be|_e)&&(o=e.curRecognizer=i),a++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(u(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(u(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=w(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var i=this.handlers;return d(_(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==s){var i=this.handlers;return d(_(t),function(t){e?i[t]&&i[t].splice(w(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&pt(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},vt(ct,{INPUT_START:xt,INPUT_MOVE:Dt,INPUT_END:Nt,INPUT_CANCEL:Rt,STATE_POSSIBLE:ge,STATE_BEGAN:ye,STATE_CHANGED:be,STATE_ENDED:_e,STATE_RECOGNIZED:we,STATE_CANCELLED:Te,STATE_FAILED:Ee,DIRECTION_NONE:zt,DIRECTION_LEFT:Ht,DIRECTION_RIGHT:Lt,DIRECTION_UP:Wt,DIRECTION_DOWN:Ut,DIRECTION_HORIZONTAL:Vt,DIRECTION_VERTICAL:Ft,DIRECTION_ALL:qt,Manager:ft,Input:j,TouchAction:K,TouchInput:q,MouseInput:W,PointerEventInput:U,TouchMouseInput:Y,SingleTouchInput:V,Recognizer:tt,AttrRecognizer:ot,Tap:dt,Pan:at,Swipe:ut,Pinch:rt,Rotate:lt,Press:st,on:m,off:g,each:d,merge:Et,extend:Tt,assign:vt,inherit:f,bindFn:h,prefixed:P});var Ce="undefined"!=typeof o?o:"undefined"!=typeof self?self:{};Ce.Hammer=ct,n=function(){return ct}.call(e,i,e,t),!(n!==s&&(t.exports=n))}(window,document,"Hammer")},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=i(69),u=n(l),d=function(){function t(e,i){o(this,t),this.$node=e,this.id=i,this.bindEvents()}return a(t,[{key:"bindEvents",value:function(){this._onScroll=this.onScroll.bind(this),u["default"].getMedia(this.id)&&this._onScroll(),s["default"].emitter.on("app--scroll",this._onScroll)}},{key:"onScroll",value:function(){s["default"].util.isElementVisibleVert(this.$node[0])?u["default"].isPlaying(this.id)||u["default"].playMedia(this.id):u["default"].isPlaying(this.id)&&u["default"].stopMedia(this.id)}},{key:"destroy",value:function(){s["default"].emitter.off("app--scroll",this._onScroll)}}]),t}();e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(5),s=n(r),l=i(3),u=n(l),d=i(81),c=n(d),f=function(){function t(e,i){o(this,t),this.$node=e,this.data=i,this.data.oembed.html?this.initVideo():u["default"].log("warn","VideoEmbed requires `oembed` data")}return a(t,[{key:"initVideo",value:function(){this.$videoItem=(0,s["default"])((0,c["default"])("VideoEmbed",{body:this.data.body,oembed:this.data.oembed.html,assetUrl:this.data.assetUrl,paddingBottom:this.data.oembed.height/this.data.oembed.width*100+"%"})),this.$videoPoster=this.$videoItem.find(".js-video-poster"),this.$videoInfo=this.$videoItem.find(".js-video-info"),this.$videoIframe=this.$videoItem.find("iframe"),this.handlePoster(),this.$node[0].innerHTML="",this.$node.append(this.$videoItem[0])}},{key:"handlePoster",value:function(){var t=this;this.$videoItem.on("click",".js-video-info",function(){t.$videoItem.off("click").addClass("is-played"),"vimeo"===t.data.oembed.providerName?t.$videoIframe[0].contentWindow.postMessage('{"method": "play", "value": "true"}',"*"):"youtube"===t.data.oembed.providerName&&t.$videoIframe[0].contentWindow.postMessage('{"event": "command", "func": "playVideo", "args": ""}',"*")}),u["default"].util.loadImages(this.$videoPoster,u["default"].util.noop).on("done",function(){t.$videoPoster.addClass("is-active")})}}]),t}();e["default"]=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(82),a=n(o),r=i(83),s=n(r),l=function(t){return t?t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\=/g,"&equals;").replace(/\s/g,"&nbsp;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;"):t},u=function(t,e,i){return a["default"].render(s["default"][t]?s["default"][t]:"",e,i?i:null).replace(/\{\{@\}\}/g,l(JSON.stringify(e)))};e["default"]=u},function(t,e,i){var n,o,a;!function(i,r){"object"==typeof e&&e&&"string"!=typeof e.nodeName?r(e):(o=[e],n=r,a="function"==typeof n?n.apply(e,o):n,!(void 0!==a&&(t.exports=a)))}(this,function(t){function e(t){return"function"==typeof t}function i(t){return v(t)?"array":typeof t}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t,e){return null!=t&&"object"==typeof t&&e in t}function a(t,e){return m.call(t,e)}function r(t){return!a(g,t)}function s(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return y[t]})}function l(e,i){function o(){if(g&&!y)for(;m.length;)delete p[m.pop()];else m=[];g=!1,y=!1}function a(t){if("string"==typeof t&&(t=t.split(_,2)),!v(t)||2!==t.length)throw new Error("Invalid tags: "+t);s=new RegExp(n(t[0])+"\\s*"),l=new RegExp("\\s*"+n(t[1])),f=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var s,l,f,h=[],p=[],m=[],g=!1,y=!1;a(i||t.tags);for(var P,k,C,j,M,$,O=new c(e);!O.eos();){if(P=O.pos,C=O.scanUntil(s))for(var S=0,A=C.length;A>S;++S)j=C.charAt(S),r(j)?m.push(p.length):y=!0,p.push(["text",j,P,P+1]),P+=1,"\n"===j&&o();if(!O.scan(s))break;if(g=!0,k=O.scan(E)||"name",O.scan(b),"="===k?(C=O.scanUntil(w),O.scan(w),O.scanUntil(l)):"{"===k?(C=O.scanUntil(f),O.scan(T),O.scanUntil(l),k="&"):C=O.scanUntil(l),!O.scan(l))throw new Error("Unclosed tag at "+O.pos);if(M=[k,C,P,O.pos],p.push(M),"#"===k||"^"===k)h.push(M);else if("/"===k){if($=h.pop(),!$)throw new Error('Unopened section "'+C+'" at '+P);if($[1]!==C)throw new Error('Unclosed section "'+$[1]+'" at '+P)}else"name"===k||"{"===k||"&"===k?y=!0:"="===k&&a(C)}if($=h.pop())throw new Error('Unclosed section "'+$[1]+'" at '+O.pos);return d(u(p))}function u(t){for(var e,i,n=[],o=0,a=t.length;a>o;++o)e=t[o],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}function d(t){for(var e,i,n=[],o=n,a=[],r=0,s=t.length;s>r;++r)switch(e=t[r],e[0]){case"#":case"^":o.push(e),a.push(e),o=e[4]=[];break;case"/":i=a.pop(),i[5]=e[2],o=a.length>0?a[a.length-1][4]:n;break;default:o.push(e)}return n}function c(t){this.string=t,this.tail=t,this.pos=0}function f(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function h(){this.cache={}}var p=Object.prototype.toString,v=Array.isArray||function(t){return"[object Array]"===p.call(t)},m=RegExp.prototype.test,g=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,_=/\s+/,w=/\s*=/,T=/\s*\}/,E=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},c.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},f.prototype.push=function(t){return new f(t,this)},f.prototype.lookup=function(t){var i,n=this.cache;if(n.hasOwnProperty(t))i=n[t];else{for(var a,r,s=this,l=!1;s;){if(t.indexOf(".")>0)for(i=s.view,a=t.split("."),r=0;null!=i&&r<a.length;)r===a.length-1&&(l=o(i,a[r])),i=i[a[r++]];else i=s.view[t],l=o(s.view,t);if(l)break;s=s.parent}n[t]=i}return e(i)&&(i=i.call(this.view)),i},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(t,e){var i=this.cache,n=i[t];return null==n&&(n=i[t]=l(t,e)),n},h.prototype.render=function(t,e,i){var n=this.parse(t),o=e instanceof f?e:new f(e);return this.renderTokens(n,o,i,t)},h.prototype.renderTokens=function(t,e,i,n){for(var o,a,r,s="",l=0,u=t.length;u>l;++l)r=void 0,o=t[l],a=o[0],"#"===a?r=this.renderSection(o,e,i,n):"^"===a?r=this.renderInverted(o,e,i,n):">"===a?r=this.renderPartial(o,e,i,n):"&"===a?r=this.unescapedValue(o,e):"name"===a?r=this.escapedValue(o,e):"text"===a&&(r=this.rawValue(o)),void 0!==r&&(s+=r);return s},h.prototype.renderSection=function(t,i,n,o){function a(t){return r.render(t,i,n)}var r=this,s="",l=i.lookup(t[1]);if(l){if(v(l))for(var u=0,d=l.length;d>u;++u)s+=this.renderTokens(t[4],i.push(l[u]),n,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(t[4],i.push(l),n,o);else if(e(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,o.slice(t[3],t[5]),a),null!=l&&(s+=l)}else s+=this.renderTokens(t[4],i,n,o);return s}},h.prototype.renderInverted=function(t,e,i,n){var o=e.lookup(t[1]);return!o||v(o)&&0===o.length?this.renderTokens(t[4],e,i,n):void 0},h.prototype.renderPartial=function(t,i,n){if(n){var o=e(n)?n(t[1]):n[t[1]];return null!=o?this.renderTokens(this.parse(o),i,n,o):void 0}},h.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);return null!=i?i:void 0},h.prototype.escapedValue=function(e,i){var n=i.lookup(e[1]);return null!=n?t.escape(n):void 0},h.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.2.1",t.tags=["{{","}}"];var P=new h;t.clearCache=function(){return P.clearCache()},t.parse=function(t,e){return P.parse(t,e)},t.render=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+i(t)+'" was given as the first argument for mustache#render(template, view, partials)');return P.render(t,e,n)},t.to_html=function(i,n,o,a){var r=t.render(i,n,o);return e(a)?void a(r):r},t.escape=s,t.Scanner=c,t.Context=f,t.Writer=h})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};i.GridWall='\n{{#items}}\n    <div class="grid__item grid__item--gridwall js-grid-item">\n        <a class="grid__link animate js-animate" href="{{fullUrl}}">\n            {{#systemDataVariants}}\n                <img class="grid__image image js-grid-image" data-img-src="{{assetUrl}}" data-variants="{{systemDataVariants}}" />\n            {{/systemDataVariants}}\n            {{^systemDataVariants}}\n                <h3 class="grid__title grid__title--typo h3">{{{title}}}</h3>\n            {{/systemDataVariants}}\n            <div class="grid__lock">\n                {{#systemDataVariants}}\n                    <h4 class="grid__title h4">{{{title}}}</h4>\n                {{/systemDataVariants}}\n                <p class="grid__meta meta -grey">{{taxonomy}}</p>\n            </div>\n        </a>\n    </div>\n{{/items}}',
i.GridPeople='\n{{#people}}\n    <div class="person -column">\n        <figure class="figure">\n            <span class="figure__wrap -column">\n                <span class="figure__plate -column" style="background-color: #{{color}};">\n                    <img class="figure__image image js-lazy-image animate animate--fade js-animate" data-img-src="{{assetUrl}}" data-variants="{{systemDataVariants}}" />\n                </span>\n            </span>\n        </figure>\n        <div class="grid__info -text--center">\n            <h4 class="h4">{{title}}</h4>\n            <div class="meta -grey">{{taxonomy}}</div>\n        </div>\n    </div>\n{{/people}}',i.NextCaseStudy='\n<div class="article__cover js-article-plate cover js-cover -text--center" id="article-cover--{{id}}">\n    <style class="js-article-cover-style">\n        #article-cover--{{id}} .cover__screen { background-color: {{{leadInColor}}} !important; }\n        #article-cover--{{id}} .cover__text { color: {{{leadInTextColor}}} !important; }\n    </style>\n    <div class="cover__screen js-article-screen"></div>\n    <div class="cover__content js-article-cover ghost">\n        <div class="cover__text h3 js-article-leadin js-animate-article animate -lead -text--left ghost__child">\n            {{{text}}}\n        </div>\n    </div>\n</div>',i.AudioBar='\n<div class="_audiobar js-audio-bar media">\n    <div class="_audiobar__pp ghost">\n        <button class="_audiobar__icon icon icon--play icon--play--light js-audiobar-pp ghost__child js-btn -btn"></button>\n    </div>\n    <div class="_audiobar__scrubber -column">\n        <div class="media__scrubber js-media-scrubber">\n            <div class="media__progress js-media-progress"></div>\n        </div>\n    </div>\n    <div class="_audiobar__metadata meta -column ghost">\n        <div class="_audiobar__time js-media-time ghost__child"></div>\n        <div class="_audiobar__duration js-media-duration -column ghost__child"></div>\n    </div>\n</div>',i.VideoCustom='\n<div class="_video -tuck">\n    <div class="_video__wrap js-video-wrap">\n        <div class="_video__aspect js-video-aspect">\n            <video class="_video__video js-video-el"></video>\n        </div>\n        <div class="_video__poster js-video-poster -cover animate animate--fade" data-img-src="{{assetUrl}}"></div>\n        <div class="_video__info js-video-info ghost">\n            <button class="icon--light js-play-icon animate animate--fade animate--delayed ghost__child js-btn -btn">\n                <span class="icon icon--svg icon--play-button">\n                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewBox="0 0 80 80" xml:space="preserve"><path d="M40 0C17.9 0 0 17.9 0 40c0 22.1 17.9 40 40 40s40-17.9 40-40C80 17.9 62.1 0 40 0zM40 78C19 78 2 61 2 40S19 2 40 2s38 17 38 38S61 78 40 78z"/><polygon class="st0" points="33.9 51.4 51.1 39.6 33.9 28 "/></svg>\n                </span>\n            </button>\n        </div>\n        <div class="media__scrubber js-media-scrubber">\n            <div class="media__progress js-media-progress"></div>\n        </div>\n        <div class="media__time js-media-time meta meta--small"></div>\n        <div class="media__duration js-media-duration meta meta--small"></div>\n    </div>\n    {{{body}}}\n</div>',i.VideoEmbed='\n<div class="_video -tuck">\n    <div class="_video__embed js-video-aspect" style="padding-bottom:{{paddingBottom}};">\n        {{{oembed}}}\n        <div class="_video__poster js-video-poster -cover animate animate--fade" data-img-src="{{assetUrl}}"></div>\n        <div class="_video__info js-video-info ghost">\n            <button class="icon--light ghost__child js-btn -btn">\n                <span class="icon icon--svg icon--play-button">\n                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewBox="0 0 80 80" xml:space="preserve"><path d="M40 0C17.9 0 0 17.9 0 40c0 22.1 17.9 40 40 40s40-17.9 40-40C80 17.9 62.1 0 40 0zM40 78C19 78 2 61 2 40S19 2 40 2s38 17 38 38S61 78 40 78z"/><polygon class="st0" points="33.9 51.4 51.1 39.6 33.9 28 "/></svg>\n                </span>\n            </button>\n        </div>\n    </div>\n    {{{body}}}\n</div>',i.VideoMobile='\n<div class="_video _video--mobile -tuck">\n    <div class="_video__wrap">\n        <div class="_video__aspect js-video-aspect">\n            <video class="_video__video js-video-el"></video>\n        </div>\n        <div class="_video__poster js-video-poster -cover" data-img-src="{{assetUrl}}" data-variants="{{systemDataVariants}}"></div>\n        <div class="_video__info js-video-info ghost">\n            <button class="icon--light ghost__child js-btn -btn">\n                <span class="icon icon--svg icon--play-button">\n                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewBox="0 0 80 80" xml:space="preserve"><path d="M40 0C17.9 0 0 17.9 0 40c0 22.1 17.9 40 40 40s40-17.9 40-40C80 17.9 62.1 0 40 0zM40 78C19 78 2 61 2 40S19 2 40 2s38 17 38 38S61 78 40 78z"/><polygon class="st0" points="33.9 51.4 51.1 39.6 33.9 28 "/></svg>\n                </span>\n            </button>\n        </div>\n    </div>\n    {{{body}}}\n</div>',i.VideoTile='\n<div class="_video _video--tile js-video" data-asset-source-url="{{assetSourceUrl}}" data-id="{{id}}">\n    <div class="_video__wrap">\n        <div class="_video__aspect js-video-aspect">\n            <video class="_video__video js-video-el" autoplay muted loop></video>\n        </div>\n    </div>\n</div>',i.VideoMinimal='\n<div class="_video js-media js-video js-hook-node -tuck">\n    <div class="_video__wrap">\n        <div class="_video__aspect js-video-aspect">\n            <video class="_video__video js-video-el" loop muted></video>\n        </div>\n    </div>\n    {{{body}}}\n</div>',i.VideoDeviceSkin='\n<div class="wrapper">\n    <div class="grid js-hook-node">\n        <div class="device device--iphone6 js-device-video js-video">\n            <div class="device__screen js-device-screen device__screen--iphone6">\n                <video class="device__video js-video-el" loop muted></video>\n                <div class="device__body js-device-skin js-lazy-image -cover" data-img-src="/assets/images/ui/device-family-iphone6.png"></div>\n            </div>\n        </div>\n    </div>\n</div>',i.VideoCaption='\n<figcaption class="figure__cap js-figure-caption -wrap">\n    <span class="meta caption -grey">{{{body}}}</span>\n</figcaption>',i.JobApplication='\n<form method="POST" action="{{action}}" enctype="multipart/form-data" class="form form--apply js-careers-form">\n    <div class="form__message ghost -text--center">\n        <span class="h1 h1--plus -light ghost__child">{{message}}</span>\n    </div>\n    <div class="form__fields">\n        {{#fields}}\n            {{#isFile}}\n                <div class="form__field form__fileshim">\n                    <input required class="form__input {{className}} js-form-field" id="{{label}}" type="{{type}}" name="{{name}}" placeholder="{{label}}" />\n                    <label class="form__label form__input form__text js-fileshim--{{name}}">{{label}}</label>\n                </div>\n            {{/isFile}}\n            {{^isFile}}\n                <div class="form__field">\n                    <label class="form__label -off-screen" for="{{label}}">{{label}}</label>\n                    <input required class="form__input {{className}} js-form-field" id="{{label}}" type="{{type}}" name="{{name}}" placeholder="{{label}}" data-human-name="{{name_human}}" />\n                </div>\n            {{/isFile}}\n        {{/fields}}\n        <div class="form__field">\n            <input class="js-form-field" type="hidden" name="id" value="{{jobId}}" />\n            <input class="js-form-field" type="hidden" name="mapped_url_token" value="" />\n            <input class="js-form-field" type="hidden" name="title" value="{{jobTitle}}" />\n            <button class="form__submit h4 -light js-btn -btn" type="submit">Submit</button>\n        </div>\n    </div>\n</form>',i.FormCheckboxes='\n{{#checkboxes}}\n    <div class="form__field">\n        <label class="form__checkbox" for="id-{{id}}">\n            <input class="form__checkbox__input js-form-checkbox" type="checkbox" name="item_{{id}}" id="id-{{id}}" value="{{id}}" />\n            <span class="form__checkbox__text p">{{title}}</span>\n        </label>\n    </div>\n{{/checkboxes}}',i.PageNotFound='\n<div class="cover js-cover -bg--black">\n    <div class="cover__wrap wrapper ghost">\n        <div class="h1 h1--plus -light ghost__child">\n            Pour one out for that last link. It&rsquo;s dead <a class="a-link -light" href="/">homie</a>.\n        </div>\n    </div>\n</div>',e["default"]=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=i(5),u=n(l),d=i(80),c=n(d),f=i(85),h=n(f),p=i(86),v=n(p),m=i(87),g=n(m),y=i(81),b=n(y),_=function(){function t(e,i){o(this,t),this.$node=e,this.data=i,this._files={},this._video=null,this._embed=null,this.loadVimeoData()}return a(t,[{key:"loadVimeoData",value:function(){var t=this,e=this.data.sourceUrl.split("/").pop();s["default"].api.vimeo(e).then(function(e){e.files?t.handleVimeoData(e):t._embed=new c["default"](t.$node,t.data)})["catch"](function(e){t._embed=new c["default"](t.$node,t.data),s["default"].log("warn","VideoVimeo ajax failed",e,t.data)})}},{key:"logVideoFiles",value:function(t){var e=t.files.length;for(e;e--;)(!this._files[t.files[e].quality]||this._files[t.files[e].quality]&&t.files[e].size>this._files[t.files[e].quality].size)&&(this._files[t.files[e].quality]=t.files[e])}},{key:"getVideoFile",value:function(){return s["default"].detect.isDevice()?this._files.mobile||this._files.sd:this._files.hd||this._files.sd}},{key:"getVideoTag",value:function(t){var e=["Autoplay","Feature","Mobile"],i=t.tags.length,n=null;for(i;i--;)if(-1!==e.indexOf(t.tags[i].name)){n=t.tags[i];break}return n}},{key:"handleVimeoData",value:function(t){var e=null;this.logVideoFiles(t);var i=this.getVideoFile(),n=this.getVideoTag(t);this.data.sourceUrl=i.link,"Autoplay"===n.name?(e=(0,u["default"])((0,b["default"])("VideoMinimal",this.data)),this.$node.append(e),this._video=new h["default"](e,this.data)):"Feature"===n.name?this._video=new v["default"](this.$node,this.data):"Mobile"===n.name&&(e=(0,u["default"])((0,b["default"])("VideoDeviceSkin",this.data)),this.$node.append(e),this._video=new g["default"](e,this.data))}},{key:"destroy",value:function(){this._controls&&this._controls.destroy()}}]),t}();e["default"]=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function m(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:m(o,e,i)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},u=i(3),d=n(u),c=i(74),f=n(c),h=i(79),p=n(h),v=function(t){function e(t,i){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,i));return d["default"].detect.isDevice()?n.initMobile():(n.data.sourceUrl=n.getSourceUrl(n.data.sourceUrl),n.initVideo()),n}return r(e,t),s(e,[{key:"initMobile",value:function(){var t=this;this.$node.addClass("_video--mobile"),this.$videoNode=this.$node.find(".js-video-el"),this.$videoNode[0].setAttribute("controls",!0),this.$videoNode[0].setAttribute("loop",!1),this.$videoNode[0].setAttribute("poster",this.data.assetUrl),this.$videoAspect=this.$node.find(".js-video-aspect"),this.$node.find(".js-video-controls").remove(),this.createMediaNode(this.data.id,this.data.sourceUrl,this.$videoNode[0]),this.waitForLoadedMetaData(this.data.id,function(){t.applyAspect()})}},{key:"initVideo",value:function(){var t=this;this.$videoItem=this.$node.addClass("is-played"),this.$videoNode=this.$videoItem.find(".js-video-el"),this.$videoAspect=this.$videoItem.find(".js-video-aspect"),this.$videoIcon=this.$videoItem.find(".js-video-icon"),this.$videoWrap=this.$videoItem.find(".js-video-wrap"),this.$videoNode[0].setAttribute("loop",!0),this.waitForLoadedMetaData(function(){t.applyAspect(),t.autoplayHandler=new p["default"](t.$node,t.data.id)}),this.createMediaNode(this.data.id,this.data.sourceUrl,this.$videoNode[0]),this.bindEventHandlers()}},{key:"destroy",value:function(){l(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.autoplayHandler&&this.autoplayHandler.destroy(),this.$videoIcon&&this.$videoIcon.off("click")}}]),e}(f["default"]);e["default"]=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function C(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:C(o,e,i)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},u=i(5),d=n(u),c=i(3),f=n(c),h=i(75),p=n(h),v=i(69),m=n(v),g=i(74),y=n(g),b=i(80),_=n(b),w=i(79),T=n(w),E=i(81),P=n(E),k=function(t){function e(t,i){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,i));return f["default"].detect.isDevice()?n.initMobile():(n.data.sourceUrl=n.getSourceUrl(n.data.sourceUrl),n.data.customContent||n.data.videoApiProvider!==f["default"].config.supportedVideoApiProvider?(n.data.customContent.posterVideoSourceUrl=n.getSourceUrl(n.data.customContent.posterVideoSourceUrl),n.$videoItem=n.$node.children().eq(0)):n.$videoItem=(0,d["default"])((0,P["default"])("VideoCustom",n.data)),n.initVideoSource(n.data.sourceUrl)),n}return r(e,t),s(e,[{key:"initMobile",value:function(){var t=this;this.data.oembed.html&&this.data.videoApiProvider!==f["default"].config.supportedVideoApiProvider?this._embed=new _["default"](this.$node,this.data):(this.$videoItem=(0,d["default"])((0,P["default"])("VideoMobile",this.data)),this.$videoNode=this.$videoItem.find(".js-video-el"),this.$videoNode[0].setAttribute("controls",!0),this.$videoNode[0].setAttribute("loop",!1),this.$videoAspect=this.$videoItem.find(".js-video-aspect"),this.$videoPoster=this.$videoItem.find(".js-video-poster"),this.$videoPoster.length&&this.loadPosterImage(),this.$node[0].innerHTML="",this.$node.append(this.$videoItem[0]),this.createMediaNode(this.data.id,this.data.sourceUrl,this.$videoNode[0]),this.bindClickEvents(),m["default"].addMediaEvent(this.data.id,"play",function(){t.$videoItem.addClass("is-played")}))}},{key:"initVideoSource",value:function(t){var e=this;this.$videoNode=this.$videoItem.find(".js-video-el"),this.$videoPoster=this.$videoItem.find(".js-video-poster"),this.$videoPosterLoop=this.$videoItem.find(".js-video-poster-loop"),this.$videoAspect=this.$videoItem.find(".js-video-aspect"),this.$videoScrub=this.$videoItem.find(".js-media-scrubber"),this.$videoProgress=this.$videoItem.find(".js-media-progress"),this.$videoWrap=this.$videoItem.find(".js-video-wrap"),this.$playIcon=this.$videoItem.find(".js-play-icon"),this.$node.append(this.$videoItem),this.$videoPosterLoop.length?this.loadPosterVideoLoop():this.$videoPoster.length&&this.loadPosterImage(),this.waitForLoadedMetaData(function(){e.applyAspect()}),this.createWaypoints(),this.createMediaNode(this.data.id,t,this.$videoNode[0]),this.createScrubber(),this.bindClickEvents(),this.bindMediaNodeEvents(),this.bindEventHandlers()}},{key:"createWaypoints",value:function(){var t=this;this._iconWaypoint=new f["default"].Waypoints(this.$playIcon,function(){t.$playIcon.addClass("is-active")},f["default"].util.isElementVisibleVert)}},{key:"loadPosterImage",value:function(){var t=this;f["default"].util.loadImages(this.$videoPoster,f["default"].util.noop).on("done",function(){t.$videoPoster.addClass("is-active")})}},{key:"loadPosterVideoLoop",value:function(){var t=this;this.videoPosterId=this.data.id+"-poster-loop",this.$videoPosterLoop.addClass("is-active"),this.$videoPosterLoop.on("loadedmetadata",function(){t.autoplayHandler=new T["default"](t.$node,t.videoPosterId)}),this.createMediaNode(this.videoPosterId,this.data.customContent.posterVideoSourceUrl,this.$videoPosterLoop[0])}},{key:"bindClickEvents",value:function(){var t=this;this.$videoItem.on("click",".js-video-el, .js-video-info",function(){p["default"].stopChannels(),m["default"].isPlaying(t.data.id)?m["default"].stopMedia(t.data.id):m["default"].playMedia(t.data.id)})}},{key:"bindMediaNodeEvents",value:function(){var t=this;m["default"].addMediaEvent(this.data.id,"play",function(){t.videoPosterId&&m["default"].stopMedia(t.videoPosterId),t.$videoItem.addClass("is-played")}).addMediaEvent(this.data.id,"pause",function(){}).addMediaEvent(this.data.id,"ended",function(){m["default"].stopMedia(t.data.id).setMediaProp(t.data.id,"currentTime",0),t._scrubber.resetUI(),t.videoPosterId&&m["default"].playMedia(t.videoPosterId),t.$videoItem.removeClass("is-played is-hovered")})}},{key:"destroy",value:function(){l(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this._iconWaypoint&&this._iconWaypoint.destroy(),this.autoplayHandler&&this.autoplayHandler.destroy(),this.videoPosterId&&m["default"].destroyMedia(this.videoPosterId),this.$videoScrub&&this.$videoScrub.off("mouseenter mousemove mouseleave"),this.$videoItem&&this.$videoItem.off("click mouseenter mouseleave")}}]),e}(y["default"]);e["default"]=k},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function m(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:m(o,e,i)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},u=i(3),d=n(u),c=i(74),f=n(c),h=i(79),p=n(h),v=function(t){function e(t,i){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,i));return n.$videoNode=n.$node.find(".js-video-el"),d["default"].detect.isDevice()?n.initMobile():(n.data.sourceUrl=n.getSourceUrl(n.data.sourceUrl),n.initVideo()),n}return r(e,t),s(e,[{key:"initMobile",value:function(){this.$videoSkin=this.$node.find(".js-device-skin"),this.$videoScreen=this.$node.find(".js-device-screen"),this.$videoNode[0].setAttribute("poster",this.data.assetUrl),this.$videoNode[0].setAttribute("controls",!0),this.$videoNode[0].setAttribute("autoplay",!1),this.$videoNode[0].style.marginTop="0",this.$videoNode[0].style.width="100%",this.$videoSkin[0].style.pointerEvents="none",this.$videoScreen[0].style.paddingBottom="0",this.createMediaNode(this.data.id,this.data.sourceUrl,this.$videoNode[0])}},{key:"initVideo",value:function(){var t=this;d["default"].util.loadImages(this.$node.find(".js-lazy-image"),d["default"].util.noop),this.waitForLoadedMetaData(function(){t.autoplayHandler=new p["default"](t.$node,t.data.id)}),this.$videoNode[0].setAttribute("loop",!0),this.createMediaNode(this.data.id,this.data.sourceUrl,this.$videoNode[0])}},{key:"destroy",value:function(){l(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.autoplayHandler&&this.autoplayHandler.destroy()}}]),e}(f["default"]);e["default"]=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function m(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:m(o,e,i)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},u=i(3),d=n(u),c=i(74),f=n(c),h=i(79),p=n(h),v=function(t){function e(t,i){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this));return n.$node=t,n.data=i,d["default"].detect.isDevice()?n.initMobile():(n.data.sourceUrl=n.getSourceUrl(n.data.sourceUrl),n.initVideo()),n}return r(e,t),s(e,[{key:"initMobile",value:function(){this.$node.addClass("is-hidden")}},{key:"initVideo",value:function(){var t=this;this.$videoNode=this.$node.find(".js-video-el"),this.waitForLoadedMetaData(function(){t.autoplayHandler=new p["default"](t.$node,t.data.id),t.videoRatio=t.$videoNode[0].videoWidth/t.$videoNode[0].videoHeight,t.bindEventHandlers(),t.resizeVideoNode()}),this.createMediaNode(this.data.id,this.data.sourceUrl,this.$videoNode[0])}},{key:"bindEventHandlers",value:function(){this._onResizeVideoNode=this.resizeVideoNode.bind(this),d["default"].emitter.on("app--resize",this._onResizeVideoNode)}},{key:"resizeVideoNode",value:function(){var t=this.$node[0].getBoundingClientRect(),e=t.width/t.height,i=this.videoRatio/e,n=null;n=e<this.videoRatio?t.width*i:t.width,this.$videoNode[0].style.width=d["default"].util.px(n),this.$videoNode[0].width=n,this.$videoNode[0].style.marginLeft=d["default"].util.px(-(n/2)+t.width/2)}},{key:"destroy",value:function(){l(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this._onResizeVideoNode&&d["default"].emitter.off("app--resize",this._onResizeVideoNode),this.autoplayHandler&&this.autoplayHandler.destroy()}}]),e}(f["default"]);e["default"]=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=null,s={dependencies:{},init:function(){a["default"].log("codes initialized")},isActive:function(){return this.getElements()>0},onload:function(){var t=r.data();t.script||t.style?(this.dependencies.sources=[],t.style&&this.dependencies.sources.push({file:"codes/"+t.style,type:"style"}),t.script&&this.dependencies.sources.push({file:"codes/"+t.script,type:"script"}),a["default"].util.loadDependencies(this.dependencies,l)):l()},unload:function(){this.teardown()},teardown:function(){r=null,this.dependencies.loaded&&a["default"].util.unloadDependencies(this.dependencies),this.dependencies={},a["default"].emitter.fire("app--code-unload")},getElements:function(){return r=a["default"].dom.page.find(".js-code").not(a["default"].util.preFree),r.length}},l=function(){r.addClass("is-loaded"),a["default"].emitter.fire("app--code-onload",r)};e["default"]=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(91),a=n(o),r=i(3),s=n(r),l=i(76),u=n(l),d=!1,c=!1,f=!1,h=!1,p={},v=500,m=s["default"].dom.nav.find(".js-menu-nav-item"),g={init:function(){this.bindMainEvents(),this.bindScrollEvents(),this.menu=new a["default"](s["default"].dom.nav),s["default"].log("nav initialized")},open:function(){this.menu.isActive()||(this.menu.open(),p.menu.on("tap",".js-menu-nav",k))},close:function(){this.menu.isActive()&&(this.menu.close(),p.menu.off("tap",k))},padPage:function(t){t=void 0!==t?t:s["default"].dom.header.node[0].clientHeight,s["default"].dom.page[0].style.paddingTop=s["default"].util.px(t)},toggleActive:function(t){m.removeClass("is-active"),t&&m.filter(".menu-nav__a--"+t).addClass("is-active")},disableHeader:function(t){c=t},disableHeaderAnim:function(t){h=t},resetHeader:function(){s["default"].dom.header.node.removeClass("is-utility"),d=!1,c=!1,f=!1,h=!1,y(0)},revealHeader:function(){s["default"].dom.header.node.removeClass("is-inactive")},cycleHeader:function(){var t=this;s["default"].dom.header.node.addClass("is-inactive"),setTimeout(function(){t.resetHeader(),t.revealHeader()},s["default"].config.defaultDuration)},bindMainEvents:function(){p.icon=new u["default"](s["default"].dom.header.node[0],s["default"].util.getDefaultHammerOptions()),p.icon.on("tap",".js-controller--nav",C),p.menu=new u["default"](s["default"].dom.nav[0],s["default"].util.getDefaultHammerOptions()),s["default"].emitter.on("app--colorplate-change",b),s["default"].emitter.on("app--intro-art",_),s["default"].emitter.on("app--outro-art",w),s["default"].emitter.on("app--resize-debounced",this.padPage.bind(this))},bindScrollEvents:function(){s["default"].detect.isStandalone()||(s["default"].emitter.on("app--scroll",T),s["default"].emitter.on("app--scroll-up",E),s["default"].emitter.on("app--scroll-down",P))}},y=function(t){s["default"].util.translate3d(s["default"].dom.header.node[0],0,s["default"].util.px(t),0)},b=function(t){t?s["default"].dom.header.node[0].style.backgroundColor=t:s["default"].dom.header.node.attr("style","")},_=function(){h=!1,g.padPage(),g.resetHeader(),g.revealHeader()},w=function(){h||(s["default"].dom.header.node.addClass("is-inactive"),setTimeout(function(){g.resetHeader()},s["default"].config.defaultDuration))},T=function(t){var e=null,i=2*s["default"].dom.header.node[0].clientHeight;return s["default"].scrolls.isScrollOutOfRange()?void(0>=t&&f&&(f=!1,s["default"].dom.header.node.removeClass("is-utility"))):void(c||0>t||t>s["default"].scroller.getScrollMax()||(e=t/2,i>=t&&!f?(d&&(d=!1),s["default"].dom.header.node.removeClass("is-utility"),y(-e)):t>i&&!d&&(d=!0,s["default"].dom.header.node.addClass("is-utility"),y(-s["default"].dom.header.node[0].clientHeight))))},E=function(t){s["default"].scrolls.isScrollOutOfRange()||c||d&&t>=v&&(f=!0,y(0))},P=function(t){s["default"].scrolls.isScrollOutOfRange()||c||d&&t>=v&&(f=!1,y(-s["default"].dom.header.node[0].clientHeight))},k=function(t){t.target instanceof SVGElement||"A"===t.target.tagName||g.close()},C=function(){g.open()};e["default"]=g},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(90),s=n(r),l=i(3),u=n(l),d=function(){function t(e){o(this,t),this.$node=e,this.data=this.$node.data(),this.tDuration=u["default"].util.getTransitionDuration(this.$node[0]),this.isOpen=!1,this.scrollPos=u["default"].scroller.getScrollY(),this.bind()}return a(t,[{key:"bind",value:function(){var t=this;u["default"].emitter.on("app--keydown",function(e,i){e.keyCode===u["default"].keys.ESC&&t.isOpen&&t.close(),e.keyCode!==u["default"].keys.ENTER||t.isOpen||-1===i.className.indexOf(t.data.trigger)||t.open()})}},{key:"open",value:function(){var t=this;this.isOpen=!0,u["default"].dom.html.addClass("is-menu-open"),s["default"].disableHeader(!0),this.scrollPos=u["default"].scroller.getScrollY(),u["default"].scrolls.suppress(!0),u["default"].emitter.fire("app--menu-opened"),this.$node.attr("tabindex","-1"),u["default"].dom.header.btns.attr("tabindex","-1"),this.$node[0].focus(),setTimeout(function(){return t.$node.addClass("is-active")},0),setTimeout(function(){t.$node.addClass("is-active-events"),u["default"].dom.html.addClass("is-clipped"),u["default"].dom.body.addClass("is-clipped")},2*this.tDuration)}},{key:"close",value:function(){var t=this;this.isOpen=!1,this.$node.removeClass("is-active"),u["default"].dom.html.removeClass("is-clipped"),u["default"].dom.body.removeClass("is-clipped"),u["default"].dom.body[0].scrollTop=this.scrollPos,u["default"].scrolls.suppress(!1),u["default"].emitter.fire("app--menu-closed"),this.$node.removeAttr("tabindex"),u["default"].dom.header.btns.removeAttr("tabindex"),setTimeout(function(){s["default"].disableHeader(!1),u["default"].dom.html.removeClass("is-menu-open"),t.$node.removeClass("is-active-events")},2*this.tDuration)}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"isActive",value:function(){return this.isOpen}}]),t}();e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(93),s=n(r),l=i(95),u=n(l),d=i(96),c=n(d),f=i(97),h=n(f),p=i(98),v=n(p),m=i(99),g=n(m),y=i(100),b=n(y),_={code:c["default"],html:h["default"],image:v["default"],embed:g["default"],gallery:b["default"]},w=function(t,e){var i=e.closest(".sqs-block");i.addClass("is-annotated"),t.find(".sqs-block-content > blockquote").length&&i.addClass("is-annotated-headline")},T=function(t,e){var i=e.closest(".sqs-block");(0,s["default"])(i.find(".meta"))},E=function(t){var e=t.closest(".sqs-block");(0,u["default"])(e)};a["default"].emitter.on("app--hook--inline-video",E),a["default"].emitter.on("app--hook--diptych",T),a["default"].emitter.on("app--hook--annotated",T),a["default"].emitter.on("app--hook--annotated",w),
e["default"]=_},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(94),a=n(o),r=i(3),s=n(r),l=i(5),u=n(l),d=function(t){var e=t.find("p > a, ol a, ul a"),i=function(t){t&&this.addClass("js-tip").data("tip",new a["default"](t.item?t.item.title:t.collection.title))},n=e.length,o=null,r=null;for(n;n--;)o=e.eq(n),o[0].hostname===location.hostname?(r=o[0].href.replace(location.origin,""),s["default"].api.collection(r).then(i.bind(o))):o.addClass("js-tip").data("tip",new a["default"](o[0].href.replace(/http[s]?:\/\/|www\./g,"")));t.on("mouseenter",".js-tip",f).on("mousemove",".js-tip",f).on("mouseleave",".js-tip",c)},c=function(){var t=(0,u["default"])(this),e=t.data("tip");e.remove()},f=function(t){var e=(0,u["default"])(this),i=e.data("tip"),n=i.getSize(),o=t.clientX-n.width/2,a=t.clientY-n.height-10;i.append(),i.setPosition(o,a)};e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(5),s=n(r),l=i(3),u=n(l),d=function(){function t(e){o(this,t),this.$node=(0,s["default"])("<span />").addClass("tip"),this.text=e,this.timeout=null,this.isAppended=!1,this.$node[0].innerHTML=e}return a(t,[{key:"setPosition",value:function(t,e){u["default"].util.translate3d(this.$node[0],u["default"].util.px(t),u["default"].util.px(e),0)}},{key:"getSize",value:function(){return this.$node[0].getBoundingClientRect()}},{key:"append",value:function(){var t=this;if(!this.isAppended){try{clearTimeout(this.timeout)}catch(e){u["default"].log("warn",e)}this.isAppended=!0,u["default"].dom.body.append(this.$node),setTimeout(function(){t.$node.addClass("is-active")},0)}}},{key:"remove",value:function(){var t=this;this.isAppended&&(this.isAppended=!1,this.$node.removeClass("is-active"),this.timeout=setTimeout(function(){t.$node.remove()},u["default"].util.getTransitionDuration(this.$node[0])))}}]),t}();e["default"]=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){var e=t.find(".js-figure-caption");e.length&&t.addClass("is-captioned")};e["default"]=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=null,s=null,l={dependencies:{sources:[{file:"prism.js",type:"script"},{file:"prism.css",type:"style"}]},init:function(){a["default"].emitter.on("app--pushed-route",this.onActivateWaypoints.bind(this)),a["default"].log("code initialized")},isActive:function(){return this.getElements()>0},onload:function(){this.dependencies.loaded?this.setWaypoints():a["default"].util.loadDependencies(this.dependencies,this.setWaypoints)},unload:function(){this.teardown()},teardown:function(){r=null,s.destroy(),s=null},getElements:function(){return r=a["default"].dom.page.find(".sqs-layout[data-type='item'] .sqs-block-code"),r.length},setWaypoints:function(){s=new a["default"].Waypoints(r,u,a["default"].util.isElementVisibleVert)},onActivateWaypoints:function(){this.getElements(),this.setWaypoints()}},u=function(t){var e=t.find("pre"),i=t.find("iframe");e.length?c(t,e):i.length&&d(t,i)},d=function(t,e){t.addClass("iframe-code-block").find(".sqs-block-content").addClass("iframe-wrap"),e.addClass("iframe-frame")},c=function(t,e){t.addClass("source-code-block").find(".sqs-block-content").addClass("source-code-wrap"),e[0].innerHTML=e[0].innerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.addClass("source-code"),window.Prism.highlightElement(e[0],!1,function(){e.addClass("is-active")})};e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(93),s=n(r),l=null,u=null,d=null,c=null,f={init:function(){a["default"].emitter.on("app--pushed-route",this.onActivateWaypoints.bind(this)),a["default"].log("html initialized")},isActive:function(){return this.getElements()>0},onload:function(){this.setWaypoints()},unload:function(){this.teardown()},teardown:function(){l=null,u=null,d.destroy(),d=null,c.destroy(),c=null},getElements:function(){return l=a["default"].dom.page.find(".sqs-layout[data-type='item'] .sqs-block-html"),u=a["default"].dom.page.find(".sqs-layout[data-type='block-field'] .sqs-block-html"),l.length},setWaypoints:function(){d=new a["default"].Waypoints(l,h,a["default"].util.isElementVisibleVert),c=new a["default"].Waypoints(u,p,a["default"].util.isElementVisibleVert)},onActivateWaypoints:function(){this.getElements(),this.setWaypoints()}},h=function(t){(0,s["default"])(t)},p=function(t){var e=t.find("p"),i=null,n=e.length;for(n;n--;)i=e[n].innerHTML.replace(/\s|&nbsp;|<br>|<br\/>|<br\s\/>/g,""),i||e.eq(n).remove()};e["default"]=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(93),s=n(r),l=i(95),u=n(l),d=null,c=null,f={init:function(){a["default"].emitter.on("app--pushed-route",this.onActivateWaypoints.bind(this)),a["default"].log("image initialized")},isActive:function(){return this.getElements()>0},onload:function(){this.setWaypoints()},unload:function(){this.teardown()},teardown:function(){d=null,c.destroy(),c=null},getElements:function(){return d=a["default"].dom.page.find(".sqs-layout[data-type='item'] .sqs-block-image"),d.length},setWaypoints:function(){c=new a["default"].Waypoints(d,h,a["default"].util.isElementVisibleVert)},onActivateWaypoints:function(){this.getElements(),this.setWaypoints()}},h=function(t){(0,u["default"])(t),(0,s["default"])(t)};e["default"]=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(42),s=n(r),l=null,u=null,d={init:function(){a["default"].emitter.on("app--pushed-route",this.onActivateWaypoints.bind(this)),a["default"].log("embed initialized")},isActive:function(){return this.getElements()>0},onload:function(){this.setWaypoints()},unload:function(){this.teardown()},teardown:function(){l=null,u.destroy(),u=null},getElements:function(){return l=a["default"].dom.page.find(".sqs-layout[data-type='item'] .sqs-block-embed"),l.length},setWaypoints:function(){u=new a["default"].Waypoints(l,c,a["default"].util.isElementVisibleVert)},onActivateWaypoints:function(){this.getElements(),this.setWaypoints()}},c=function(t){var e=t.find(".twitter-tweet");e.length&&!window.twttr?(0,s["default"])("//platform.twitter.com/widgets.js"):window.twttr.widgets.load()};e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(93),s=n(r),l=i(95),u=n(l),d=null,c=null,f={init:function(){a["default"].emitter.on("app--pushed-route",this.onActivateWaypoints.bind(this)),a["default"].log("gallery initialized")},isActive:function(){return this.getElements()>0},onload:function(){this.setWaypoints()},unload:function(){this.teardown()},teardown:function(){d=null,c.destroy(),c=null},getElements:function(){return d=a["default"].dom.page.find(".sqs-layout[data-type='item'] .sqs-block-gallery"),d.length},setWaypoints:function(){c=new a["default"].Waypoints(d,h,a["default"].util.isElementVisibleVert)},onActivateWaypoints:function(){this.getElements(),this.setWaypoints()}},h=function(t){var e=t.data(a["default"].config.sqsSpecialProps.blockDataKey);t.addClass("is-gallery-"+e.design),(0,u["default"])(t),(0,s["default"])(t)};e["default"]=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),a=n(o),r=i(3),s=n(r),l=i(81),u=n(l),d=null,c=null,f={init:function(){s["default"].emitter.on("app--pushed-route",this.onActivateWaypoints.bind(this)),s["default"].log("diptych initialized")},isActive:function(){return this.getElements()>0},onload:function(){this.setWaypoints()},unload:function(){this.teardown()},teardown:function(){d=null,c&&(c.destroy(),c=null)},getElements:function(){return d=s["default"].dom.page.find(".js-diptych"),d.length},setWaypoints:function(){c=new s["default"].Waypoints(d,h)},onActivateWaypoints:function(){this.getElements(),this.setWaypoints()}},h=function(t){var e=[],i=t.find(".js-diptych-image"),n=function(t,e){var i=(0,a["default"])((0,u["default"])("VideoTile",e));i.data("onLoaded",o.bind(this,i.find(".js-video-el")[0])),t.parent().append(i),t.remove(),s["default"].emitter.fire("app--hook--inline-video",i)},o=function(t){var i=(0,a["default"])(t),n=i.closest(".js-diptych-figure"),o=t.naturalWidth||t.videoWidth;i.data({width:o,$figure:n}),e.push(i),h+=o,f++,2===f&&r()},r=function(){e.forEach(function(t){var e=t.data(),i=Math.round(e.width/h*100);e.$figure[0].style.width=i+"%"}),t.addClass("is-active")},l=i.length,d=null,c=null,f=0,h=0;for(l;l--;)c=i.eq(l),d=c.data(),d.assetSourceUrl&&!s["default"].detect.isDevice()?n(c,d):s["default"].util.loadImages(c,s["default"].util.noop).on("load",o.bind(this,c[0]))};e["default"]=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=null,s=!1,l={init:function(){a["default"].log("animate initialized"),a["default"].emitter.on("app--intro-art",this.onIntroArt.bind(this)),a["default"].emitter.on("app--update-animate",this.onUpdateAnimate.bind(this)),a["default"].emitter.on("app--pushed-route",this.onUpdateAnimate.bind(this))},isActive:function(){return this.getElements()>0},onload:function(){s=!0,a["default"].emitter.on("app--scroll",u),a["default"].emitter.on("app--resize",u),u()},unload:function(){this.teardown()},teardown:function(){r=null,s=!1},getElements:function(){return r=a["default"].dom.page.find(".js-animate"),r.length},onUpdateAnimate:function(){this.getElements(),s||this.onload(),u()},onIntroArt:function(){var t=r.filter(".js-animate--intro-art");t.length&&t.addClass("is-active")}},u=function(){var t=r.not(".js-animate--intro-art"),e=null,i=t.length;for(i;i--;)e=t.eq(i),a["default"].util.isElementVisibleVert(e[0])?e.addClass("is-active"):e.removeClass("is-active")};e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(104),a=n(o),r=i(105),s=n(r),l={careers:s["default"],studio:a["default"]};e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(5),s=n(r),l=i(81),u=n(l),d=null,c=null,f={init:function(){a["default"].emitter.on("app--hook--people",this.onHookedPeople.bind(this)),a["default"].log("studio initialized")},isActive:function(){return this.getElements()>0},onload:function(){},unload:function(){this.teardown()},teardown:function(){d=null,c&&a["default"].emitter.off("app--scroll",c)},getElements:function(){return d=a["default"].dom.page.find(".js-studio"),d.length},onHookedPeople:function(t,e){p(t,e),c=h.bind(this,t,e),a["default"].emitter.on("app--scroll",c)}},h=function(t,e){var i=e[0].getBoundingClientRect();Math.floor(i.bottom)<=window.innerHeight&&p(t,e)},p=function(t,e){if(t.items.length){var i=null,n=t.items.splice(0,6);n.forEach(function(t){t.title=t.title||"&nbsp;",t.color=t.colorData.suggestedBgColor,t.taxonomy=t.categories?t.categories.join(" / "):"&nbsp;"}),i=(0,s["default"])((0,u["default"])("GridPeople",{people:n})),e.append(i),a["default"].emitter.fire("app--update-animate"),a["default"].util.loadImages(i.find(".js-lazy-image"),a["default"].util.noop)}else a["default"].log("Studio","People Loaded"),a["default"].emitter.off("app--scroll",c)};e["default"]=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(106),s=n(r),l=null,u=null,d={init:function(){a["default"].log("careers initialized")},isActive:function(){return this.getElements()>0},onload:function(){u=new s["default"](l,l.data())},unload:function(){this.teardown()},teardown:function(){l=null,u&&(u.destroy(),u=null)},getElements:function(){return l=a["default"].dom.page.find(".js-careers"),l.length}};e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=i(107),u=n(l),d=i(76),c=n(d),f=i(91),h=n(f),p=i(81),v=n(p),m=function(){function t(e,i){o(this,t),this.data=i,this.$node=e,this.$formHolder=this.$node.find(".js-menu-careers-form-holder"),this.$formOverlay=this.$node.find(".js-menu-careers-form"),this.isPosting=!1,this.menu=new h["default"](this.$formOverlay),this.loadJob(),this.bindEvents(),s["default"].dom.html.addClass("is-careers-detail")}return a(t,[{key:"loadJob",value:function(){s["default"].api.job({id:this.data.jobId,questions:!0}).then(this.onJobLoaded.bind(this))}},{key:"bindEvents",value:function(){this._onTapOverlayForm=this.onTapOverlayForm.bind(this),this._onToggleApplicationForm=this.onToggleApplicationForm.bind(this),this._hammers={},this._hammers.page=new c["default"](this.$node[0],s["default"].util.getDefaultHammerOptions()),this._hammers.page.on("tap",".js-controller--careers-form",this._onToggleApplicationForm),this._hammers.form=new c["default"](this.$formOverlay[0],s["default"].util.getDefaultHammerOptions()),this._hammers.form.on("tap",".js-menu-careers-form",this._onTapOverlayForm)}},{key:"formatJobData",value:function(t){var e={text:[],file:[]};return t.questions.forEach(function(t){t.fields[0].name_human=t.label.replace(/\s/g,"_").replace(/\?/g,"").toLowerCase();var i={label:t.label,required:t.required,field:t.fields[0]};"input_file"===i.field.type?"Cover Letter"!==i.label&&e.file.push(i):e.text.push(i)}),t._questions=e,t}},{key:"getFormField",value:function(t){var e=t.field.type.replace(/^input_/,"");"email"===t.field.name&&(e="email"),"phone"===t.field.name&&(e="tel"),"Website"!==t.label&&"LinkedIn Profile"!==t.label||(e="url");var i={type:e,name:t.field.name,name_human:t.field.name_human,label:t.label,className:"form__"+e,isFile:"file"===e};return i}},{key:"createApplicationForm",value:function(){var t=this,e=[];this.job._questions.text.forEach(function(i){e.push(t.getFormField(i))}),this.job._questions.file.forEach(function(i){e.push(t.getFormField(i))}),this.$formHolder.append((0,v["default"])("JobApplication",{jobId:this.job.id,fields:e,message:this.data.message,jobTitle:this.job.title,action:s["default"].api.data.greenhouse.app})),this._formHandler=new u["default"]({$form:this.$formHolder.find(".js-careers-form"),apiMethod:"apply",barStyle:"light"}),this._formHandler.on("success",function(e){s["default"].log("Job apply success",e),setTimeout(t.onToggleApplicationForm.bind(t),4*s["default"].config.defaultDuration)}),this._formHandler.on("failure",function(t){s["default"].log("Job apply error",t)})}},{key:"onJobLoaded",value:function(t){this.job=this.formatJobData(t),this.createApplicationForm(),s["default"].emitter.fire("app--update-animate"),s["default"].log("JobDetail",this)}},{key:"onTapOverlayForm",value:function(t){this.$formHolder[0].contains(t.target)||this.onToggleApplicationForm()}},{key:"onToggleApplicationForm",value:function(){this.menu.toggle()}},{key:"destroy",value:function(){this._hammers&&(this._hammers.form.off("tap",this._onTapOverlayForm),this._hammers.page.off("tap",this._onToggleApplicationForm)),this._formHandler&&this._formHandler.destroy(),s["default"].dom.html.removeClass("is-careers-detail")}}]),t}();e["default"]=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(5),u=n(l),d=i(3),c=n(d),f=i(108),h=n(f),p=i(40),v=n(p),m=function(t){function e(t){o(this,e);var i=a(this,Object.getPrototypeOf(e).call(this));return i.$form=t.$form,i.apiMethod=t.apiMethod,i.barStyle=t.barStyle||"",i.$fields=i.$form.find(".js-form-field"),i.isPosting=!1,i.files={},i.formData={},i._onSubmit=i.onSubmit.bind(i),i._onFiles=i.onFiles.bind(i),i.$form.on("change","[type=file]",i._onFiles),i.$form.on("submit",i._onSubmit),i}return r(e,t),s(e,[{key:"onFiles",value:function(t){var e=this,i=t.target,n=new FileReader,o=(0,u["default"])(".js-fileshim--"+i.name);n.onload=function(t){o.addClass("is-filled"),o[0].innerHTML=i.files[0].name,e.files[i.name]={file:i.files[0].name,data:t.target.result}},n.readAsDataURL(i.files[0])}},{key:"onSubmit",value:function(t){var e=this;t.preventDefault(),this.isPosting||(this.$form.find(".is-invalid").removeClass("is-invalid"),this.isPosting=!0,this.setFormData(),this.fire("submit",this.formData),c["default"].api[this.apiMethod](this.formData).then(function(t){e.isPosting=!1,h["default"].stop(),t.success?(e.showMessage(),e.fire("success",t)):t.errors&&(e.fire("errors",t),t.errors.forEach(function(t){e.setError(t.field)}))})["catch"](function(t){e.isPosting=!1,h["default"].stop(),e.fire("failure",t)}),h["default"].load("bottom",this.barStyle))}},{key:"setFormData",value:function(){var t=this,e=null,i=null;this.$fields.forEach(function(e,n){i=t.$fields.eq(n).data(),t.formData[e.name]=e.value,/^question_/.test(String(e.name))&&(t.formData[i.humanName]=e.value)});for(e in this.files)this.files.hasOwnProperty(e)&&(this.formData[e]=this.files[e])}},{key:"setData",value:function(t,e){this.formData[t]=e}},{key:"removeData",value:function(t){delete this.formData[t]}},{key:"setError",value:function(t){var e=this.$fields.filter("[name="+t+"], [data-human-name="+t+"]");e.addClass("is-invalid")}},{key:"clearForm",value:function(){this.$form.find(".is-invalid").removeClass("is-invalid"),this.$fields.forEach(function(t){t.value=""})}},{key:"showMessage",value:function(){var t=this;this.$form.addClass("is-success"),setTimeout(function(){t.clearForm()},c["default"].config.defaultDuration)}},{key:"destroy",value:function(){this.$form.off("change",this._onFiles),this.$form.off("submit",this._onSubmit)}}]),e}(v["default"]);e["default"]=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=i(71),u=n(l),d=i(5),c=n(d),f=null,h=(0,c["default"])('<div class="bar"><div class="bar__inner"></div></div>'),p=h.find(".bar__inner"),v=function(){function t(e,i){o(this,t),this.color=i||"",this.position=e||"",this.tween=null,this.timeout=5e3}return a(t,[{key:"append",value:function(){s["default"].dom.body.append(h.addClass("bar--"+this.position+" bar--"+this.color))}},{key:"progress",value:function(t){this.tween&&this.tween.stop(),this.tween=new u["default"]({from:this.getFrom(),to:t,update:this.update.bind(this),complete:this.update.bind(this),ease:s["default"].config.defaultEasing,duration:s["default"].config.defaultDuration})}},{key:"load",value:function(){this.append(),this.tween=new u["default"]({from:0,to:window.innerWidth,update:this.update.bind(this),complete:this.update.bind(this),ease:s["default"].config.defaultEasing,duration:this.timeout})}},{key:"stop",value:function(t){this.tween.stop(),this.tween=new u["default"]({from:this.getFrom(),to:window.innerWidth,update:this.update.bind(this),complete:this.complete.bind(this,t),ease:s["default"].config.defaultEasing,duration:s["default"].config.defaultDuration})}},{key:"update",value:function(t){var e=/^top|^bottom/.test(this.position)?"width":"height";p[0].style[e]=s["default"].util.px(t)}},{key:"complete",value:function(t){h.addClass("is-done"),setTimeout(function(){h.detach().removeClass("bar--bottom bar--top bar--light is-done"),p.attr("style",""),t()},s["default"].util.getTransitionDuration(h[0]))}},{key:"getFrom",value:function(){return/^top|^bottom/.test(this.position)?p[0].clientWidth:p[0].clientHeight}}]),t}(),m={mount:function(t,e){f=new v(t,e),f.append()},progress:function(t){f.progress(t)},load:function(t,e){f=new v(t,e),f.load()},stop:function(){f&&f.stop(function(){f=null})}};e["default"]=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(110),s=n(r),l=i(111),u=n(l),d=i(112),c=n(d),f=i(114),h=n(f),p=null,v=null,m={dependencies:{sources:[{file:"greensock.draggable.js",type:"script"}],filter:function(){return p.filter("[data-type='beltdragger']").length>0}},init:function(){a["default"].log("galleries initialized"),a["default"].emitter.on("app--update-galleries",this.onActivateWaypoints.bind(this)),a["default"].emitter.on("app--pushed-route",this.onActivateWaypoints.bind(this))},isActive:function(){return this.getElements()>0},onload:function(){this.handleOnload()},unload:function(){this.teardown()},teardown:function(){g(),this.dependencies.loaded&&a["default"].util.unloadDependencies(this.dependencies),v&&(v.destroy(),v=null),p=null},getElements:function(){return p=a["default"].dom.page.find(".js-gallery"),p.length},setWaypoints:function(){v=new a["default"].Waypoints(p,y,a["default"].util.isElementVisibleVert)},onActivateWaypoints:function(){this.getElements(),this.handleOnload()},handleOnload:function(){var t=this;this.dependencies.filter()&&!this.dependencies.loaded?a["default"].util.loadDependencies(this.dependencies,function(){t.setWaypoints()}):this.setWaypoints()}},g=function(){var t=p.filter(".is-loaded"),e=t.length,i=null;for(e;e--;)i=t.eq(e).data(),i.gallery&&(i.gallery.destroy(),i.gallery=null)},y=function(t){var e=null,i=t.data();"beltdragger"===i.type?e=new s["default"](t,i):"carousel"===i.type?i.style&&"inline"!==i.style?"auto"===i.style&&(e=new c["default"](t,i)):e=new h["default"](t):"colorplates"===i.type&&(e=new u["default"](t)),t.data("gallery",e)};e["default"]=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=function(){function t(e,i){var n=this;o(this,t),this.data=i,this.$node=e.addClass("is-loaded"),this.draggable=null,this.$dragIcon=this.$node.find(".js-gallery-drag"),this.$images=this.$node.find(".js-gallery-image"),this.$itemsWrap=this.$node.find(".js-gallery-items"),this.$items=this.$node.find(".js-gallery-item"),this.$midImage=this.$images.eq(Math.floor((this.$images.length-1)/2)),this.boxHeight=this.data.boxHeight?parseFloat(this.data.boxHeight):null,this.imageSizeDimensions=[],this.isAlignCenter="center"===this.data.align,this.isNonUniform=this.getSetUniformity(),this.waypoint=new s["default"].Waypoints(this.$dragIcon,function(){n.$dragIcon.addClass("is-active")},s["default"].util.isElementVisibleVert),this.isNonUniform?(this.$node.addClass("is-organic"),this.sizeImages()):this.$node.addClass("is-uniform"),s["default"].util.loadImages(this.$images,s["default"].util.noop).on("done",function(){n.bindEvents(),n.createDraggable()})}return a(t,[{key:"bindEvents",value:function(){this._onResize=this.onResize.bind(this),this._onUpdate=this.onUpdate.bind(this),this._onDragStart=this.onDragStart.bind(this),this._onDragEnd=this.onDragEnd.bind(this),s["default"].emitter.on("app--resize-debounced",this._onResize)}},{key:"getSetUniformity",value:function(){this.isNonUniform=!1;var t=this.$images.length-1,e=this.$images.eq(0).data(),i=null,n=s["default"].util.getOriginalDims(e.original),o=n.height;for(this.imageSizeDimensions.unshift(n),t;t--;)e=this.$images.eq(t).data(),n=s["default"].util.getOriginalDims(e.original),i=n.height,i!==o&&(this.isNonUniform=!0),this.imageSizeDimensions.unshift(n);return this.isNonUniform}},{key:"centerBelt",value:function(){s["default"].util.translate3d(this.$itemsWrap[0],s["default"].util.px(-this.$midImage[0].offsetLeft+window.innerWidth/2-this.$midImage[0].clientWidth/2),0,0)}},{key:"createDraggable",value:function(){this.isAlignCenter&&this.centerBelt(),this.draggable=new window.Draggable(this.$itemsWrap[0],s["default"].util.extendObject(s["default"].config.defaultDragBeltOptions,{bounds:this.$node[0],onDragStart:this._onDragStart,onDragEnd:this._onDragEnd,onDrag:this._onUpdate,onThrowUpdate:this._onUpdate})),this.$node.addClass("is-draggable"),this.$items.addClass("is-active")}},{key:"onDragStart",value:function(){this.$node.addClass("is-dragging")}},{key:"onDragEnd",value:function(){this.$dragIcon.removeClass("is-active"),this.$node.removeClass("is-dragging")}},{key:"onResize",value:function(){this.isNonUniform&&this.sizeImages(),this.draggable.applyBounds(this.$node[0])}},{key:"onUpdate",value:function(){var t=null,e=this.$items.length;for(e;e--;)t=this.$items.eq(e),s["default"].util.isElementVisibleHorz(t[0])?t.addClass("is-active"):t.removeClass("is-active")}},{key:"getBoxHeight",value:function(){return Math.min(window.innerHeight,window.innerWidth)*(this.boxHeight||.7)}},{key:"sizeImages",value:function(){var t=this.$images.length,e=this.getBoxHeight();for(t;t--;){var i=s["default"].util.calculateAspectRatioFit(this.imageSizeDimensions[t].width,this.imageSizeDimensions[t].height,e,e);this.$images[t].parentNode.style.width=s["default"].util.px(i.width)}}},{key:"destroy",value:function(){this.draggable&&this.draggable.kill(),this._onResize&&s["default"].emitter.off("app--resize-debounced",this._onResize)}}]),t}();e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=i(5),u=n(l),d=function(){function t(e){o(this,t),this.$node=e.addClass("is-loaded"),this.$plates=this.$node.find(".js-gallery-plate"),this.$colorGrab=(0,u["default"])("<div />").addClass("is-hidden"),this.$node.prepend(this.$colorGrab),this.originalColor=s["default"].dom.html[0].style.backgroundColor||null,this.bindEvents()}return a(t,[{key:"bindEvents",value:function(){this._onUpdatePlates=this.onUpdatePlates.bind(this),s["default"].emitter.on("app--scroll",this._onUpdatePlates)}},{key:"onPlateHandler",value:function(t,e){t.addClass("is-active is-active-color"),s["default"].dom.html[0].style.backgroundColor=e,this.$colorGrab[0].style.backgroundColor=e,s["default"].util.processBgColorForBroadcast(this.$colorGrab[0])}},{key:"getMostVisibleElement",value:function(t){var e=null,i=0,n=null,o=null,a=t.length;if(1===t.length)o=t;else for(a;a--;){if(e=t[a].getBoundingClientRect(),e.top>=0&&e.bottom<=window.innerHeight){o=t.eq(a);break}e.top>0&&(n=window.innerHeight-e.top),e.height<window.innerHeight?n=e.height-Math.abs(e.top):e.bottom<window.innerHeight&&(n=window.innerHeight-(window.innerHeight-e.bottom)),n>i&&(i=n,o=t.eq(a))}return o}},{key:"deactivatePlates",value:function(){this.$node.removeClass("is-active"),this.$plates.removeClass("is-active is-active-color"),this.originalColor?(this.$colorGrab[0].style.backgroundColor=this.originalColor,s["default"].dom.html[0].style.backgroundColor=this.originalColor,s["default"].util.processBgColorForBroadcast(this.$colorGrab[0])):s["default"].util.resetBgColorForBroadcast()}},{key:"onUpdatePlates",value:function(){var t=null,e=s["default"].util.getElementsInView(this.$plates),i=this.getMostVisibleElement(e),n=this.$node[0].getBoundingClientRect();e.length?n.top>window.innerHeight/2&&this.$node.is(".is-active")?this.deactivatePlates():(n.top<window.innerHeight/2&&!this.$node.is(".is-active")&&(this.$node.addClass("is-active"),this.onPlateHandler(this.$plates.eq(0),this.$plates.eq(0).data("color"))),i&&!i.is(".is-active-color")&&this.$node.is(".is-active")&&(t=i.data(),this.$plates.removeClass("is-active is-active-color"),e.addClass("is-active"),this.onPlateHandler(i,t.color),t.cover?s["default"].dom.html.addClass("is-gallery-light"):s["default"].dom.html.removeClass("is-gallery-light"))):this.$node.is(".is-active")&&this.deactivatePlates()}},{key:"destroy",value:function(){s["default"].util.resetBgColorForBroadcast(),s["default"].dom.html.removeClass("is-gallery-light"),this._onUpdatePlates&&s["default"].emitter.off("app--scroll",this._onUpdatePlates)}}]),t}();e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,i)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},u=i(3),d=n(u),c=i(113),f=n(c),h=function(t){function e(t,i){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t));return n.nodeData=i,n.on("load",n.onLoad.bind(n)),n.on("before",n.onBefore.bind(n)),n.on("after",n.onAfter.bind(n)),n.on("tap",n.clearAuto.bind(n)),n.on("swipe",n.clearAuto.bind(n)),n.$next=n.$node.find(".js-gallery-next"),n.$prev=n.$node.find(".js-gallery-prev"),n.$locks=n.$node.find(".js-gallery-lock"),
n.autoDuration=5e3,n.isEnabled=!1,n}return r(e,t),s(e,[{key:"bindScroll",value:function(){this._onScroll=this.onScroll.bind(this),d["default"].emitter.on("app--scroll",this._onScroll)}},{key:"bindMenu",value:function(){this._onMenuOpened=this.onMenuOpened.bind(this),this._onMenuClosed=this.onMenuClosed.bind(this),d["default"].emitter.on("app--menu-opened",this._onMenuOpened),d["default"].emitter.on("app--menu-closed",this._onMenuClosed)}},{key:"clearAuto",value:function(){try{clearTimeout(this.autoTimeout)}catch(t){d["default"].log("warn",t)}}},{key:"handleData",value:function(){if(this.nodeData.cover){var t=this.$active.data("tone"),e=this.$node[0].getBoundingClientRect();"light"===t&&Math.floor(e.top)<=0?d["default"].dom.html.addClass("is-gallery-light"):d["default"].dom.html.removeClass("is-gallery-light")}}},{key:"update",value:function(){this.handleData(),this.autoTimeout=setTimeout(this.onAuto.bind(this),this.autoDuration)}},{key:"transformActive",value:function(t){var e=this.$active[0].clientHeight-window.innerHeight,i=t/window.innerHeight*e;d["default"].util.translate3d(this.$active.find(".js-gallery-image")[0],0,d["default"].util.px(-i),0)}},{key:"checkCover",value:function(){this.nodeData.cover&&d["default"].dom.html.removeClass("is-gallery-light")}},{key:"onAuto",value:function(){this.advance()}},{key:"onLoad",value:function(){var t=this;this.onScroll(),this.bindScroll(),this.bindMenu(),setTimeout(function(){t.$active.find(".js-gallery-lock").addClass("is-active")},this.data.duration)}},{key:"onBefore",value:function(){this.update()}},{key:"onAfter",value:function(){this.$locks.removeClass("is-active"),this.$active.find(".js-gallery-lock").addClass("is-active")}},{key:"onScroll",value:function(t){var e=d["default"].util.isElementVisibleVert(this.$node[0]);e&&this.nodeData.cover&&this.transformActive(t),e?this.isEnabled?this.handleData():(this.isEnabled=!0,this.update()):this.isEnabled&&(this.isEnabled=!1,this.clearAuto(),this.checkCover())}},{key:"onMenuOpened",value:function(){this.isEnabled=!1,this.clearAuto()}},{key:"onMenuClosed",value:function(){this.onScroll()}},{key:"destroy",value:function(){l(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.clearAuto(),this.checkCover(),this._onScroll&&d["default"].emitter.off("app--scroll",this._onScroll),this._onMenuOpened&&(d["default"].emitter.off("app--menu-opened",this._onMenuOpened),d["default"].emitter.off("app--menu-closed",this._onMenuClosed)),d["default"].dom.html.removeClass("is-gallery-light")}}]),e}(f["default"]);e["default"]=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(38),u=n(l),d=i(3),c=n(d),f=i(76),h=n(f),p=i(40),v=n(p),m=function(t){function e(t){o(this,e);var i=a(this,Object.getPrototypeOf(e).call(this));return i.$node=t.addClass("is-loaded"),i.$index=i.$node.find(".js-gallery-index"),i.$items=i.$node.find(".js-gallery-item"),i.$images=i.$node.find(".js-gallery-image"),i.$active=i.$items.eq(0),i.hammers={},i.data={index:0,length:i.$items.length,timeout:null,duration:c["default"].util.getTransitionDuration(i.$items[0])},i.setIndex(),i.$images.length?c["default"].util.loadImages(i.$images,c["default"].util.noop).on("load",i.onImageLoad.bind(i)).on("done",i.initialize.bind(i)):setTimeout(i.initialize.bind(i),0),i}return r(e,t),s(e,[{key:"initialize",value:function(){this.fire("load"),c["default"].detect.isDevice()&&this.bindSwipe(),this.bindEvents(),this.$active.addClass("is-active")}},{key:"bindEvents",value:function(){this._onTap=this.onTap.bind(this),this.hammers.tap=new h["default"](this.$node[0],c["default"].util.getDefaultHammerOptions()),this.hammers.tap.on("tap",".js-gallery-item",this._onTap)}},{key:"bindSwipe",value:function(){this._onSwiped=this.onSwiped.bind(this),this._onGesture=this.onGesture.bind(this),this.hammers.swipe=new h["default"](this.$node[0],c["default"].util.getDefaultHammerOptions()),this.hammers.swipe.on("panstart",".js-gallery-item",this._onGesture),this.hammers.swipe.on("panend",".js-gallery-item",this._onSwiped)}},{key:"setIndex",value:function(){this.$index[0].innerText=this.data.index+1+" / "+this.data.length}},{key:"clear",value:function(){try{clearTimeout(this.data.timeout),this.$items.removeClass("is-entering is-exiting is-active")}catch(t){c["default"].log("warn",t)}}},{key:"transition",value:function(t,e){var i=this;this.$active=t,this.setIndex(),this.fire("before",e,t),e.removeClass("is-active").addClass("is-exiting"),t.addClass("is-entering"),this.data.timeout=setTimeout(function(){e.removeClass("is-exiting"),t.removeClass("is-entering").addClass("is-active"),i.fire("after",t,e)},this.data.duration)}},{key:"advance",value:function(){this.clear(),this.data.index===this.data.length-1?this.data.index=0:this.data.index++,this.transition(this.$items.eq(this.data.index),this.$active)}},{key:"rewind",value:function(){this.clear(),0===this.data.index?this.data.index=this.data.length-1:this.data.index--,this.transition(this.$items.eq(this.data.index),this.$active)}},{key:"onImageLoad",value:function(t){"IMG"===t.tagName&&(t.naturalHeight>t.naturalWidth?t.className+=" image--tall":t.className+=" image--wide")}},{key:"onGesture",value:function(){this.fire("swipe")}},{key:"onSwiped",value:function(t){t.preventDefault(),t.direction===u["default"].DIRECTION_LEFT?this.advance():t.direction===u["default"].DIRECTION_RIGHT&&this.rewind()}},{key:"onTap",value:function(t){this.fire("tap"),"A"!==t.target.tagName&&this.advance()}},{key:"destroy",value:function(){this._onTap&&this.hammers.tap.off("tap",this._onTap),this._onSwiped&&(this.hammers.swipe.off("panend",this._onSwiped),this.hammers.swipe.off("panleft",this._onGesture),this.hammers.swipe.off("panright",this._onGesture))}}]),e}(v["default"]);e["default"]=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(113),u=n(l),d=function(t){function e(t){o(this,e);var i=a(this,Object.getPrototypeOf(e).call(this,t));return i.$itemsWrap=i.$node.find(".js-gallery-items"),i.on("load",i.onLoad.bind(i)),i}return r(e,t),s(e,[{key:"onLoad",value:function(){this.applyAspect()}},{key:"applyAspect",value:function(){var t=this.$images.length,e=null,i=null,n=0,o=0;for(t;t--;)e=this.$images[t].naturalWidth,i=this.$images[t].naturalHeight,n=i/e,1>=n&&n>o&&(o=n);n=100*o,this.$itemsWrap[0].style.paddingBottom=n+"%"}}]),e}(u["default"]);e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),a=n(o),r=i(76),s=n(r),l=i(3),u=n(l),d=i(90),c=n(d),f=i(91),h=n(f),p=i(63),v=n(p),m=i(33),g=n(m),y=i(108),b=n(y),_=null,w=null,T=null,E=null,P={},k=!1,C={init:function(){u["default"].log("filters initialized")},isActive:function(){return this.getElements()>0},onload:function(){var t=(0,g["default"])(window.location.search);v["default"].setState("categoryFilter",t.category||"All"),this.bindMainEvents(),this.menu=new h["default"](w),b["default"].stop()},unload:function(){this.teardown()},teardown:function(){P.label.off("tap",$),P.menu.off("tap",M),P.menu.off("tap",j),P={},_=null,w=null,T=null,E=null},getElements:function(){return _=u["default"].dom.page.find(".js-filters"),w=u["default"].dom.page.find(".js-filters-menu"),T=w.find(".js-filters-category"),E=_.find(".js-filters-category"),_.length},open:function(){this.menu.isActive()||(this.menu.open(),P.menu.on("tap",".js-filters-menu",M),P.menu.on("tap",".js-filters-category",j))},close:function(){this.menu.isActive()&&(this.menu.close(),P.menu.off("tap",M),P.menu.off("tap",j))},bindMainEvents:function(){P.label=new s["default"](_[0],u["default"].util.getDefaultHammerOptions()),P.label.on("tap",".js-controller--filters",$),P.menu=new s["default"](w[0],u["default"].util.getDefaultHammerOptions())}},j=function(){var t=(0,a["default"])(this),e=t[0].innerText;c["default"].disableHeaderAnim(!0),T.removeClass("is-active"),t.addClass("is-active"),E[0].innerHTML=e,$(),b["default"].load("bottom")},M=function(t){-1===t.target.className.indexOf("js-filters-category")&&$()},$=function(){k=!k,k?C.open():C.close()};e["default"]=C},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(117),a=n(o),r=i(120),s=n(r),l={grid:a["default"],items:s["default"]};e["default"]=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(118),a=n(o),r=i(3),s=n(r),l=i(5),u=n(l),d=i(81),c=n(d),f=null,h=null,p={init:function(){s["default"].log("grid initialized")},isActive:function(){return this.getElements()>0},onload:function(){var t=f.data();h=new a["default"](f,t)},unload:function(){this.teardown()},teardown:function(){f=null,h&&(h.destroy(),h=null)},getElements:function(){return f=s["default"].dom.page.find(".js-grid"),f.length},getMappedItems:function(t){return t.map(function(t){return t.taxonomy=t.categories?t.categories.join(" / "):"",-1!==t.categories.indexOf(s["default"].config.devCategory)&&!t[s["default"].config.sqsSpecialProps.userUpload]&&t.customContent.formattedTitle.source&&(t.title=t.customContent.formattedTitle.html),t})},getGridCluster:function(t){return(0,c["default"])("GridWall",{items:t})},loadGridImages:function(t,e){s["default"].util.loadImages(t,s["default"].util.noop).on("done",function(){return e()})},loadGridCluster:function(t){var e=this,i=(0,u["default"])(this.getGridCluster(t));return new Promise(function(t){e.loadGridImages(i.find(".js-grid-image"),function(){return t(i)})})}};e["default"]=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(3),s=n(r),l=i(117),u=n(l),d=i(108),c=n(d),f=i(63),h=n(f),p=i(119),v=n(p),m=function(){function t(e,i){o(this,t),this.$node=e,this.data=i,this.stateKey="scrollRestoration"+this.data.collection.id,this.scrollRestoration=h["default"].getState(this.stateKey),this.isLoading=!1,this.initialize()}return a(t,[{key:"initialize",value:function(){var t=this,e=this.getCacheKeys();this.data.items=s["default"].cache.get(e.items)||u["default"].getMappedItems(this.data.items),this.data.pagination=s["default"].cache.get(e.pages)||this.data.pagination,this.cacheGridItems(this.data.items,this.data.pagination),u["default"].loadGridCluster(this.data.items).then(function(e){t.$node.append(e),t.$node.addClass("is-loaded"),t.scrollRestoration&&t.scrollRestoration.collectionId===t.data.collection.id&&t.scrollRestoration.categoryFilter===t.data.categoryFilter&&(s["default"].dom.body[0].scrollTop=t.scrollRestoration.scrollPosition),t._onScrollEnd=t.onScrollEnd.bind(t),s["default"].emitter.fire("app--init"),s["default"].emitter.fire("app--update-animate"),s["default"].emitter.on("app--scroll",t._onScrollEnd)})}},{key:"showItems",value:function(){this.$node.children().removeClass("is-hidden"),s["default"].emitter.fire("app--update-animate")}},{key:"getCacheKeys",value:function(){var t="grid--"+this.data.collection.urlId+"--All-items",e="grid--"+this.data.collection.urlId+"--All-pagination";return this.data.categoryFilter&&(t="grid--"+this.data.collection.urlId+"--"+this.data.categoryFilter+"-items",e="grid--"+this.data.collection.urlId+"--"+this.data.categoryFilter+"-pagination"),{items:t,pages:e}}},{key:"cacheGridItems",value:function(t,e){var i=this.getCacheKeys();s["default"].cache.set(i.items,t),s["default"].cache.set(i.pages,e)}},{key:"onScrollEnd",value:function(){var t=this,e=this.$node[0].getBoundingClientRect();!this.isLoading&&this.data.pagination&&this.data.pagination.nextPageUrl&&e.bottom<=window.innerHeight&&(this.$node.addClass("is-no-events"),this.isLoading=!0,s["default"].util.disableMouseWheel(!0),s["default"].util.disableTouchMove(!0),c["default"].load("bottom"),this.getLoadedGridCluster("collection",this.data.pagination.nextPageUrl,function(e){t.$node.removeClass("is-no-events"),t.handleLoadDone(e)}))}},{key:"onLoadComplete",value:function(){this.isLoading=!1,s["default"].util.disableMouseWheel(!1),s["default"].util.disableTouchMove(!1),s["default"].emitter.fire("app--update-animate")}},{key:"handleLoadDone",value:function(t){var e=this;c["default"].stop(),this.$node.append(t),setTimeout(function(){(0,v["default"])({y:s["default"].scroller.getScrollY()+window.innerHeight/3,ease:s["default"].config.defaultEasing,duration:s["default"].config.defaultDuration,complete:e.onLoadComplete.bind(e)})},10)}},{key:"destroy",value:function(){h["default"].setState(this.stateKey,{scrollPosition:s["default"].scroller.getScrollY(),collectionId:this.data.collection.id,categoryFilter:this.data.categoryFilter}),this._onScrollEnd&&s["default"].emitter.off("app--scroll",this._onScrollEnd)}},{key:"getGridNodes",value:function(t,e){var i=this;return new Promise(function(n){var o=function(t){var e=u["default"].getMappedItems(t.items);t.pagination&&(this.data.pagination=t.pagination),this.data.items=this.data.items.concat(e),this.cacheGridItems(this.data.items,this.data.pagination),n(e)},a=function(t,e,i){s["default"].log("warn",i)};s["default"].api[t](e).then(o.bind(i))["catch"](a.bind(i))})}},{key:"getLoadedGridCluster",value:function(t,e,i){this.getGridNodes(t,e).then(function(t){u["default"].loadGridCluster(t).then(function(t){i(t)})})}}]),t}();e["default"]=m},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(71),e=i(36),n=function(i){var n={x:window.scrollX||document.documentElement.scrollLeft,y:window.scrollY||document.documentElement.scrollTop};return i=i||{},i.ease=i.ease||e.swing,i.duration=i.duration||600,i.from=void 0!==i.y?n.y:n.x,i.to=void 0!==i.y?i.y:i.x,i.update=function(t){void 0!==i.y?window.scrollTo(n.x,t):void 0!==i.x&&window.scrollTo(t,n.y)},new t(i)};return n})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r=i(63),s=n(r),l=i(121),u=n(l),d=i(123),c=n(d),f=null,h=null,p={init:function(){a["default"].log("items initialized")},isActive:function(){return this.getElements()>0},onload:function(){var t=f.data(),e=s["default"].getState(a["default"].config.gridCustomType);e?a["default"].emitter.fire("app--customgrid-article",f,t):h=t.item.customContent.customType===a["default"].config.caseStudyCustomType?new c["default"](f,t):new u["default"](f,t)},unload:function(){this.teardown()},teardown:function(){f=null,h&&(h.destroy(),h=null)},getElements:function(){return f=a["default"].dom.page.find(".js-article"),f.length}};e["default"]=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(3),u=n(l),d=i(117),c=n(d),f=i(122),h=n(f),p=function(t){function e(t,i){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,i));return n.$articleSummary=n.$article.find(".js-article-summary"),n.$articleSummary.length&&n.loadSummaryGrid(),n}return r(e,t),s(e,[{key:"loadSummaryGrid",value:function(){var t=this;this.$article.find(".sqs-layout").addClass("is-summarized"),this.summaryData=this.$articleSummary.data(),this.summaryData.items=u["default"].util.shuffle(this.summaryData.items.filter(function(e){return e.id!==t.data.item.id})).slice(0,3),this.summaryData.items=c["default"].getMappedItems(this.summaryData.items,this.summaryData.collection),c["default"].loadGridCluster(this.summaryData.items).then(function(e){t.$articleSummary.append(e),u["default"].emitter.fire("app--update-animate")})}}]),e}(h["default"]);e["default"]=p},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(66),u=n(l),d=i(63),c=n(d),f=i(3),h=n(f),p=i(40),v=n(p),m=function(t){function e(t,i){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this));return n.data=i,n.$article=t,n.$articleCms=n.$article.find(".js-article-cms"),n.$animateIntro=n.$article.find(".js-animate-article"),n.$backLink=u["default"].getElement().find("a"),n.isIntroArtDone=!1,n.categoryFilter=c["default"].getState("categoryFilter"),n.stateKey="scrollRestoration"+n.data.collection.id,n.scrollRestoration=c["default"].getState(n.stateKey),n.scrollRestoration&&n.scrollRestoration.collectionId===n.data.collection.id&&n.scrollRestoration.categoryFilter===n.categoryFilter&&c["default"].setState(n.stateKey,n.scrollRestoration),n.categoryFilter&&n.categoryFilter!==h["default"].config.defaultCategory&&n.setBackLink(n.data.collection.fullUrl+"?category="+n.categoryFilter),n.bindIntroHandlers(),n}return r(e,t),s(e,[{key:"setBackLink",value:function(t){this.$backLink[0].href=t}},{key:"applyIntroArt",value:function(){var t=this;setTimeout(function(){t.onIntroArt()},10)}},{key:"bindIntroHandlers",value:function(){this._onIntroArt=this.onIntroArt.bind(this),h["default"].emitter.on("app--intro-art",this._onIntroArt)}},{key:"onIntroArt",value:function(){var t=this;this.isIntroArtDone=!1,this.$animateIntro.addClass("is-active"),setTimeout(function(){t.isIntroArtDone=!0,t.$animateIntro.addClass("is-static")},600)}},{key:"destroy",value:function(){h["default"].emitter.off("app--intro-art",this._onIntroArt)}}]),e}(v["default"]);e["default"]=m},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function M(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:M(o,e,i)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},u=i(5),d=n(u),c=i(64),f=n(c),h=i(90),p=n(h),v=i(63),m=n(v),g=i(3),y=n(g),b=i(108),_=n(b),w=i(119),T=n(w),E=i(122),P=n(E),k=i(81),C=n(k),j=function(t){function e(t,i){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,i));return n.$articleNext=n.$article.find(".js-article-next"),n.$articleStyle=n.$article.find(".js-article-style"),n.$articlePlate=n.$article.find(".js-article-plate"),n.$articleCover=n.$articlePlate.find(".js-article-cover"),n.$articleLeadIn=n.$articlePlate.find(".js-article-leadin"),n.isNewArticle=!1,n.nextData=n.$articleNext.data("next"),n.$articleNext.length&&(n.nextDuration=y["default"].util.getTransitionDuration(n.$articleNext[0])),n.createNextArticlePlate(),n.bindNextHandlers(),n.bindCoverHandlers(),n}return r(e,t),s(e,[{key:"createNextArticlePlate",value:function(){this.nextData&&(this.$articleNextPlate=(0,d["default"])((0,C["default"])("NextCaseStudy",{id:this.nextData.id,leadInColor:this.nextData.customContent.leadInColor,leadInTextColor:this.nextData.customContent.leadInTextColor||"",text:this.nextData.customContent.formattedLeadin.html||this.nextData.title})))}},{key:"bindCoverHandlers",value:function(){y["default"].detect.isStandalone()||(this._onScrollLeadIn=this.onScrollLeadIn.bind(this),y["default"].emitter.on("app--scroll",this._onScrollLeadIn))}},{key:"bindNextHandlers",value:function(){this.nextData&&(this._onArticleNew=this.onArticleNew.bind(this),y["default"].dom.page.on("click",".js-article-next",this._onArticleNew)),this._onArticleNewHandle=this.onArticleNewHandle.bind(this),this.on("article-new",this._onArticleNewHandle)}},{key:"onArticleNew",value:function(){this.fire("article-new")}},{key:"onArticleNewHandle",value:function(){this.handleArticleNew()}},{key:"handleArticleNew",value:function(){this.isNewArticle||(y["default"].util.disableMouseWheel(!0),y["default"].util.disableTouchMove(!0),p["default"].disableHeader(!0),this.isNewArticle=!0,this.$articleNext[0].innerHTML="",this.$articleNext[0].style.backgroundColor=this.nextData.customContent.leadInColor,this.$articleNext[0].style.height=y["default"].util.px(window.innerHeight),(0,T["default"])({y:this.$articleNext[0].offsetTop,ease:y["default"].config.defaultEasing,duration:this.nextDuration,complete:this.onArticleTimeout.bind(this)}),_["default"].load("bottom","light"))}},{key:"onArticleTimeout",value:function(){this.$articleCms.remove(),this.$articlePlate.remove(),this.$articleStyle.remove(),this.$articlePlate=this.$articleNextPlate,this.$article.prepend(this.$articlePlate),this.$articleCover=this.$articlePlate.find(".js-article-cover"),this.$articleLeadIn=this.$articlePlate.find(".js-article-leadin"),this.$articleNext.remove(),this.$animateIntro=this.$articlePlate.find(".js-animate-article"),this.applyIntroArt(),y["default"].dom.html.attr("style",""),m["default"].push(this.nextData.fullUrl,this.onArticleLoad.bind(this))}},{key:"onArticleLoad",value:function(t){var e=this,i=m["default"].parseDoc(t.response),n=i.$page.find(".js-article");this.data=n.data(),this.isNewArticle=!1,this.$articleNext=n.find(".js-article-next"),this.$articleStyle=n.find(".js-article-style"),this.$articleCms=n.find(".js-article-cms"),this.$animateIntro=n.find(".js-animate-article"),this.$article.append(this.$articleStyle),this.$article.append(this.$articleCms),this.$article.append(this.$articleNext),y["default"].util.disableMouseWheel(!1),y["default"].util.disableTouchMove(!1),y["default"].scrolls.clearStates(),p["default"].cycleHeader(),f["default"].setElement(this.$articlePlate),y["default"].images.handleImages(null,function(){e.nextData=e.$articleNext.data("next"),e.applyIntroArt(),e.setBackLink(e.data.collection.fullUrl),e.fire("article-load"),e.nextData?e.createNextArticlePlate():y["default"].dom.page.off("click",e._onArticleNew),y["default"].emitter.fire("app--pushed-route"),y["default"].emitter.fire("app--analytics-push",i)}),_["default"].stop()}},{key:"onScrollLeadIn",value:function(t){if(!this.isNewArticle){var e=null,i=null,n=this.$articleLeadIn[0].getBoundingClientRect(),o=this.$articleCover[0].getBoundingClientRect(),a=(o.height-n.height)/2;0>=t?(this.isIntroArtDone&&(i=1,this.$articleLeadIn[0].style.opacity=i),y["default"].util.translate3d(this.$articleCover[0],0,0,0)):(this.isIntroArtDone&&(i=1-t/a,i=0>i?0:i>1?1:i,this.$articleLeadIn[0].style.opacity=i),e=t/3,y["default"].util.translate3d(this.$articleCover[0],0,y["default"].util.px(e),0))}}},{key:"destroy",value:function(){l(Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this._onScrollLeadIn&&y["default"].emitter.off("app--scroll",this._onScrollLeadIn),this._onArticleNew&&y["default"].dom.page.off("click",this._onArticleNew)}}]),e}(P["default"]);e["default"]=j},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(125),e=i(40),n=null,o=[],a=[],r={active:[],inactive:[]},s=!1,l=null,u=0,d="page-controller-",c=null,f=!0,h=null,p=null,v=!1,m=!1,g=null,y=!1,b=null,_=function(t,e){m||b.fire(d+t,e)},w=function(t){return"function"==typeof t},T=function(t){for(var e=a.length;e--;)!a[e].__initialized&&w(a[e].init)&&(a[e].__initialized=!0,a[e].init())},E=function(){if(!m)for(var t=r.active.length;t--;)w(r.active[t].unload)&&r.active[t].unload()},P=function(){if(!m)for(var t=r.active.length;t--;)w(r.active[t].onload)&&r.active[t].onload()},k=function(t){var e,i=t.uri;for(e in t.query)i+="-"+e+"-"+t.query[e];for(e in t.params)i+="-"+e+"-"+t.params[e];return i},C=function(){if(!m){r.active=[],r.inactive=[];for(var t=a.length;t--;){var e=a[t];w(e.isActive)&&(e.isActive()?r.active.push(e):r.inactive.push(e))}_("router-synced-modules",r)}},j=function(t){function e(){Date.now()-l>=b._options.transitionTime&&(b.stop(),O(t))}y||(y=!0,b.go(e))},M=function(t){y||($(t.request),setTimeout(function(){O(t)},b._options.transitionTime))},$=function(t){if(!y){var e=p===k(t);if(e)return _("router-samepage",{request:t}),void(v=!0);l=Date.now(),f||_("router-transition-out",{request:t})}},O=function(t){if(v)return v=!1,void(y=!1);var e={response:t.response.responseText,request:t.request,status:t.status};c=e.request.uri,h=e.request.query,p=k(e.request),f?(f=!1,y=!1,C(),P(),_("initialized-page",e)):setTimeout(function(){C(),E(),_("router-refresh-document",e),C(),P(),_("router-transition-in",e),y=!1,m&&(m=!1,w(g)&&(g(e),g=null))},b._options.transitionTime)},S=function(t){if(!b&&(b=this,this._options={transitionTime:u,routerOptions:{pushStateOptions:{}}},t=t||{},t.transitionTime&&(this._options.transitionTime=t.transitionTime),t.routerOptions))for(var e in t.routerOptions)this._options.routerOptions[e]=t.routerOptions[e];return b};return S.prototype=new e,S.prototype.initPage=function(){if(!s&&(s=!0,n=new t(this._options.routerOptions),n._matcher.parse(window.location.href,o).matched)){n.bind();for(var e=o.length;e--;)n.get(o[e],j);n.on("preget",$),n.on("popget",M),T()}},S.prototype.routeSilently=function(t,e){m=!0,g=e,n.trigger(t)},S.prototype.setConfig=function(t){o=t},S.prototype.setModules=function(t){if(t)for(var e=t.length;e--;)this.addModule(t[e])},S.prototype.addModule=function(t){if(!(-1===a.indexOf(t)&&w(t.isActive)&&w(t.onload)&&w(t.unload)))throw new Error("PageController ERROR - All registered modules require isActive, onload and unload methods.");a.push(t)},S.prototype.getModules=function(){return a},S.prototype.getConfig=function(){return o},S.prototype.getRouter=function(){return n},S.prototype.getPusher=function(){return n._pusher},S.prototype.getMatcher=function(){return n._matcher},S.prototype.getRoute=function(){return c},S.prototype.getQuery=function(){return h},S})},function(t,e,i){!function(e){t.exports=e()}(function(){var t,e=i(126),n=i(127),o=i(77),a=200,r=function(){return this.init.apply(this,arguments)};return r.prototype={constructor:r,_rHTTPs:/^http[s]?:\/\/.*?\//,_rFiles:/\.(jpg|jpeg|png|gif|pdf|csv|txt|md|doc|docx|xls|xlsx|webm|mp4|mp3)$/gi,_rDomain:new RegExp(document.domain),_isRouting:!1,init:function(t){this._options={proxy:!1,caching:!0,handle404:!0,handle500:!0,pushStateOptions:{}},t=t||{};for(var i in t)this._options[i]=t[i];this._matcher=new n,this._pusher=new e(this._options.pushStateOptions),this._callbacks={},this._responses={},this._uid=0,this._ready=!1},bind:function(){var t=this,e=window.location.href.replace(window.location.hash,"");document.addEventListener("click",function(e){t._handleClick(this,e)},!1),this._pusher.on("popstate",function(e,i){t._handlePopstate(e,i)}),this._options.handle404?this._route(e,function(e,i){t._ready=!0}):setTimeout(function(){var i=(new XMLSerializer).serializeToString(document),n={status:200,responseText:i};t._fire("get",e,n,n.status),t._cache(e,n),t._ready=!0},a)},on:function(t,e){this._bind(t,e)},off:function(t,e){this._unbind(t,e)},trigger:function(e){t||(t=document.createElement("a")),t.href=e,this._handleClick(t,{target:t})},get:function(t,e){this._matcher.config([t]),e._routerRoutes?e._routerRoutes.push(t):e._routerRoutes=[t],1===e._routerRoutes.length&&this._bind("get",e)},getRouteForUrl:function(t){return this._matcher._cleanRoute(t)},getRouteDataForUrl:function(t){return this._matcher.parse(t,this._matcher.getRoutes()).params},getUID:function(){return this._uid=this._uid+1,this._uid},_preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},_handleClick:function(t,e){var i=o(t,"a")||o(e.target,"a"),n=i&&this._matcher.test(i.href),a=i&&this._rDomain.test(i.href),r=i&&this._options.proxy&&this._options.proxy.domain,s=i&&-1!==i.href.indexOf("#"),l=i&&-1!==i.className.indexOf("js-router--ignore"),u=i&&e.metaKey,d=i&&"_blank"===i.target,c=i&&a&&i.href.match(this._rFiles);(n&&a||r)&&(s||l||u||d||c||(this._preventDefault(e),this._isRouting||this._route(i.href)))},_handlePopstate:function(t,e){if(this._ready){for(var i=this._callbacks.get.length;i--;){var n=this._matcher.parse(t,this._callbacks.get[i]._routerRoutes);if(n.matched)break}data={route:this._matcher._cleanRoute(t),response:this._responses[t],
request:n,status:this._responses[t].status},this._fire("popget",t,data)}else this._ready=!0},_route:function(t,e){var i=this,n={request:t,original:t};this._isRouting=!0,this._matchUrl(n.original),this._options.proxy&&this._options.proxy.domain&&(n.request=this._options.proxy.domain+"/"+n.request.replace(this._rHTTPs,"")),this._getUrl(n,function(t,o){i._isRouting=!1,i._pusher.push(n.original),i._fire("get",n.original,t,o),"function"==typeof e&&e(t,o)})},_matchUrl:function(t){if(this._ready)for(var e=this._callbacks.get.length;e--;){var i=this._matcher.parse(t,this._callbacks.get[e]._routerRoutes);if(i.matched){this._fire("preget",t,i);break}}},_getUrl:function(t,e){var i=function(i,n){try{o._cache(t.original,i),"function"==typeof e&&e(i,n)}catch(a){}},n=null,o=this;this._responses[t.original]?i(this._responses[t.original],this._responses[t.original].status):(n=new XMLHttpRequest,n.open("GET",t.request,!0),n.onreadystatechange=function(t){4===this.readyState&&(200===this.status?i(this,200):404===this.status&&o._options.handle404?i(this,404):500===this.status&&o._options.handle500&&i(this,500))},n.send())},_cache:function(t,e){this._options.caching&&!this._responses[t]&&(this._responses[t]=e)},_bind:function(t,e){"function"==typeof e&&(this._callbacks[t]||(this._callbacks[t]=[]),e._jsRouterID=this.getUID(),this._callbacks[t].push(e))},_unbind:function(t,e){if(!this._callbacks[t])return this;if(e){for(var i=0,n=this._callbacks[t].length;n>i;i++)if(e._jsRouterID===this._callbacks[t][i]._jsRouterID){this._callbacks[t].splice(i,1);break}}else{for(var o=this._callbacks[t].length;o--;)this._callbacks[t][o]=null;delete this._callbacks[t]}},_fire:function(t,e,i,n){var o;if("get"===t)for(o=this._callbacks[t].length;o--;){var a=this._matcher.parse(e,this._callbacks[t][o]._routerRoutes);a.matched&&this._callbacks[t][o].call(this,{route:this._matcher._cleanRoute(e),response:i,request:a,status:n})}else if(this._callbacks[t])for(o=this._callbacks[t].length;o--;)this._callbacks[t][o].call(this,i)}},r})},function(t,e,i){!function(e){t.exports=e()}(function(){var t=function(){return this.init.apply(this,arguments)};return t.prototype={constructor:t,_pushable:"history"in window&&"pushState"in window.history,_hashable:"onhashchange"in window,init:function(t){this._initUrl=window.location.href.replace(window.location.hash,""),this._options=t||{},this._enabled=!1,this._ishashpushed=!1,this._uid=0,this._states={},this._callbacks={},this._states[this._initUrl]={uid:this.getUID()},this._stateEnable()},on:function(t,e){"function"==typeof e&&(this._callbacks[t]||(this._callbacks[t]=[]),e._pushstateID=this.getUID(),e._pushstateType=t,this._callbacks[t].push(e))},off:function(t,e){if(this._callbacks[t])for(var i=this._callbacks[t].length;i--;)if(this._callbacks[t][i]._pushstateID===e._pushstateID){this._callbacks[t].splice(i,1);break}},push:function(t){t!==window.location.href&&(this._push(t),this._states[t]={uid:this.getUID()})},goBack:function(){window.history.back(),this._fire("backstate")},goForward:function(){window.history.forward(),this._fire("forwardstate")},getUID:function(){return this._uid=this._uid+1,this._uid},_push:function(t){if(this._pushable&&!this._options.forceHash)window.history.pushState(this._states[t],"",t);else{var e=t.replace(window.location.origin,"");e===window.location.pathname&&(e="/"),this._ishashpushed=!0,window.location.hash=e}},_fire:function(t,e){if(this._callbacks[t])for(var i=this._callbacks[t].length;i--;)this._callbacks[t][i].apply(this,[].slice.call(arguments,1))},_stateEnable:function(){if(this._enabled)return this;var t=this,e=function(){var e=window.location.href,i=["#/","#",""];t._options.forceHash&&(e=e.replace(window.location.hash,""),e=e.replace(window.location.pathname,""),e+=-1!==i.indexOf(window.location.hash)?window.location.pathname:window.location.hash.replace("#","")),t._fire("popstate",e,t._states[e])};this._enabled=!0,this._pushable&&!this._options.forceHash?window.addEventListener("popstate",function(t){e()},!1):this._hashable&&(this._push(this._initUrl),window.addEventListener("hashchange",function(i){t._ishashpushed?t._ishashpushed=!1:e()},!1))}},t})},function(t,e,i){!function(e){t.exports=e()}(function(){var t=i(33),e=function(){return this.init.apply(this,arguments)};return e.prototype={constructor:e,_rHTTPs:/^http[s]?:\/\/.*?\//,_rTrails:/^\/|\/$/g,_rHashQuery:/#.*$|\?.*$/g,_rWild:/^:/,_wilders:{num:/^[0-9]+$/,slug:/^[A-Za-z]+[A-Za-z0-9-_.]*$/},init:function(t){this._routes=t?this._cleanRoutes(t):[]},getRoutes:function(){return this._routes},config:function(t){return t="string"==typeof t?[t]:t,this._routes=this._routes.concat(this._cleanRoutes(t)),this},test:function(t){return this.parse(t,this._routes).matched},params:function(t){return this.parse(t,this._routes).params},compare:function(t,e){return this.parse(e,[t])},parse:function(e,i){for(var n,o,a,r,s,l,u,d,c=this._cleanRoute(e),f=c.split("/"),h=f.length,p=i.length,v=0;p>v;v++){if(o="*"===i[v],d={matched:!1,route:null,uri:[],params:{},query:t(e)},s=i[v].split("/"),"/"===c&&"/"===i[v]){d.matched=!0,d.route=i[v],d.uri="/";break}if(s.length===f.length||o){n=0;for(var m=0;h>m;m++)this._rWild.test(s[m])?(a=s[m].split("!"),r=a[0],u=a[1],u?(this._wilders[u]&&(l=this._wilders[u]),l&&l.test(f[m])&&(n++,d.params[r.replace(this._rWild,"")]=f[m],d.uri.push(f[m]))):(n++,d.params[r.replace(this._rWild,"")]=f[m],d.uri.push(f[m]))):f[m]===s[m]&&(n++,d.uri.push(f[m]));if(n===f.length||o){d.matched=!0,d.route=i[v],d.uri=o?c:d.uri.join("/");break}}}return d},_cleanRoute:function(t){return"/"!==t&&(t=t.replace(this._rHTTPs,""),t=t.replace(this._rTrails,""),t=t.replace(this._rHashQuery,""),t=t.replace(this._rTrails,"")),""===t&&(t="/"),t},_cleanRoutes:function(t){for(var e=t.length;e--;)t[e]=this._cleanRoute(t[e]);return t}},e})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),a=n(o),r={duration:a["default"].util.getTransitionDuration(a["default"].dom.intro[0]),teardown:function(){a["default"].dom.intro.removeClass("is-active"),setTimeout(function(){setTimeout(function(){a["default"].emitter.fire("app--intro-art")},0)},this.duration)}};e["default"]=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(5),s=n(r),l=i(3),u=n(l),d=i(75),c=n(d),f=i(81),h=n(f),p=null,v=function(){function t(){return o(this,t),p||(this.isOpen=!1,this.$node=(0,s["default"])((0,h["default"])("AudioBar",{})),this.$pp=this.$node.find(".js-audiobar-pp"),this._scrubber=null,this._scrubberUI={$module:this.$node,$progress:this.$node.find(".js-media-progress"),$scrubber:this.$node.find(".js-media-scrubber"),$time:this.$node.find(".js-media-time"),$duration:this.$node.find(".js-media-duration")},this._audio=null,this._audios=[],this.bindEvents(),u["default"].log("AudioBar initialized"),p=this),p}return a(t,[{key:"isActive",value:function(){return this.isOpen}},{key:"bindEvents",value:function(){this._onPPClick=this.onPPClick.bind(this),this._onSpaceBar=this.onSpaceBar.bind(this),this.$pp.on("click",this._onPPClick),u["default"].dom.doc.on("keypress",this._onSpaceBar)}},{key:"initAudio",value:function(t){return this._audio&&this._audio.data.id===t.data.id?void u["default"].log("AudioBar - Already activated this audio."):(this._audio&&(this._audio.destroy(),this._audios.splice(this._audios.indexOf(this._audio),1)),this._scrubber&&this._scrubber.destroy(),this._audio=t,this._scrubber=new c["default"]("audio",this._audio.data,this._scrubberUI),this.updateUI(this._audio.data.duration/1e3),this._audios.push(this._audio),void(this.isOpen?this.show():this.open()))}},{key:"stopAudios",value:function(){var t=this;this._audios.forEach(function(e){e.data.id!==t._audio.data.id&&e.stop()})}},{key:"open",value:function(){this.isOpen=!0,u["default"].dom.body.append(this.$node.addClass("is-off")),this.show()}},{key:"show",value:function(){var t=this;setTimeout(function(){t.$node.addClass("is-active")},10),setTimeout(function(){t.$node.removeClass("is-active is-off")},4e3)}},{key:"close",value:function(){var t=this;this.isOpen=!1,this.$node.addClass("is-off"),setTimeout(function(){t.$node.detach().removeClass("is-active is-off")},u["default"].config.defaultDuration)}},{key:"getAudioId",value:function(){return this._audio.data.id}},{key:"updateUI",value:function(t){this.$pp.removeClass("is-playing"),this._scrubber.resetUI(t)}},{key:"togglePPOn",value:function(){this.$pp.addClass("is-playing")}},{key:"togglePPOff",value:function(){this.$pp.removeClass("is-playing")}},{key:"onPPClick",value:function(){this._audio&&(c["default"].stopChannels(),this._audio.togglePP())}},{key:"onSpaceBar",value:function(t){this._audio&&t.keyCode===u["default"].keys.SPACE&&(t.preventDefault(),this.$pp.trigger("click"))}},{key:"destroy",value:function(){this._scrubber&&this._scrubber.destroy(),this._onPPClick&&this.$pp.off("click",this._onPPClick),this._onSpaceBar&&u["default"].dom.doc.off("keypress",this._onSpaceBar),this._audio&&(this._audio.destroy(),this._audio=null),this.isOpen&&this.close(),this.$pp.off("click"),this.$node.removeClass("is-active")}}]),t}();e["default"]=v},function(t,e,i){t.exports=i.p+"../css/screen.css"}])}]);
//# sourceMappingURL=app.min.js.map